<html lang="en-US" data-color-scheme="dark" dir="ltr"><plasmo-csui></plasmo-csui><head><meta name="min-version" content="1767751475304"><meta name="version" content="5e6e620"><meta charset="utf-8"><link rel="preconnect" crossorigin="" href="https://pplx-next-static-public.perplexity.ai"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#FCFCF9"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#100E12"><style>html:not(.todesktop){background-color:#fcfcf9}@media (prefers-color-scheme:light){html:not([data-color-scheme]){background-color:#fcfcf9}}@media (prefers-color-scheme:dark){html:not([data-color-scheme]){background-color:#100e12}}html[data-color-scheme=light]:not(.todesktop){background-color:#fcfcf9!important}html[data-color-scheme=dark]:not(.todesktop){background-color:#100e12!important}</style><script async="" src="https://static.ads-twitter.com/uwt.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=AW-17695033760"></script><script src="https://c.amazon-adsystem.com/aat/amzn.js" id="amzn-pixel" async=""></script><script id="podscribe-capture" async="" src="https://d34r8q7sht0t9k.cloudfront.net/tag.js"></script><script src="https://connect.facebook.net/signals/config/9554678841295205?v=2.9.248&amp;r=stable&amp;domain=www.perplexity.ai&amp;hme=17590b9a2e1b26755cdc9ecb401f9f46bca979d3ccce95d786db0936167af731&amp;ex_m=94%2C156%2C134%2C20%2C67%2C68%2C127%2C63%2C43%2C128%2C72%2C62%2C10%2C141%2C80%2C15%2C93%2C28%2C122%2C115%2C70%2C73%2C121%2C138%2C102%2C143%2C7%2C3%2C4%2C6%2C5%2C2%2C81%2C91%2C144%2C224%2C167%2C57%2C226%2C227%2C50%2C183%2C27%2C69%2C232%2C231%2C170%2C30%2C56%2C9%2C59%2C87%2C88%2C89%2C95%2C118%2C29%2C26%2C120%2C117%2C116%2C135%2C71%2C137%2C136%2C45%2C55%2C111%2C14%2C140%2C40%2C213%2C215%2C177%2C23%2C24%2C25%2C17%2C18%2C39%2C35%2C37%2C36%2C76%2C82%2C86%2C100%2C126%2C129%2C41%2C101%2C21%2C19%2C107%2C64%2C33%2C131%2C130%2C132%2C123%2C22%2C32%2C54%2C99%2C139%2C65%2C16%2C133%2C104%2C31%2C193%2C163%2C284%2C211%2C154%2C196%2C189%2C164%2C97%2C119%2C75%2C109%2C49%2C44%2C103%2C42%2C108%2C114%2C53%2C60%2C113%2C48%2C51%2C47%2C90%2C142%2C0%2C112%2C13%2C110%2C11%2C1%2C52%2C83%2C58%2C61%2C106%2C79%2C78%2C145%2C146%2C84%2C85%2C8%2C92%2C46%2C124%2C77%2C74%2C66%2C105%2C96%2C38%2C125%2C34%2C98%2C12%2C147" async=""></script><script async="" src="https://connect.facebook.net/en_US/fbevents.js"></script><script src="https://www.redditstatic.com/ads/pixel.js" async=""></script><script>!function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var t=function t(r,n){function o(t,o,c){if(!(typeof document>"u")){"number"==typeof(c=e({},n,c)).expires&&(c.expires=new Date(Date.now()+864e5*c.expires)),c.expires&&(c.expires=c.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in c)c[a]&&(i+="; "+a,!0!==c[a]&&(i+="="+c[a].split(";")[0]));return document.cookie=t+"="+r.write(o,t)+i}}return Object.create({set:o,get:function(e){if(!(typeof document>"u"||arguments.length&&!e)){for(var t=document.cookie?document.cookie.split("; "):[],n={},o=0;o<t.length;o++){var c=t[o].split("="),i=c.slice(1).join("=");try{var a=decodeURIComponent(c[0]);if(n[a]=r.read(i,a),e===a)break}catch{}}return e?n[e]:n}},remove:function(t,r){o(t,"",e({},r,{expires:-1}))},withAttributes:function(r){return t(this.converter,e({},this.attributes,r))},withConverter:function(r){return t(e({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(r)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const r="pplx.visitor-id",n="pplx.session-id";const o=10/1440;(function(){if(!document.documentElement.dataset.colorScheme){let e=t.get("colorScheme");e||(e=window.matchMedia?.("(prefers-color-scheme: dark)")?.matches?"dark":"light"),document.documentElement.setAttribute("data-color-scheme",e)}})(),function(){try{t.get(r)||t.set(r,crypto.randomUUID(),{expires:365})}catch{}try{t.get(n)||t.set(n,crypto.randomUUID(),{expires:o})}catch{}}()}()</script><title>исследуй лучшие практики и подходы по администратированию, оптимизации и...</title><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://www.perplexity.ai"><meta name="description" content="Perplexity is a free AI-powered answer engine that provides accurate, trusted, and real-time answers to any question."><meta property="og:title" content="Perplexity"><meta property="og:description" content="Perplexity is a free AI-powered answer engine that provides accurate, trusted, and real-time answers to any question."><meta property="og:url" content="https://www.perplexity.ai/"><meta property="og:site_name" content="Perplexity AI"><meta property="og:image" content="https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png"><meta property="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@perplexity_ai"><meta name="twitter:title" content="Perplexity"><meta name="twitter:description" content="Perplexity is a free AI-powered answer engine that provides accurate, trusted, and real-time answers to any question."><meta name="twitter:image" content="https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png"><script type="module" crossorigin="" src="https://pplx-next-static-public.perplexity.ai/_spa/assets/index.html-DfXrE_Ou.js"></script><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/vite-BvdIPCNX.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/vendors-BmAviU3y.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/platform-DQ8W6DEF.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/i18n-CZbmrKeS.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/icons-DhCFpgji.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/platform-components-BZIftxfL.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/react-query-DvpMGiqo.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/spa-shell-BfXJDsxE.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/bootstrap-CHeHZP2q.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/index-Bf2qc8Rt.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/DelimiterList-C6YjHA_3.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CloseButton-5VFfcwWq.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/proxy-Bt0ldiWJ.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/index-CvzOUhn9.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Modal-n2X5sth3.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/imageUtils-C8fjY9OP.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CitationFavicon-BAe8zE_V.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/fileUploadUtils-CD-ymFRq.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/LightboxImage-CRBhBv35.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Image-XJ35Ax9X.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useGetDefaultSearchModel-B2Y3MVmg.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Avatar-ChkJCcd0.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useSourceActivity-BRtlv3nK.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useSuggestedSources-CwtvLwYp.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/getSourceDescription-BOll7jPh.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Badge-C2wZB2Bi.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ScrollArea-Dx9niZ_D.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/MenuItem-Bn0Syt5r.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/index-fp4GAMPP.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useCueImpressionLimit-Z6Olyf8n.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SegmentedControlOption-DVVTdXtr.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useGoogleDrivePicker-g-hzxRZP.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/createStackedVisuals-BfKX4aoT.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/connectorDetails-C3srtNJe.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useConnectorDetails-BHqJYaQt.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SourcesMenu-B9e3bQ-F.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useDropboxPicker-Bk0DsFLX.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ConditionalWrapper-CxzgcBhz.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/constants-BjnKwBDH.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useGetSettingsRoute-C9RIrLqc.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useOAuthReferrer-DbIJkNpm.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/askInputMenu-Cn2TyN2A.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/IncognitoIcon-CxM7mUX6.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/objectWithoutPropertiesLoose-Cv5OCJ0e.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/react-textarea-autosize.browser.esm-tfWHmsB4.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/lexical-B-pWvlVw.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/FormError-n4wE2rV8.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Input-BZYN4jVb.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ResizableInputV2-CCkH0C2B.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SuggestDropdown-JSH8Q84Z.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/tasks-Cx07VhRP.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/shortcutQueries-CjQP5lLV.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useShortcutsTypeaheadQuery-m9ju765S.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useSuggestDropdownKeyDown-iCcDst18.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/lexicalNodeToQuery-B2nIRwj_.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useAskInput-DffIkWHX.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useModelMenuItems-Cc0Qkt4T.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SearchModelSelector-BxbDCwr5.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/historySearchParams-DDKzrE2v.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/AnimatedGradientBorderWrapper-D5vBCKUF.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/DropZone-2th1-rPk.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/AskInput-CnsUafCx.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/HomepageComponentsProvider-Bpyma9eP.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useHasMounted-PItcSWxF.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useSubmitHandlerWithSBS-BdkWXX6I.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useHomeAskInput-ulGEyrM4.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/shortcut-Wve8qbJj.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/spacesQueries-qR_3FWvZ.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useMentionTypeaheadOptions-B5ETuI69.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/referralQueries-tEHW2szh.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/enterpriseTiers-BSCDkfF5.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/sheerid-constants-RoI5I-is.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useUrlModalHandler-B1yLlbd4.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useAllowedFloatingUpsellPath-Id6PkpU1.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/LearnMoreButton-C26fMpnf.js"><link rel="modulepreload" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/home-BzwOPtGf.js"><link rel="stylesheet" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/spa-shell-rHLQs_ta.css"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/index-DAWIHVf8.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/react-spring_web.modern-BnJ0NA8G.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/DebugStreamSideEffects-Coo7EMDH.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/DebugDisplay-DGsV5J8_.js"><link rel="modulepreload" as="script" crossorigin="use-credentials" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/_restricted/restricted-feature-debug-Wf3BOFiq.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/DebugModeActivator-Blx-ryCS.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SidebarMenu-BCetHf5e.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SidebarNotifications-CrVIW7c1.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useAppNotificationsVariation-oHQGwLz1.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useTasksSettingsUiRedesignVariation-DfWAIlBl.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useTasksPriceAlertsUiRedesignVariation-UAMK7U5d.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SidebarGovBadge-BX3XU_U5.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CountryFlag-DrKfreUQ.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SidebarAccountMenu-CU3gCeeL.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SideBarBottomPopover-AjlLnk0U.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Username-DyXe9bGu.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/PersonalSearchSettingsMain-Cr01Vqqz.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useNewMemoryV2OverviewPageVariation-DJTo-JN-.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SettingsGroup-DFYbpQBS.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SettingsRow-CUBYECow.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/TabConfigs-8c1HKr5S.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SidebarUpgradeButton-CfqgdBdV.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SidebarDownloadButton-C7BbGCme.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/MentionsPlugin-BMryCRh1.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/AutoLinkPlugin-b11HYIlG.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/LinkPlugin-CeNmncmR.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/HomepageWidgets-BQLz5pJG.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/QueryPrimerHomepageWidget-CWm6MaIZ.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/queries-CrCY94Ok.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/LocationPermission-BsbQUbv2.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/homepageWidgetQueries-D3-MPeNO.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/AnimateHeight-ivWjOKTP.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SplashScreen-BpurxwDG.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Reviews-DqHnvd_T.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/LoginModalInner-Cs241R8T.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/test-ids-VnDwzMft.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/AppDownloadQRSkeleton-hYfAIIPK.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/title-BO6FgsTx.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/DocumentTitle-BS2B1rJf.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useSports-DzILH4wZ.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/event-kNLzTU3r.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useSportsEvent-DFcjKyaF.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/consts-CQC6WeYS.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/event-BDdMFqIJ.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/team-B4Rb98KO.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/usePasteShortcutQuery-BxpVOa5s.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useHotelData-oQ_L0A04.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/hotelQueries-Dq_FZFpa.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/routes-fxicNT76.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/usePriceAlertQuery-BXlCAU-q.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/data-CsfKJbZ8.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/watchlistQueries-D5thMsqY.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ArticleUtils-CG6omRcz.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/tournament-BN9bqPPT.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/cleanPPLXActionLinks-C51qKX3V.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/FloatingComponents-n2-XH3ir.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/FloatingCardUpsell-CmbaDwMg.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/shared-DyaE0J7E.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useIsStudentReferralCampaignPromoEligible-ermYJtui.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/UpsellButton-BBmRfaik.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/InterfaceLanguageSelect-BMWEmIT8.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useIntercom-CcOb2tnT.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/notificationQueries-Bd5dPKZl.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/phoneNumberUtils-2CNvKPPc.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useGetUserIntercomHash-DSGfi88-.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/HomeSidebar-De15o8DZ.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useBookmarksQuery-_QWEY3OX.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useGetRecentItemsWithActiveStreams-CpPsD3Y6.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useRecentItemsQuery-DEc9P4uQ.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useGetActivelyStreamingThreads-DOeFWFgP.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/RecentItems-BPljI3sl.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/index-Be3T9KyQ.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/markdown-rSBK_Cxg.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useThreadMutations-FkxK9luF.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/search-component-CVFF5OHq.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/AfterInteractivePixels-DLLPPtkV.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useThreadHeaderActions-CLDmUpH0.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ThreadEntryContext-Bx40L0k6.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useEntryEvents-Bsjb_a1p.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/widgetGrouping-CoNMNWeN.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SearchPageProvider-V9XTBTu3.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Tabs-MYy3b6B8.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useScrollToListItem-BST-GaU-.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/scrollTo-BbpcqQyi.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ThreadInput-DtBQqUs5.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/mcpQueries-Ctf2c5rV.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useOaiRealtimeSettings-D7voktDg.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Shimmer-BOzb_nt4.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/index-BRLF0d9P.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/transform-CClh6nZX.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/index-5i6JcYhm.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/StepRenderer-DzCAJ_1H.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useScheduledTaskMutations-DT1WxZuJ.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/TimeInput-CMpqG84V.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/DateInput-BM5Uw8su.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Calendar-ONELnJid.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ResizableInput-Cl-Ax2Tw.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/NumberFlow-client-48rw3j0J-D_Ac5POC.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CitationBubble-lo4MvkkB.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CanonicalCard-BSPpDt9N.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/assistant-DcaUAbI4.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/emailUtils-_jxwJ1Ij.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CalendarUtils-DWatsf6L.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/DateTimeUtils-DX1NE0IM.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/calendarRecurrenceUtils-Du7KgXW9.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Select-CWUrzLTq.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ComboBox-s5ssVhos.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/copyUtils-DT1Hotnl.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/utils-C8sqxr69.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useDownloadS3FileAsset-DUYI5B1u.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CodeBlock-BkOE22Hq.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useEnterpriseAnalytics-NqlBltql.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useMcpAvailable-dq8GVneD.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useCometSystemPermissionsForServer-KE17-_Jm.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useCometFirstRequiredSystemPermission-4IQGNpFJ.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/YoutubeVideoPlayer-D01aiyND.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/index-WEsglMQY.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useAutomationConfiguration-BpXRh-ue.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/LogoIcon-e6PBLT3s.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SelectButton-2nmnC1ao.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/format-Bb34REDw.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/defaultLocale-Dt8Pf7TT.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useShouldCometOpenLinksInSidecar-DooedhEh.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/MemorySearchHistoryModal-BSgJZ9QT.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/isWebResultMemorySearchHistory-Bq9qBxot.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CitationHoverCard-CZ6j023S.js"><link rel="stylesheet" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/StepRenderer-BsDpYZHk.css"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/RadioCard-MCdUkILs.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useScrollBarSize-BbKD7BIW.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useTruncation-BuQBI6Zi.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useDownloadFile-RKan1cuP.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useCitations-Bdk0i6l6.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/WebResultHelper-ZePvItRN.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/UTCDate-X0j4GFGV.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/MarkdownRenderer-BDOlIXFm.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CitationDomainBubble-BKSBWK7_.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CitationNumberBubble-CVulTeuh.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CitationPile-VZ5nQYq9.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/index-CyjoRgnv.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useMoveCitationsToParagraphEnd-izmSG8C-.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/MarkdownResponse-CP6jAaxw.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/MarkdownStreamer-DidRFqAC.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/EntityGroupProvider-BQksd8v8.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/EntityItemGuidance-ICLc9b5Y.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ScrollToEntityProvider-nVklnWbE.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/DropDownModal-CY619K1g.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/EntityItemMerchantInfo-DW2E3BUx.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useGenerateShoppingReviewSummary-D8RYh-Gh.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/currencyUtils-C5W0iUMT.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/EntityItemSourcePile-D_8HEyKA.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CitationListModal-CX_Pyfoq.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Checkbox-B2xhWUat.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CitationCard-ktK2kv5T.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/TextBlockThrobber-BFtvmbHr.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SportsEventsWidget-D_iuyUqS.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/utils-D1BUSTxU.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Chart-Be8vzTmy.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Svg-DIVepp_8.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/color-BaOLqs0e.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/AreaClosed-CstFa1FZ.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/DotGrid-B1rsBbNF.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/LiveIndicator-TSvf0U14.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/TeamLogo-Cdj2sueC.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CanonicalSection-CgXfOqO4.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/TabBar-B0j-xK_e.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/fuse-DPyu62bB.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/PredictionMarketChart-DsATYyiG.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/FinanceStockHistoryPeriodUtils-BzHKHVxG.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CanonicalLink-CDH3mOiJ.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/country-BDa1My_v.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/FinancePriceChange-__IAMwVt.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/FinanceSymbolExchange-CTcb_7A_.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/FinanceMover-BQsf4RXc.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CanonicalSidebar-CcQmmf_9.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/FollowConfirmationToast-BnHIinuM.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useFollowEntity-Crguy4ZK.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/FinanceAddAlert-CwsENoiu.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/AutomationModal-eSkvhiKY.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SportsStandingsTable-DaX1ZBbY.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/IndvCompetitorWithFlag-Dgh6R-E3.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/TennisLaverCupSchedule-DQuyp4n1.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/TennisLineScores-DKQ5T5Rc.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Triangle-DKNUWFK-.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/WithMenu-JRzBn0r-.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/index-BE0cI5oi.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SportsWhatsHappening-CPLjxz6e.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/WhatsHappening-ixAII4rs.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CanonicalQuery-TIzWnXDj.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/WSCStoryById-D5RaVj-1.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/HeadshotImage-I61EVe0P.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/TournamentInfo-BhHzz5Sx.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/AvatarList-yQBPcjkw.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/TaskModal-ByIegjoJ.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useGetPreferMetric-TYi9owNh.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/shared-Vv5mx1X-.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/EntityItemRating-ghB6FQLf.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/PerplexityMap-D_5iwTHw.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/DollarRange-CGYjzbCM.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/PulsingDot-CcuQ84yU.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/mapbox-gl-75SY3CCa.js"><link rel="stylesheet" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/mapbox-gl-B9eh9OLo.css"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/PlaceInlineCard-DW9tETZI.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ImagePagedCarousel-BMKVFwX5.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/MapboxURLs-4yEd9e3N.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/hotelUtils-D5vGXuFe.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useHotelBookingEnabled-DXfEXOL0.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useSessionOrgUUID-BKvO8ju1.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useHotelLowestRates-7z1mw2yI.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/PrimitiveSourcesRow-Cn_RaEQ2.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useUpdateThreadAccess-BZG3tq3d.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useSetThreadAccess-CeYoVv3p.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SocialShareLinks-ByWepRqN.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useActiveThreadEntryIdxSafe-CnxxPM-W.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useAddToCollectionModal-DJrqv3X4.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useCollectionsQuery-DYPHqR_J.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ThreadOverflowDropdown-B69RRY-R.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/LibraryItemList-zdhTq99A.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useTimeAgoTranslations-BrYd6KUx.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/PerplexityEmoji-BAjJzzL_.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useSpacesPermissions-Cm1vc5Fz.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useExport-CU9fDOHj.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ConfirmationModal-DeocqlTa.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Shimmer-MQVtvpJ0.js"><script id="reddit-pixel-script" src="/pixel/reddit.js" async=""></script><script id="facebook-pixel-script" src="/pixel/meta.js" async=""></script><script id="podscribe-pixel-script" src="/pixel/podscribe.js" async=""></script><script id="amazon-twitch-pixel-script" src="/pixel/amazon.js" async=""></script><script id="google-tag-script" src="/pixel/google-tag.js" async=""></script><script id="x-pixel-script" src="/pixel/x.js" async=""></script><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ThreadEntryDebugTiming-CHXsuY5i.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Related-lZg7e_xR.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/RelatedPrompts-BuaOmWWn.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useInViewEffect-Cphmi50s.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/RelatedQueryList-w9FjAygG.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/index-Cw4TAFao.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/AnimatedWorkflowHeader-ByAG2J_n.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/index-DJJ4FRmf.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/katex-C8dCldO_.js"><link rel="stylesheet" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/katex-apyuGzJm.css"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SearchSuggestedRefiners-CRq3pcjo.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ProgressHeader-Dk3fuHrw.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ThreadContentResponse-BYyDMspv.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useCreateSetupIntentAndCustomerSession-DC8Qa9Te.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useStripeAppearance-C-tNF5v5.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/StructuredAnswerInlineBlock-DMuBSexf.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useVersioningChain-DIMecktr.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/GeneratedMediaLoader-DufnmLbW.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/VideoPlayer-yGdO7oZE.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useTrackGeneratedAssetView-CcPrdDmC.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ImageGallery-CN8GIlkZ.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ImageGallerySidebar-gJRVG4TR.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ImageGenerationUtils-DBesDuxt.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/Gallery-D7dcnYym.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useFailedImagesStore-BdFIkbs9.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CardCarouselV2-BKpp5Xxk.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/embla-carousel-react.esm-Q4RJjCdF.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useShoppingWidget-BdCS5v-y.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/shared-DZ4qNGi4.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/shoppingQueries-BvaOO7l1.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CarouselPrimitives-BdbXQ902.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/TimeAgoTooltip-chY0r4mB.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/EntityChipWithData-SnCeBoZP.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useStripePromise-SLveAge8.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/react-stripe.esm-3ZvPUvN5.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ThreadEntryFooter-DE1gvOLy.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ReportModal-DEk-brHX.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ArticleSmallCitationPile-BC9U47J9.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/CopyOutputButton-D51oVyzG.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/core-Q31LJaVv.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/markup-BONeskWm.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/css-CF9HHZb0.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/clike-B5tY_8Hg.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/javascript-D8vYUPHd.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/sql-C_4TwDNQ.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/sql-CJATM1Qp.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/bash-C7C3WpJ9.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/bash-CefCgV5_.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SideCanvasViewer-D9od_dCk.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/PDFViewerCore-BWU6m83o.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useStudyHubActivation-CHByZZfO.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/TextBlockSkeleton-D_LOOtvV.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/ImageDisplayAsset-DLT8zOwx.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SpacesSidebar-EqNsF6z4.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SidebarListLoader-DO3oVZtY.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/useSpaceTemplates-1OusNeVY.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/emoji-picker-react.esm-DMkxIiY9.js"><style type="text/css">.EmojiPickerReact button.epr-emoji{align-items:center;border-radius:8px;box-sizing:border-box;display:flex;height:var(--epr-emoji-fullsize);justify-content:center;max-height:var(--epr-emoji-fullsize);max-width:var(--epr-emoji-fullsize);overflow:hidden;position:relative;width:var(--epr-emoji-fullsize)}.EmojiPickerReact button.epr-emoji.epr-emoji-has-variations:after{border-bottom:4px solid var(--epr-emoji-variation-indicator-color);border-left:4px solid transparent;border-right:4px solid transparent;bottom:1px;content:"";display:block;height:0;position:absolute;right:0;transform:rotate(135deg);width:0;z-index:var(--epr-emoji-variations-indictator-z-index)}.EmojiPickerReact button.epr-emoji .epr-emoji-img{max-height:var(--epr-emoji-fullsize);max-width:var(--epr-emoji-fullsize);padding:var(--epr-emoji-padding)}.EmojiPickerReact button.epr-emoji .epr-emoji-native{padding:var(--epr-emoji-padding)}.EmojiPickerReact button.epr-emoji>*{align-self:center;display:block;justify-self:center}.EmojiPickerReact button.epr-emoji.epr-emoji-has-variations:hover:after{border-bottom:4px solid var(--epr-emoji-variation-indicator-color-hover)}.__EmojiPicker__.epr-emoji-img{font-size:0}.__EmojiPicker__.epr-emoji-native{align-self:center;font-family:Segoe UI Emoji,Segoe UI Symbol,Segoe UI,Apple Color Emoji,Twemoji Mozilla,Noto Color Emoji,Android Emoji,Times,Symbola,Aegyptus,Code2000,Code2001,Code2002,Musica,serif,LastResort;font-size:var(--epr-emoji-size);justify-self:center;letter-spacing:0;line-height:100%;position:relative;text-align:center}.EmojiPickerReact button.epr-emoji:hover>*{background-color:var(--epr-emoji-hover-color)}.EmojiPickerReact button.epr-emoji:focus>*{background-color:var(--epr-focus-bg-color)}</style><style type="text/css">.EmojiPickerReact li.epr-emoji-category>.epr-emoji-category-content{grid-gap:0;display:grid;grid-template-columns:repeat(auto-fill,var(--epr-emoji-fullsize));justify-content:space-between;margin:var(--epr-category-padding);position:relative}.EmojiPickerReact li.epr-emoji-category:not(:has(.epr-visible)){display:none}.EmojiPickerReact li.epr-emoji-category>.epr-emoji-category-label{align-items:center;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);background-color:var(--epr-category-label-bg-color);color:var(--epr-category-label-text-color);display:flex;font-weight:700;height:var(--epr-category-label-height);padding:var(--epr-category-label-padding);position:-webkit-sticky;position:sticky;text-transform:capitalize;top:0;width:100%;z-index:var(--epr-category-label-z-index)}</style><style type="text/css">.EmojiPickerReact ul.epr-emoji-list{list-style:none;margin:0;padding:0}</style><style type="text/css">.EmojiPickerReact .epr-emoji-variation-picker{align-items:center;background:var(--epr-emoji-variation-picker-bg-color);border:1px solid var(--epr-picker-border-color);border-radius:3px;box-shadow:0 2px 5px rgba(0,0,0,.2);display:flex;height:0;height:var(--epr-emoji-variation-picker-height);justify-content:space-around;left:15px;opacity:0;padding:5px;pointer-events:none;position:absolute;right:15px;top:0;top:-100%;transform:scale(.9);transition:transform .1s ease-out,opacity .2s ease-out;visibility:hidden;z-index:var(--epr-skin-variation-picker-z-index)}.EmojiPickerReact .epr-emoji-variation-picker.pointing-up{transform:scale(.9);transform-origin:center 0}.EmojiPickerReact .epr-emoji-variation-picker.visible{opacity:1;pointer-events:all;transform:scale(1);visibility:visible}.EmojiPickerReact .epr-emoji-variation-picker .EmojiPickerReact .epr-emoji-variation-picker button.epr-emoji:hover{background:none}.EmojiPickerReact .epr-emoji-variation-picker .epr-emoji-pointer{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='50' height='15' xml:space='preserve'%3E%3Cg stroke-miterlimit='10'%3E%3Cpath fill='%23FFF' stroke='%23E8E7E7' d='m1.86-.43 9.83 11.53c.59.69 1.56.69 2.14 0L23.66-.43'/%3E%3Cpath fill='%23010202' stroke='%23151617' d='m26.86-.43 9.83 11.53c.59.69 1.56.69 2.14 0L48.66-.43'/%3E%3C/g%3E%3C/svg%3E");background-position:0 0;background-repeat:no-repeat;background-size:50px 15px;content:"";height:15px;position:absolute;top:-10px;width:25px}.EmojiPickerReact.epr-dark-theme .epr-emoji-variation-picker .epr-emoji-pointer{background-position:-25px 0}.EmojiPickerReact .epr-emoji-variation-picker .epr-emoji-pointer{top:100%;transform:translateX(-18px)}.EmojiPickerReact .epr-emoji-variation-picker.pointing-up .epr-emoji-pointer{top:0;transform:rotate(180deg) translateY(100%) translateX(18px)}</style><style type="text/css">.EmojiPickerReact .epr-body{flex:1;overflow-x:hidden;overflow-y:scroll;position:relative}</style><style type="text/css">.EmojiPickerReact .Flex{display:flex}.EmojiPickerReact .Flex.FlexRow{flex-direction:row}.EmojiPickerReact .Flex.FlexColumn{flex-direction:column}</style><style type="text/css">.EmojiPickerReact .epr-preview{align-items:center;border-top:1px solid var(--epr-preview-border-color);height:var(--epr-preview-height);padding:0 var(--epr-horizontal-padding);position:relative;z-index:1;z-index:var(--epr-preview-z-index)}.EmojiPickerReact .epr-preview .epr-preview-emoji-label{color:var(--epr-preview-text-color);font-size:var(--epr-preview-text-size);padding:var(--epr-preview-text-padding);text-transform:capitalize}</style><style type="text/css">.EmojiPickerReact .epr-skin-tones{--epr-skin-tone-size:15px;align-items:center;display:flex;justify-content:flex-end;padding:10px 0;transition:all .3s ease-in-out}.EmojiPickerReact .epr-skin-tones.epr-vertical{align-items:flex-end;border:1px solid var(--epr-bg-color);border-radius:6px;flex-direction:column;padding:5px}.EmojiPickerReact .epr-skin-tones.epr-vertical.epr-open{-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background:var(--epr-skin-tone-picker-menu-color);border:1px solid var(--epr-picker-border-color)}.EmojiPickerReact .epr-skin-tone-select{height:var(--epr-skin-tone-size);position:relative;width:var(--epr-skin-tone-size)}.EmojiPickerReact .epr-skin-tones.epr-open .epr-tone{transition:transform .3s ease-in-out,opacity .3s ease-in-out}.EmojiPickerReact .epr-skin-tones:not(.epr-open) .epr-tone{opacity:0;z-index:0}.EmojiPickerReact .epr-skin-tones .epr-tone{border-radius:4px;box-shadow:0 0 0 0 var(--epr-active-skin-hover-color);cursor:pointer;display:block;height:var(--epr-skin-tone-size);position:absolute;right:0;transition:transform .3s ease-in-out,opacity .5s ease-in-out;width:var(--epr-skin-tone-size);z-index:1}.EmojiPickerReact .epr-skin-tones .epr-tone:hover{box-shadow:0 0 0 3px var(--epr-active-skin-hover-color)}.EmojiPickerReact .epr-skin-tones .epr-tone:focus{box-shadow:0 0 0 3px var(--epr-focus-bg-color)}.EmojiPickerReact .epr-skin-tones.epr-open .epr-skin-tone-select .epr-tone.epr-active:after{border:1px solid var(--epr-active-skin-tone-indicator-border-color);border-radius:5px;bottom:-2px;content:"";left:-2px;position:absolute;right:-2px;top:-2px}.EmojiPickerReact .epr-skin-tones .epr-tone.epr-active{opacity:1;z-index:1}.EmojiPickerReact .epr-skin-tones .epr-tone.epr-tone-neutral{background-color:#ffd225}.EmojiPickerReact .epr-skin-tones .epr-tone.epr-tone-1f3fb{background-color:#ffdfbd}.EmojiPickerReact .epr-skin-tones .epr-tone.epr-tone-1f3fc{background-color:#e9c197}.EmojiPickerReact .epr-skin-tones .epr-tone.epr-tone-1f3fd{background-color:#c88e62}.EmojiPickerReact .epr-skin-tones .epr-tone.epr-tone-1f3fe{background-color:#a86637}.EmojiPickerReact .epr-skin-tones .epr-tone.epr-tone-1f3ff{background-color:#60463a}</style><style type="text/css">.EmojiPickerReact .epr-category-nav{display:flex;flex-direction:row;justify-content:space-around;padding:var(--epr-header-padding)}.EmojiPickerReact .epr-category-nav>button.epr-cat-btn{background-size:calc(var(--epr-category-navigation-button-size)*10);display:inline-block;height:var(--epr-category-navigation-button-size);outline:none;position:relative;transition:opacity .2s ease-in-out;width:var(--epr-category-navigation-button-size)}.EmojiPickerReact .epr-category-nav>button.epr-cat-btn:focus:before{border:2px solid var(--epr-category-icon-active-color);border-radius:50%;bottom:-2px;content:"";left:-2px;position:absolute;right:-2px;top:-2px}aside.EmojiPickerReact.epr-main:has(input:not(:-moz-placeholder-shown)) .epr-category-nav{cursor:default;opacity:.3;pointer-events:none}aside.EmojiPickerReact.epr-main:has(input:not(:placeholder-shown)) .epr-category-nav{cursor:default;opacity:.3;pointer-events:none}.EmojiPickerReact.epr-search-active .epr-category-nav{cursor:default;opacity:.3;pointer-events:none}aside.EmojiPickerReact.epr-main:has(input:not(:-moz-placeholder-shown)) .epr-category-nav>button.epr-cat-btn:hover{background-position-y:var(--epr-category-navigation-button-size);opacity:1}aside.EmojiPickerReact.epr-main:has(input:not(:placeholder-shown)) .epr-category-nav>button.epr-cat-btn:hover{background-position-y:var(--epr-category-navigation-button-size);opacity:1}.EmojiPickerReact:not(.epr-search-active) .epr-category-nav>button.epr-cat-btn.epr-active,.EmojiPickerReact:not(.epr-search-active) .epr-category-nav>button.epr-cat-btn:hover{background-position-y:var(--epr-category-navigation-button-size);opacity:1}.EmojiPickerReact .epr-category-nav>button.epr-cat-btn{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='80' xml:space='preserve'%3E%3Cg fill='%233371B7' stroke='%233371B7' stroke-width='.1' stroke-miterlimit='10'%3E%3Cpath d='M12.8 29.5c.6 0 1.1-.5 1.1-1.1 0-.6-.5-1.2-1.1-1.2-.6 0-1.2.5-1.2 1.2 0 .6.6 1.1 1.2 1.1zm0-1.5c.2 0 .4.2.4.4s-.2.4-.4.4-.4-.2-.4-.4c0-.3.2-.4.4-.4z'/%3E%3Cpath d='M10 23c-3.8 0-7 3.1-7 7 0 3.8 3.1 7 7 7s7-3.1 7-7c0-3.8-3.2-7-7-7zm0 13.2c-3.4 0-6.2-2.8-6.2-6.2 0-3.4 2.8-6.2 6.2-6.2s6.2 2.8 6.2 6.2c0 3.4-2.8 6.2-6.2 6.2z'/%3E%3Cpath d='M14.6 31.2c-.1-.1-.2-.2-.3-.2H5.7c-.1 0-.2.1-.3.2-.1.1-.1.2 0 .4.7 2 2.5 3.3 4.6 3.3s3.9-1.3 4.6-3.3c.1-.1.1-.3 0-.4zM10 34.1c-1.6 0-3-.9-3.7-2.2h7.3c-.6 1.3-2 2.2-3.6 2.2zm-2.8-4.6c.6 0 1.2-.5 1.2-1.1 0-.6-.5-1.2-1.2-1.2-.6 0-1.1.5-1.1 1.2 0 .6.5 1.1 1.1 1.1zm0-1.5c.2 0 .4.2.4.4s-.2.4-.4.4-.4-.2-.4-.4c0-.3.2-.4.4-.4z'/%3E%3C/g%3E%3Cpath fill='none' stroke='%233371B7' d='M64.1 33.4h2.3c.2 0 .4.2.4.4v2.1c0 .2-.2.4-.4.4h-2.3c-.2 0-.4-.2-.4-.4v-2.1c0-.2.1-.4.4-.4zm9.4.1h2.4c.2 0 .4.2.4.4v2c0 .2-.2.4-.4.4h-2.4c-.2 0-.4-.2-.4-.4v-2c0-.3.2-.4.4-.4zm-9.8-5.1h12.6v5H63.7v-5z'/%3E%3Cpath fill='none' stroke='%233371B7' d='M65.5 23.6h8.9c1 0 1.9.8 1.9 1.9v3.1H63.7v-3.1c0-1 .8-1.9 1.8-1.9z'/%3E%3Cellipse fill='%233371B7' cx='66.2' cy='30.9' rx='.9' ry='1'/%3E%3Cellipse fill='%233371B7' cx='73.8' cy='30.9' rx='.9' ry='1'/%3E%3Cg fill='none' stroke='%233371B7'%3E%3Cpath d='M96.4 30c0 3.6-2.9 6.5-6.4 6.5s-6.4-2.9-6.4-6.5 2.9-6.5 6.4-6.5 6.4 2.9 6.4 6.5z'/%3E%3Cpath d='M96.3 28.6v.1c-.9.1-2.9.1-4.6-1.1-1.1-.8-2-1.7-2.6-2.5-.3-.4-.6-.8-.7-1-.1-.1-.1-.1-.1-.2.5-.1 1.2-.2 2-.1 1.2 0 2.5.3 3.5 1.1s1.7 1.8 2.1 2.8c.2.2.3.6.4.9zM84 32.2v-.1c.9-.2 2.9-.4 4.7.6 1.1.7 1.9 1.5 2.4 2.3.4.5.6 1 .7 1.3-.4.1-1 .2-1.7.3-1 0-2.1-.1-3.2-.8s-1.9-1.6-2.4-2.5c-.3-.5-.4-.8-.5-1.1z'/%3E%3C/g%3E%3Cg fill='none' stroke='%233371B7'%3E%3Cpath stroke-linecap='round' d='m116.3 26.8-1.4 2-.8-.8-.6-.6v.9l-.1 8.2h-6.8l-.1-8.2v-.9l-.6.6-.8.8-1.4-2 2.6-2.9c.1-.1.2-.1.3-.1h1.3l.4.7c.7 1.3 2.6 1.3 3.3-.1l.3-.6h1.2c.1 0 .2 0 .3.1l.3-.3-.3.3 2.9 2.9z'/%3E%3Cpath d='M110.1 27.7h2v.9c0 .4-.4.7-1 .7s-1-.3-1-.7v-.9z'/%3E%3C/g%3E%3Cpath d='M126.8 34.3c0 1.2-1 2.2-2.2 2.2s-2.2-1-2.2-2.2 1-2.2 2.2-2.2 2.2 1 2.2 2.2zm10.8 0c0 1.2-1 2.2-2.2 2.2-1.2 0-2.2-1-2.2-2.2s1-2.2 2.2-2.2c1.2 0 2.2 1 2.2 2.2zm-10.8-9.9v9.9m10.9-9.9v9.9m-10.9-10.8h10.8v2.7h-10.8v-2.7z' fill='none' stroke='%233371B7'/%3E%3Cg fill='%233371B7'%3E%3Cpath d='M170.8 23.1h-.8c-2.1 0-4 1-5.3 2.5h-.1l-.1-.1-1-1.2-.3 3.4 3.4.3-1.1-1.3-.1-.1.1-.1c1.1-1.5 3-2.3 5-2.1 3.2.3 5.5 3.1 5.2 6.3-.3 3-3.1 5.3-6.1 5.1-3.1-.2-5.4-2.9-5.3-6l-1.3-.1c-.2 3.8 2.6 7.1 6.3 7.4 3.9.3 7.3-2.6 7.6-6.5.3-3.8-2.5-7.1-6.1-7.5z'/%3E%3Cpath d='M170.3 27.4c0-.3-.3-.6-.6-.6s-.6.3-.6.6v3.2c0 .2.1.3.2.4.1.1.3.2.4.2h2.4c.4 0 .6-.3.6-.6 0-.4-.3-.6-.6-.6h-1.8v-2.6z'/%3E%3C/g%3E%3Cpath fill='none' stroke='%233371B7' d='M186.2 23.4h7.7c1.5 0 2.7 1.2 2.7 2.7v7.7c0 1.5-1.2 2.7-2.7 2.7h-7.7c-1.5 0-2.7-1.2-2.7-2.7v-7.7c-.1-1.5 1.2-2.7 2.7-2.7z'/%3E%3Ccircle fill='%233371B7' cx='186' cy='28.9' r='.7'/%3E%3Ccircle fill='%233371B7' cx='194' cy='26.7' r='.7'/%3E%3Cpath fill='none' stroke='%233371B7' stroke-linecap='round' d='m186 33.3.4-.3c.4-.3 1-.3 1.5-.1l1 .4c.5.2 1 .2 1.5-.1l.8-.5c.4-.3 1-.3 1.5-.1l1.8.8'/%3E%3Cpath fill='%233371B7' stroke='%233371B7' stroke-width='.25' stroke-miterlimit='10' d='M156 24.3c-.2-.1-.4-.1-.5 0 0 0-.2.1-.9.2-.7 0-2.4-.1-3.8-.6-.8-.3-1.7-.5-2.5-.5h-.5c-1.3 0-2.5.3-3.6 1-.2.1-.2.2-.2.4v11.6c0 .3.1.5.3.5.6 0 .5-.4.5-.6v-5.7c.7-.3 3.2-1.1 5.8-.1 1.6.6 3.5.7 4.3.7.8 0 1.3-.3 1.3-.3.2-.1.3-.2.3-.4v-5.7c-.3-.2-.4-.4-.5-.5zm-.4 5.9c-.1 0-.7.1-1 .1-.7 0-2.4-.1-3.8-.6-2.5-1-5-.5-6.2-.1v-4.9c.9-.5 2.2-.7 3.2-.7h.4c.7 0 1.5.2 2.2.4 1.6.6 3.5.7 4.3.7.2 0 .8 0 1-.1v5.2z'/%3E%3Cpath fill='none' stroke='%233371B7' d='M48.1 23.5h3.7c2.5 0 4.5 2 4.5 4.5 0 .5-.4.9-.9.9H44.5c-.5 0-.9-.4-.9-.9 0-2.5 2-4.5 4.5-4.5z'/%3E%3Cpath fill='none' stroke='%233371B7' stroke-linecap='round' d='M43.5 28.8c-.2.1-.5 1.2 0 1.5 1.4 1 8.5.8 11.3.6.8-.1 1.6-.4 1.7-1.2 0-.3-.1-.6-.6-.9'/%3E%3Cpath fill='none' stroke='%233371B7' stroke-linecap='round' d='m43.5 30.6-.2.4c-.2.5.2 1 .7.9.3-.1.5 0 .7.3l.1.2c.3.5 1 .6 1.5.2h0c.3-.2.7-.3 1-.2l.8.3c.4.2.8.1 1.2 0l.5-.2c.4-.2.9-.2 1.3 0l.5.2c.4.2.8.2 1.2 0l.2-.1c.3-.2.8-.2 1.1.1l.2.2c.3.3.8.2 1-.2l.1-.2c.1-.2 0-.3.2-.3.5 0 1.2-.3 1.1-.7l-.4-1.1'/%3E%3Cpath fill='none' stroke='%233371B7' stroke-linecap='round' d='M43.5 32.2c-.1.2-.3.8 0 1.1.3.4 3 1.1 6.4 1.1 2.2 0 4.6-.3 6-.6.5-.1.9-.5.8-.9 0-.2-.2-.5-.4-.7'/%3E%3Cpath fill='none' stroke='%233371B7' stroke-linecap='round' d='M43.5 33.3c0 .5.6 2.3 1.3 2.7 1.8.8 5.7.7 8.1.5 1.3-.1 2.5-.7 3.2-1.8.3-.5.5-1 .5-1.4'/%3E%3Cellipse fill='%233371B7' cx='51.6' cy='26.5' rx='.3' ry='.4'/%3E%3Cellipse fill='%233371B7' cx='53' cy='25' rx='.3' ry='.4'/%3E%3Cellipse fill='%233371B7' cx='53' cy='27.2' rx='.3' ry='.4'/%3E%3Cellipse fill='%233371B7' cx='54.3' cy='26.5' rx='.3' ry='.4'/%3E%3Cellipse fill='%233371B7' cx='50.9' cy='25' rx='.3' ry='.4'/%3E%3Cpath fill='none' stroke='%233371B7' d='M24.2 31v-7.6c.1.1.8.9 2.8 3.1 2.5-1.6 5.6-.7 6.9 0l2.4-3.1v7.1c0 1.2-.1 2.5-.9 3.4-1 1.2-2.7 2.5-5.3 2.5-2.9 0-4.5-1.5-5.3-2.9-.6-.6-.6-1.5-.6-2.5z'/%3E%3Cpath fill='none' stroke='%233371B7' stroke-linecap='round' d='m21.2 30 5.4 1.2m-5.4 2.9 5.4-1.2M38.8 30l-5.4 1.2m5.4 2.9-5.4-1.2'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' fill='%233371B7' d='m29.5 32.4-.5-.7c-.2-.3 0-.6.3-.6h1.4c.3 0 .5.4.3.6l-.7 1c-.7 1.2-2.6 1.1-3.1-.3l-.1-.2c-.1-.2 0-.4.2-.5s.4 0 .5.2l.1.2c.4.7 1.2.8 1.6.3z'/%3E%3Cpath fill='none' stroke='%233371B7' stroke-linecap='round' d='m32.4 32.1-.1.2c-.4 1-1.8 1.1-2.3.2'/%3E%3Ccircle fill='%233371B7' cx='27.6' cy='29.7' r='.7'/%3E%3Ccircle fill='%233371B7' cx='32.4' cy='29.7' r='.7'/%3E%3Cg fill='%23C0C0BF' stroke='%23C0C0BF' stroke-width='.1' stroke-miterlimit='10'%3E%3Cpath d='M12.8 49.5c.6 0 1.1-.5 1.1-1.1 0-.6-.5-1.2-1.1-1.2-.6 0-1.2.5-1.2 1.2 0 .6.6 1.1 1.2 1.1zm0-1.5c.2 0 .4.2.4.4s-.2.4-.4.4-.4-.2-.4-.4c0-.3.2-.4.4-.4zm1.8 3.2c-.1-.1-.2-.2-.3-.2H5.7c-.1 0-.2.1-.3.2-.1.1-.1.2 0 .4.7 2 2.5 3.3 4.6 3.3s3.9-1.3 4.6-3.3c.1-.1.1-.3 0-.4zM10 54.1c-1.6 0-3-.9-3.7-2.2h7.3c-.6 1.3-2 2.2-3.6 2.2zm-2.8-4.6c.6 0 1.2-.5 1.2-1.1 0-.6-.5-1.2-1.2-1.2-.6 0-1.1.5-1.1 1.2 0 .6.5 1.1 1.1 1.1zm0-1.5c.2 0 .4.2.4.4s-.2.4-.4.4-.4-.2-.4-.4c0-.3.2-.4.4-.4z'/%3E%3Cpath d='M10 43c-3.8 0-7 3.1-7 7 0 3.8 3.1 7 7 7s7-3.1 7-7c0-3.8-3.2-7-7-7zm0 13.2c-3.4 0-6.2-2.8-6.2-6.2 0-3.4 2.8-6.2 6.2-6.2s6.2 2.8 6.2 6.2c0 3.4-2.8 6.2-6.2 6.2z'/%3E%3C/g%3E%3Cpath fill='none' stroke='%23C0C0BF' d='M64.1 53.4h2.3c.2 0 .4.2.4.4v2.1c0 .2-.2.4-.4.4h-2.3c-.2 0-.4-.2-.4-.4v-2.1c0-.2.1-.4.4-.4zm9.4.1h2.4c.2 0 .4.2.4.4v2c0 .2-.2.4-.4.4h-2.4c-.2 0-.4-.2-.4-.4v-2c0-.3.2-.4.4-.4zm-9.8-5.1h12.6v5H63.7v-5z'/%3E%3Cpath fill='none' stroke='%23C0C0BF' d='M65.5 43.6h8.9c1 0 1.9.8 1.9 1.9v3.1H63.7v-3.1c0-1 .8-1.9 1.8-1.9z'/%3E%3Cellipse fill='%23C0C0BF' cx='66.2' cy='50.9' rx='.9' ry='1'/%3E%3Cellipse fill='%23C0C0BF' cx='73.8' cy='50.9' rx='.9' ry='1'/%3E%3Cg fill='none' stroke='%23C0C0BF'%3E%3Cpath d='M96.4 50c0 3.6-2.9 6.5-6.4 6.5s-6.4-2.9-6.4-6.5 2.9-6.5 6.4-6.5 6.4 2.9 6.4 6.5z'/%3E%3Cpath d='M96.3 48.6v.1c-.9.1-2.9.1-4.6-1.2-1.1-.8-2-1.7-2.6-2.5-.3-.4-.6-.8-.7-1-.1-.1-.1-.2-.1-.2.5-.1 1.2-.2 2-.2 1.2 0 2.5.3 3.5 1.1s1.7 1.8 2.1 2.8c.2.4.3.8.4 1.1zM84 52.2v-.1c.9-.2 2.9-.4 4.7.6 1.1.7 1.9 1.5 2.4 2.3.4.5.6 1 .7 1.3-.4.1-1 .2-1.7.3-1 0-2.1-.1-3.2-.8s-1.9-1.6-2.4-2.5c-.3-.5-.4-.8-.5-1.1z'/%3E%3C/g%3E%3Cg fill='none' stroke='%23C0C0BF'%3E%3Cpath stroke-linecap='round' d='m116.3 46.8-1.4 2-.8-.8-.6-.7v.9l-.1 8.2h-6.8l-.1-8.2v-.9l-.6.7-.8.8-1.4-2 2.6-2.9c.1-.1.2-.1.3-.1h1.3l.4.7c.7 1.3 2.6 1.3 3.3-.1l.3-.6h1.2c.1 0 .2 0 .3.1l.3-.3-.3.3 2.9 2.9z'/%3E%3Cpath d='M110.1 47.7h2v.9c0 .4-.4.7-1 .7s-1-.3-1-.7v-.9z'/%3E%3C/g%3E%3Cpath d='M126.8 54.3c0 1.2-1 2.2-2.2 2.2s-2.2-1-2.2-2.2 1-2.2 2.2-2.2 2.2 1 2.2 2.2zm10.8 0c0 1.2-1 2.2-2.2 2.2-1.2 0-2.2-1-2.2-2.2s1-2.2 2.2-2.2c1.2 0 2.2 1 2.2 2.2zm-10.8-9.9v9.9m10.9-9.9v9.9m-10.9-10.8h10.8v2.7h-10.8v-2.7z' fill='none' stroke='%23C0C0BF'/%3E%3Cg fill='%23C0C0BF'%3E%3Cpath d='M170.8 43.1h-.8c-2.1 0-4 1-5.3 2.5h-.1l-.1-.1-1-1.2-.3 3.4 3.4.3-1.1-1.3-.1-.1.1-.1c1.1-1.5 3-2.3 5-2.1 3.2.3 5.5 3.1 5.2 6.3-.3 3-3.1 5.3-6.1 5.1-3.1-.2-5.4-2.9-5.3-6l-1.3-.1c-.2 3.8 2.6 7.1 6.3 7.4 3.9.3 7.3-2.6 7.6-6.5.3-3.8-2.5-7.1-6.1-7.5z'/%3E%3Cpath d='M170.3 47.4c0-.3-.3-.6-.6-.6s-.6.3-.6.6v3.2c0 .2.1.3.2.4.1.1.3.2.4.2h2.4c.4 0 .6-.3.6-.6s-.3-.6-.6-.6h-1.8v-2.6z'/%3E%3C/g%3E%3Cpath fill='none' stroke='%23C0C0BF' d='M186.2 43.4h7.7c1.5 0 2.7 1.2 2.7 2.7v7.7c0 1.5-1.2 2.7-2.7 2.7h-7.7c-1.5 0-2.7-1.2-2.7-2.7v-7.7c-.1-1.4 1.2-2.7 2.7-2.7z'/%3E%3Ccircle fill='%23C0C0BF' cx='186' cy='48.9' r='.7'/%3E%3Ccircle fill='%23C0C0BF' cx='194' cy='46.7' r='.7'/%3E%3Cpath fill='none' stroke='%23C0C0BF' stroke-linecap='round' d='m186 53.3.4-.3c.4-.3 1-.3 1.5-.1l1 .4c.5.2 1 .2 1.5-.1l.8-.5c.4-.3 1-.3 1.5-.1l1.8.8'/%3E%3Cpath fill='%23C0C0BF' stroke='%23C0C0BF' stroke-width='.25' stroke-miterlimit='10' d='M156 44.3c-.2-.1-.4-.1-.5 0 0 0-.2.1-.9.2-.7 0-2.4-.1-3.8-.6-.8-.3-1.7-.5-2.5-.5h-.5c-1.3 0-2.5.3-3.6 1-.2.1-.2.2-.2.4v11.6c0 .3.1.5.3.5.6 0 .5-.4.5-.6v-5.7c.7-.3 3.2-1.1 5.8-.1 1.6.6 3.5.7 4.3.7.8 0 1.3-.3 1.3-.3.2-.1.3-.2.3-.4v-5.7c-.3-.2-.4-.4-.5-.5zm-.4 5.9c-.1 0-.7.1-1 .1-.7 0-2.4-.1-3.8-.6-2.5-1-5-.5-6.2-.1v-4.9c.9-.5 2.2-.7 3.2-.7h.4c.7 0 1.5.2 2.2.4 1.6.6 3.5.7 4.3.7.2 0 .8 0 1-.1v5.2z'/%3E%3Cpath fill='none' stroke='%23C0C0BF' d='M48.1 43.5h3.7c2.5 0 4.5 2 4.5 4.5 0 .5-.4.9-.9.9H44.5c-.5 0-.9-.4-.9-.9 0-2.5 2-4.5 4.5-4.5z'/%3E%3Cpath fill='none' stroke='%23C0C0BF' stroke-linecap='round' d='M43.5 48.8c-.2.1-.5 1.2 0 1.5 1.4 1 8.5.8 11.3.6.8-.1 1.6-.4 1.7-1.2 0-.3-.1-.6-.6-.9'/%3E%3Cpath fill='none' stroke='%23C0C0BF' stroke-linecap='round' d='m43.5 50.6-.2.4c-.2.5.2 1 .7.9.3-.1.5 0 .7.3l.1.2c.3.5 1 .6 1.5.2h0c.3-.2.7-.3 1-.2l.8.3c.4.2.8.1 1.2 0l.5-.2c.4-.2.9-.2 1.3 0l.5.2c.4.2.8.2 1.2 0l.2-.1c.3-.2.8-.2 1.1.1l.2.2c.3.3.8.2 1-.2l.1-.2c.1-.2 0-.3.2-.3.5 0 1.2-.3 1.1-.7l-.4-1.1'/%3E%3Cpath fill='none' stroke='%23C0C0BF' stroke-linecap='round' d='M43.5 52.2c-.1.2-.3.8 0 1.1.3.4 3 1.1 6.4 1.1 2.2 0 4.6-.3 6-.6.5-.1.9-.5.8-.9 0-.2-.2-.5-.4-.7'/%3E%3Cpath fill='none' stroke='%23C0C0BF' stroke-linecap='round' d='M43.5 53.3c0 .5.6 2.3 1.3 2.7 1.8.8 5.7.7 8.1.5 1.3-.1 2.5-.7 3.2-1.8.3-.5.5-1 .5-1.4'/%3E%3Cellipse fill='%23C0C0BF' cx='51.6' cy='46.5' rx='.3' ry='.4'/%3E%3Cellipse fill='%23C0C0BF' cx='53' cy='45' rx='.3' ry='.4'/%3E%3Cellipse fill='%23C0C0BF' cx='53' cy='47.2' rx='.3' ry='.4'/%3E%3Cellipse fill='%23C0C0BF' cx='54.3' cy='46.5' rx='.3' ry='.4'/%3E%3Cellipse fill='%23C0C0BF' cx='50.9' cy='45' rx='.3' ry='.4'/%3E%3Cpath fill='none' stroke='%23C0C0BF' d='M24.2 51v-7.6c.1.1.8.9 2.8 3.1 2.5-1.7 5.6-.7 6.9 0l2.4-3.1v7.1c0 1.2-.1 2.5-.9 3.4-1 1.2-2.7 2.5-5.3 2.5-2.9 0-4.5-1.5-5.3-2.9-.6-.6-.6-1.5-.6-2.5z'/%3E%3Cpath fill='none' stroke='%23C0C0BF' stroke-linecap='round' d='m21.2 50 5.4 1.2m-5.4 2.9 5.4-1.2M38.8 50l-5.4 1.2m5.4 2.9-5.4-1.2'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' fill='%23C0C0BF' d='m29.5 52.4-.5-.7c-.2-.3 0-.6.3-.6h1.4c.3 0 .5.4.3.6l-.7 1c-.7 1.2-2.6 1.1-3.1-.3l-.1-.2c-.1-.2 0-.4.2-.5s.4 0 .5.2l.1.2c.4.7 1.2.8 1.6.3z'/%3E%3Cpath fill='none' stroke='%23C0C0BF' stroke-linecap='round' d='m32.4 52.1-.1.2c-.4 1-1.8 1.1-2.3.2'/%3E%3Ccircle fill='%23C0C0BF' cx='27.6' cy='49.7' r='.7'/%3E%3Ccircle fill='%23C0C0BF' cx='32.4' cy='49.7' r='.7'/%3E%3Cg fill='%236AA9DD' stroke='%236AA9DD' stroke-width='.1' stroke-miterlimit='10'%3E%3Cpath d='M14.6 71.2c-.1-.1-.2-.2-.3-.2H5.7c-.1 0-.2.1-.3.2-.1.1-.1.2 0 .4.7 2 2.5 3.3 4.6 3.3s3.9-1.3 4.6-3.3c.1-.1.1-.3 0-.4zM10 74.1c-1.6 0-3-.9-3.7-2.2h7.3c-.6 1.3-2 2.2-3.6 2.2zm2.8-4.6c.6 0 1.1-.5 1.1-1.1 0-.6-.5-1.2-1.1-1.2-.6 0-1.2.5-1.2 1.2 0 .6.6 1.1 1.2 1.1zm0-1.5c.2 0 .4.2.4.4s-.2.4-.4.4-.4-.2-.4-.4c0-.3.2-.4.4-.4zm-5.6 1.5c.6 0 1.2-.5 1.2-1.1 0-.6-.5-1.2-1.2-1.2-.6 0-1.1.5-1.1 1.2 0 .6.5 1.1 1.1 1.1zm0-1.5c.2 0 .4.2.4.4s-.2.4-.4.4-.4-.2-.4-.4c0-.3.2-.4.4-.4z'/%3E%3Cpath d='M10 63c-3.8 0-7 3.1-7 7 0 3.8 3.1 7 7 7s7-3.1 7-7c0-3.8-3.2-7-7-7zm0 13.2c-3.4 0-6.2-2.8-6.2-6.2 0-3.4 2.8-6.2 6.2-6.2s6.2 2.8 6.2 6.2c0 3.4-2.8 6.2-6.2 6.2z'/%3E%3C/g%3E%3Cpath fill='none' stroke='%236AA9DD' d='M64.1 73.4h2.3c.2 0 .4.2.4.4v2.1c0 .2-.2.4-.4.4h-2.3c-.2 0-.4-.2-.4-.4v-2.1c0-.2.1-.4.4-.4zm9.4.1h2.4c.2 0 .4.2.4.4V76c0 .2-.2.4-.4.4h-2.4c-.2 0-.4-.2-.4-.4v-2.1c0-.3.2-.4.4-.4zm-9.8-5.1h12.6v5H63.7v-5z'/%3E%3Cpath fill='none' stroke='%236AA9DD' d='M65.5 63.6h8.9c1 0 1.9.8 1.9 1.9v3.1H63.7v-3.1c0-1 .8-1.9 1.8-1.9z'/%3E%3Ccircle fill='%236AA9DD' cx='66.2' cy='70.9' r='.9'/%3E%3Ccircle fill='%236AA9DD' cx='73.8' cy='70.9' r='.9'/%3E%3Cg fill='none' stroke='%236AA9DD'%3E%3Cpath d='M96.4 70c0 3.6-2.9 6.5-6.4 6.5s-6.4-2.9-6.4-6.5 2.9-6.5 6.4-6.5 6.4 2.9 6.4 6.5z'/%3E%3Cpath d='M96.3 68.6v.1c-.9.1-2.9.1-4.6-1.2-1.1-.8-2-1.7-2.6-2.5-.3-.4-.6-.8-.7-1.1-.1-.1-.1-.2-.1-.2.5-.1 1.2-.2 2-.2 1.2 0 2.5.3 3.5 1.1s1.7 1.8 2.1 2.8c.2.5.3.9.4 1.2zM84 72.2v-.1c.9-.2 2.9-.4 4.7.6 1.1.7 1.9 1.5 2.4 2.3.4.5.6 1 .7 1.3-.4.1-1 .2-1.7.3-1 0-2.1-.1-3.2-.8s-1.9-1.6-2.4-2.5c-.3-.5-.4-.9-.5-1.1z'/%3E%3C/g%3E%3Cg fill='none' stroke='%236AA9DD'%3E%3Cpath stroke-linecap='round' d='m116.3 66.8-1.4 2-.8-.8-.6-.7v.9l-.1 8.2h-6.8l-.1-8.2v-.9l-.6.7-.8.8-1.4-2 2.6-2.9c.1-.1.2-.1.3-.1h1.3l.4.7c.7 1.3 2.6 1.3 3.3-.1l.3-.6h1.2c.1 0 .2 0 .3.1l.3-.3-.3.3 2.9 2.9z'/%3E%3Cpath d='M110.1 67.7h2v.9c0 .4-.4.7-1 .7s-1-.3-1-.7v-.9z'/%3E%3C/g%3E%3Cpath d='M126.8 74.3c0 1.2-1 2.2-2.2 2.2s-2.2-1-2.2-2.2 1-2.2 2.2-2.2 2.2 1 2.2 2.2zm10.8 0c0 1.2-1 2.2-2.2 2.2-1.2 0-2.2-1-2.2-2.2s1-2.2 2.2-2.2c1.2 0 2.2 1 2.2 2.2zm-10.8-9.9v9.9m10.9-9.9v9.9m-10.9-10.8h10.8v2.7h-10.8v-2.7z' fill='none' stroke='%236AA9DD'/%3E%3Cg fill='%236AA9DD'%3E%3Cpath d='M170.8 63.1h-.8c-2.1 0-4 1-5.3 2.5h-.1l-.1-.1-1-1.2-.3 3.4 3.4.3-1.1-1.3-.1-.1.1-.1c1.1-1.4 3-2.3 5-2.1 3.2.3 5.5 3.1 5.2 6.3-.3 3-3.1 5.3-6.1 5.1-3.1-.2-5.4-2.9-5.3-6l-1.3-.1c-.2 3.8 2.6 7.1 6.3 7.4 3.9.3 7.3-2.6 7.6-6.5.3-3.8-2.5-7.1-6.1-7.5z'/%3E%3Cpath d='M170.3 67.4c0-.3-.3-.6-.6-.6s-.6.3-.6.6v3.2c0 .2.1.3.2.4.1.1.3.2.4.2h2.4c.4 0 .6-.3.6-.6s-.3-.6-.7-.6h-1.8v-.2l.1-2.4z'/%3E%3C/g%3E%3Cpath fill='none' stroke='%236AA9DD' d='M186.2 63.4h7.7c1.5 0 2.7 1.2 2.7 2.7v7.7c0 1.5-1.2 2.7-2.7 2.7h-7.7c-1.5 0-2.7-1.2-2.7-2.7v-7.7c-.1-1.4 1.2-2.7 2.7-2.7z'/%3E%3Ccircle fill='%236AA9DD' cx='186' cy='68.9' r='.7'/%3E%3Ccircle fill='%236AA9DD' cx='194' cy='66.7' r='.7'/%3E%3Cpath fill='none' stroke='%236AA9DD' stroke-linecap='round' d='m186 73.3.4-.3c.4-.3 1-.3 1.5-.1l1 .4c.5.2 1 .2 1.5-.1l.8-.5c.4-.3 1-.3 1.5-.1l1.8.8'/%3E%3Cpath fill='%236AA9DD' stroke='%236AA9DD' stroke-width='.25' stroke-miterlimit='10' d='M156 64.3c-.2-.1-.4-.1-.5 0 0 0-.2.1-.9.2-.7 0-2.4-.1-3.8-.6-.8-.3-1.7-.5-2.5-.5h-.5c-1.3 0-2.5.3-3.6 1-.2.1-.2.2-.2.4v11.6c0 .3.1.5.3.5.6 0 .5-.4.5-.6v-5.7c.7-.3 3.2-1.1 5.8-.1 1.6.6 3.5.7 4.3.7.8 0 1.3-.3 1.3-.3.2-.1.3-.2.3-.4v-5.7c-.3-.2-.4-.4-.5-.5zm-.4 5.9c-.1 0-.7.1-1 .1-.7 0-2.4-.1-3.8-.6-2.5-1-5-.5-6.2-.1v-4.9c.9-.5 2.2-.7 3.2-.7h.4c.7 0 1.5.2 2.2.4 1.6.6 3.5.7 4.3.7.2 0 .8 0 1-.1v5.2z'/%3E%3Cpath fill='none' stroke='%236AA9DD' d='M48.1 63.5h3.7c2.5 0 4.5 2 4.5 4.5 0 .5-.4.9-.9.9H44.5c-.5 0-.9-.4-.9-.9 0-2.5 2-4.5 4.5-4.5z'/%3E%3Cpath fill='none' stroke='%236AA9DD' stroke-linecap='round' d='M43.5 68.8c-.2.1-.5 1.2 0 1.5 1.4.9 8.5.8 11.3.6.8-.1 1.6-.4 1.7-1.2 0-.3-.1-.6-.6-.9'/%3E%3Cpath fill='none' stroke='%236AA9DD' stroke-linecap='round' d='m43.5 70.6-.2.4c-.2.5.2 1 .7.9.3-.1.5.1.7.3l.1.2c.3.5 1 .6 1.5.2h0c.3-.2.7-.3 1-.2l.8.3c.4.2.8.1 1.2 0l.5-.2c.4-.2.9-.2 1.3 0l.5.2c.4.2.8.2 1.2-.1l.2-.1c.3-.2.8-.2 1.1.1l.2.2c.3.3.8.2 1-.2l.1-.2c.1-.2 0-.3.2-.3.5 0 1.2-.3 1.1-.7l-.4-1.1'/%3E%3Cpath fill='none' stroke='%236AA9DD' stroke-linecap='round' d='M43.5 72.2c-.1.2-.3.8 0 1.1.3.4 3 1.1 6.4 1.1 2.2 0 4.6-.3 6-.6.5-.1.9-.4.8-.9 0-.2-.2-.5-.4-.7'/%3E%3Cpath fill='none' stroke='%236AA9DD' stroke-linecap='round' d='M43.5 73.3c0 .5.6 2.3 1.3 2.7 1.8.8 5.7.7 8.1.5 1.3-.1 2.5-.7 3.2-1.8.3-.5.5-1 .5-1.4'/%3E%3Cellipse fill='%236AA9DD' cx='51.6' cy='66.5' rx='.3' ry='.4'/%3E%3Cellipse fill='%236AA9DD' cx='53' cy='65' rx='.3' ry='.4'/%3E%3Cellipse fill='%236AA9DD' cx='53' cy='67.2' rx='.3' ry='.4'/%3E%3Cellipse fill='%236AA9DD' cx='54.3' cy='66.5' rx='.3' ry='.4'/%3E%3Cellipse fill='%236AA9DD' cx='50.9' cy='65' rx='.3' ry='.4'/%3E%3Cpath fill='none' stroke='%236AA9DD' d='M24.2 71v-7.6c.1.1.8.9 2.8 3.1 2.5-1.7 5.6-.7 6.9 0l2.4-3.1v7.1c0 1.2-.1 2.5-.9 3.4-1 1.2-2.7 2.5-5.3 2.5-2.9 0-4.5-1.5-5.3-2.9-.6-.6-.6-1.5-.6-2.5z'/%3E%3Cpath fill='none' stroke='%236AA9DD' stroke-linecap='round' d='m21.2 70.1 5.4 1.2m-5.4 2.8 5.4-1.2m12.2-2.8-5.4 1.2m5.4 2.8-5.4-1.2'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' fill='%236AA9DD' d='m29.5 72.4-.5-.7c-.2-.3 0-.6.3-.6h1.4c.3 0 .5.4.3.6l-.7 1c-.7 1.2-2.6 1.1-3.1-.3l-.1-.2c-.1-.2 0-.4.2-.5.2-.1.4 0 .5.2l.1.2c.4.7 1.2.8 1.6.3z'/%3E%3Cpath fill='none' stroke='%236AA9DD' stroke-linecap='round' d='m32.4 72.1-.1.2c-.4 1-1.8 1.1-2.3.2'/%3E%3Ccircle fill='%236AA9DD' cx='27.6' cy='69.7' r='.7'/%3E%3Ccircle fill='%236AA9DD' cx='32.4' cy='69.7' r='.7'/%3E%3Cg fill='%23868686' stroke='%23868686' stroke-width='.1' stroke-miterlimit='10'%3E%3Cpath d='M12.8 9.5c.6 0 1.1-.5 1.1-1.2 0-.6-.5-1.1-1.1-1.1-.6 0-1.2.5-1.2 1.1s.6 1.2 1.2 1.2zm0-1.6c.2 0 .4.2.4.4s-.2.4-.4.4-.4-.2-.4-.4.2-.4.4-.4zM7.2 9.5c.6 0 1.2-.5 1.2-1.2 0-.6-.5-1.1-1.2-1.1-.6 0-1.1.5-1.1 1.1s.5 1.2 1.1 1.2zm0-1.6c.2 0 .4.2.4.4s-.2.4-.4.4-.4-.2-.4-.4.2-.4.4-.4zm7.4 3.3c-.1-.1-.2-.2-.3-.2H5.7c-.1 0-.2.1-.3.2-.1.1-.1.2 0 .4.7 2 2.5 3.3 4.6 3.3s3.9-1.3 4.6-3.3c.1-.2.1-.3 0-.4zM10 14.1c-1.6 0-3-.9-3.7-2.2h7.3c-.6 1.3-2 2.2-3.6 2.2z'/%3E%3Cpath d='M10 3c-3.8 0-7 3.1-7 7s3.1 7 7 7 7-3.1 7-7-3.2-7-7-7zm0 13.2c-3.4 0-6.2-2.8-6.2-6.2S6.6 3.8 10 3.8s6.2 2.8 6.2 6.2-2.8 6.2-6.2 6.2z'/%3E%3C/g%3E%3Cpath fill='none' stroke='%23868686' d='M64.1 13.4h2.3c.2 0 .4.2.4.4v2.1c0 .2-.2.4-.4.4h-2.3c-.2 0-.4-.2-.4-.4v-2.1c0-.2.1-.4.4-.4zm9.4 0h2.4c.2 0 .4.2.4.4v2.1c0 .2-.2.4-.4.4h-2.4c-.2 0-.4-.2-.4-.4v-2.1c0-.2.2-.4.4-.4zm-9.8-5h12.6v5H63.7v-5z'/%3E%3Cpath fill='none' stroke='%23868686' d='M65.5 3.6h8.9c1 0 1.9.8 1.9 1.9v3.1H63.7V5.5c0-1.1.8-1.9 1.8-1.9z'/%3E%3Ccircle fill='%23868686' cx='66.2' cy='10.9' r='.9'/%3E%3Ccircle fill='%23868686' cx='73.8' cy='10.9' r='.9'/%3E%3Cg fill='none' stroke='%23868686'%3E%3Cpath d='M96.4 10c0 3.6-2.9 6.5-6.4 6.5s-6.4-2.9-6.4-6.5 2.9-6.5 6.4-6.5 6.4 2.9 6.4 6.5z'/%3E%3Cpath d='M96.3 8.6v.1c-.9.1-2.9.1-4.6-1.2-1.1-.8-2-1.7-2.6-2.5-.3-.4-.6-.8-.7-1.1-.1-.1-.1-.2-.1-.2.5-.1 1.2-.2 2-.2 1.2 0 2.5.3 3.5 1.1s1.7 1.8 2.1 2.8c.2.5.3.9.4 1.2zM84 12.1V12c.9-.2 2.9-.4 4.7.6 1.1.6 1.9 1.5 2.4 2.3.4.5.6 1 .7 1.3-.4.1-1 .2-1.7.3-1 0-2.1-.1-3.2-.8-1.1-.6-1.9-1.6-2.4-2.5-.3-.4-.4-.8-.5-1.1z'/%3E%3C/g%3E%3Cg fill='none' stroke='%23868686'%3E%3Cpath stroke-linecap='round' d='m116.3 6.8-1.4 2-.8-.8-.6-.7v.9l-.1 8.2h-6.8l-.1-8.2v-.9l-.6.7-.8.8-1.4-2 2.6-2.9c.1-.1.2-.1.3-.1h1.3l.4.7c.7 1.3 2.6 1.3 3.3-.1l.3-.6h1.2c.1 0 .2 0 .3.1l.3-.3-.3.3 2.9 2.9z'/%3E%3Cpath d='M110.1 7.7h2v.9c0 .4-.4.7-1 .7s-1-.3-1-.7v-.9z'/%3E%3C/g%3E%3Cpath d='M126.8 14.3c0 1.2-1 2.2-2.2 2.2s-2.2-1-2.2-2.2 1-2.2 2.2-2.2 2.2 1 2.2 2.2zm10.8 0c0 1.2-1 2.2-2.2 2.2-1.2 0-2.2-1-2.2-2.2s1-2.2 2.2-2.2c1.2 0 2.2 1 2.2 2.2zm-10.8-9.9v9.9m10.9-9.9v9.9M126.8 3.5h10.8v2.7h-10.8V3.5z' fill='none' stroke='%23868686'/%3E%3Cg fill='%23868686'%3E%3Cpath d='M170.8 3.1h-.8c-2.1 0-4 1-5.3 2.5h-.1l-.1-.1-1-1.2-.3 3.4 3.4.3-1.1-1.3-.1-.1.1-.1c1.1-1.4 3-2.3 5-2.1 3.2.3 5.5 3.1 5.2 6.3-.3 3-3.1 5.3-6.1 5.1-3.1-.2-5.4-2.9-5.3-6l-1.3-.3c-.2 3.8 2.6 7.1 6.3 7.4 3.9.4 7.3-2.6 7.6-6.5.3-3.6-2.5-6.9-6.1-7.3z'/%3E%3Cpath d='M170.3 7.4c0-.3-.3-.6-.6-.6s-.7.3-.7.6v3.2c0 .2.1.3.2.4.1.1.3.2.4.2h2.4c.4 0 .6-.3.6-.6s-.3-.6-.6-.6h-1.8v-.2l.1-2.4z'/%3E%3C/g%3E%3Cpath fill='none' stroke='%23868686' d='M186.2 3.4h7.7c1.5 0 2.7 1.2 2.7 2.7v7.7c0 1.5-1.2 2.7-2.7 2.7h-7.7c-1.5 0-2.7-1.2-2.7-2.7V6.1c-.1-1.5 1.2-2.7 2.7-2.7z'/%3E%3Ccircle fill='%23868686' cx='186' cy='8.9' r='.7'/%3E%3Ccircle fill='%23868686' cx='194' cy='6.7' r='.7'/%3E%3Cpath fill='none' stroke='%23868686' stroke-linecap='round' d='m186 13.3.4-.3c.4-.3 1-.3 1.5-.1l1 .4c.5.2 1 .2 1.5-.1l.8-.5c.4-.3 1-.3 1.5-.1l1.8.8'/%3E%3Cpath fill='%23868686' stroke='%23868686' stroke-width='.25' stroke-miterlimit='10' d='M156 4.3c-.2-.1-.4-.1-.5 0 0 0-.2.1-.9.1s-2.4-.1-3.8-.6c-.8-.3-1.7-.5-2.5-.5h-.5c-1.3 0-2.5.3-3.6 1-.2.1-.2.2-.2.4v11.6c0 .3.1.5.3.5.6 0 .5-.4.5-.6v-5.7c.7-.3 3.2-1.1 5.8-.1 1.6.6 3.5.7 4.3.7.8 0 1.3-.3 1.3-.3.2-.1.3-.2.3-.4V4.7c-.3-.2-.4-.3-.5-.4zm-.4 5.9c-.1 0-.7.1-1 .1-.7 0-2.4-.1-3.8-.6-2.5-1-5-.5-6.2-.1V4.7c.9-.5 2.2-.7 3.2-.7h.4c.7 0 1.5.2 2.2.4 1.6.6 3.5.7 4.3.7.2 0 .8 0 1-.1v5.2z'/%3E%3Cpath fill='none' stroke='%23868686' d='M48.1 3.5h3.7c2.5 0 4.5 2 4.5 4.5 0 .5-.4.9-.9.9H44.5c-.5 0-.9-.4-.9-.9 0-2.5 2-4.5 4.5-4.5z'/%3E%3Cpath fill='none' stroke='%23868686' stroke-linecap='round' d='M43.5 8.7c-.2.1-.5 1.2 0 1.5 1.4.9 8.5.8 11.3.6.8-.1 1.6-.4 1.7-1.2 0-.3-.1-.6-.6-.9'/%3E%3Cpath fill='none' stroke='%23868686' stroke-linecap='round' d='m43.5 10.6-.2.4c-.2.5.2 1 .7.9.3-.1.5.1.7.3l.1.2c.3.5 1 .6 1.5.2h0c.3-.2.7-.3 1-.2l.8.3c.4.1.8.1 1.2 0l.5-.2c.4-.2.9-.2 1.3 0l.5.2c.4.2.8.1 1.2-.1l.2-.1c.3-.2.8-.1 1.1.1l.2.2c.3.3.8.2 1-.2l.1-.2c.1-.2 0-.3.2-.4.5 0 1.2-.3 1.1-.7l-.4-1.1'/%3E%3Cpath fill='none' stroke='%23868686' stroke-linecap='round' d='M43.5 12.1c-.1.2-.3.8 0 1.1.3.4 3 1.1 6.4 1.1 2.2 0 4.6-.3 6-.6.5-.1.9-.4.8-.9 0-.2-.2-.5-.4-.7'/%3E%3Cpath fill='none' stroke='%23868686' stroke-linecap='round' d='M43.5 13.3c0 .5.6 2.4 1.3 2.6 1.8.8 5.7.7 8.1.5 1.3-.1 2.5-.7 3.2-1.8.3-.5.5-1 .5-1.4'/%3E%3Cellipse fill='%23868686' cx='51.6' cy='6.5' rx='.3' ry='.4'/%3E%3Cellipse fill='%23868686' cx='53' cy='4.9' rx='.3' ry='.4'/%3E%3Cellipse fill='%23868686' cx='53' cy='7.2' rx='.3' ry='.4'/%3E%3Cellipse fill='%23868686' cx='54.3' cy='6.5' rx='.3' ry='.4'/%3E%3Cellipse fill='%23868686' cx='50.9' cy='4.9' rx='.3' ry='.4'/%3E%3Cpath fill='none' stroke='%23868686' d='M24.2 11V3.5c.1.1.8.9 2.8 3.1 2.5-1.7 5.6-.7 6.9 0l2.4-3.1v7.1c0 1.2-.1 2.5-.9 3.4-1 1.2-2.7 2.5-5.3 2.5-2.9 0-4.5-1.5-5.3-2.9-.6-.7-.6-1.7-.6-2.6z'/%3E%3Cpath fill='none' stroke='%23868686' stroke-linecap='round' d='m21.2 10 5.4 1.2m-5.4 2.9 5.4-1.2M38.8 10l-5.4 1.2m5.4 2.9-5.4-1.2'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' fill='%23868686' d='m29.5 12.4-.5-.7c-.2-.3 0-.6.3-.6h1.4c.3 0 .5.4.3.6l-.7 1c-.7 1.2-2.6 1.1-3.1-.3l-.1-.2c-.1-.2 0-.4.2-.5s.4 0 .5.2l.1.2c.4.6 1.2.8 1.6.3z'/%3E%3Cpath fill='none' stroke='%23868686' stroke-linecap='round' d='m32.4 12.1-.1.2c-.4 1-1.8 1.1-2.3.2'/%3E%3Ccircle fill='%23868686' cx='27.6' cy='9.7' r='.7'/%3E%3Ccircle fill='%23868686' cx='32.4' cy='9.7' r='.7'/%3E%3C/svg%3E");background-position:0 0}.EmojiPickerReact.epr-dark-theme .epr-category-nav>button.epr-cat-btn{background-position-y:calc(var(--epr-category-navigation-button-size)*2)}aside.EmojiPickerReact.epr-main:has(input:-moz-placeholder-shown) .epr-category-nav{background-position-y:calc(var(--epr-category-navigation-button-size)*3)}aside.EmojiPickerReact.epr-main:has(input:placeholder-shown) .epr-category-nav{background-position-y:calc(var(--epr-category-navigation-button-size)*3)}.EmojiPickerReact.epr-dark-theme:not(.epr-search-active) .epr-category-nav>button.epr-cat-btn.epr-active,.EmojiPickerReact.epr-dark-theme:not(.epr-search-active) .epr-category-nav>button.epr-cat-btn:hover{background-position-y:calc(var(--epr-category-navigation-button-size)*3)}.EmojiPickerReact button.epr-cat-btn.epr-icn-suggested{background-position-x:calc(var(--epr-category-navigation-button-size)*-8)}.EmojiPickerReact button.epr-cat-btn.epr-icn-activities{background-position-x:calc(var(--epr-category-navigation-button-size)*-4)}.EmojiPickerReact button.epr-cat-btn.epr-icn-animals_nature{background-position-x:calc(var(--epr-category-navigation-button-size)*-1)}.EmojiPickerReact button.epr-cat-btn.epr-icn-flags{background-position-x:calc(var(--epr-category-navigation-button-size)*-7)}.EmojiPickerReact button.epr-cat-btn.epr-icn-food_drink{background-position-x:calc(var(--epr-category-navigation-button-size)*-2)}.EmojiPickerReact button.epr-cat-btn.epr-icn-objects{background-position-x:calc(var(--epr-category-navigation-button-size)*-5)}.EmojiPickerReact button.epr-cat-btn.epr-icn-smileys_people{background-position-x:0}.EmojiPickerReact button.epr-cat-btn.epr-icn-symbols{background-position-x:calc(var(--epr-category-navigation-button-size)*-6)}.EmojiPickerReact button.epr-cat-btn.epr-icn-travel_places{background-position-x:calc(var(--epr-category-navigation-button-size)*-3)}</style><style type="text/css">.EmojiPickerReact .epr-header .epr-header-overlay{padding:var(--epr-header-padding);z-index:var(--epr-header-overlay-z-index)}</style><style type="text/css">.EmojiPickerReact .epr-search-container{display:block;flex:1;min-width:0}.EmojiPickerReact .epr-search-container input.epr-search{background-color:var(--epr-search-input-bg-color);border:1px solid var(--epr-search-input-bg-color);border-radius:var(--epr-search-input-border-radius);color:var(--epr-search-input-text-color);height:var(--epr-search-input-height);outline:none;padding:var(--epr-search-input-padding);transition:all .2s ease-in-out;width:100%}.EmojiPickerReact .epr-search-container button.epr-btn-clear-search .epr-icn-clear-search{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='80' xml:space='preserve'%3E%3Cpath fill='%23868686' d='M6.98 13.59a.53.53 0 0 0 .74 0l2.42-2.42 2.43 2.43a.53.53 0 0 0 .74 0c.21-.21.21-.54 0-.75l-2.43-2.43L13.32 8c.21-.21.21-.54 0-.75a.525.525 0 0 0-.75 0l-2.42 2.42-2.41-2.4a.525.525 0 0 0-.75 0c-.21.21-.21.54 0 .75l2.41 2.41-2.42 2.42c-.21.2-.21.54 0 .74z'/%3E%3Cpath fill='%23868686' d='M10.15 18.43c4.41 0 8-3.59 8-8s-3.59-8-8-8-8 3.59-8 8 3.59 8 8 8zm0-14.94c3.83 0 6.94 3.11 6.94 6.94 0 3.83-3.11 6.94-6.94 6.94-3.83 0-6.94-3.11-6.94-6.94 0-3.83 3.12-6.94 6.94-6.94z'/%3E%3Cpath fill='%233371B7' d='M6.98 33.59a.53.53 0 0 0 .74 0l2.42-2.42 2.43 2.43a.53.53 0 0 0 .74 0c.21-.21.21-.54 0-.75l-2.43-2.43L13.32 28c.21-.21.21-.54 0-.75a.525.525 0 0 0-.75 0l-2.42 2.42-2.41-2.41a.525.525 0 0 0-.75 0c-.21.21-.21.54 0 .75l2.41 2.41-2.42 2.42c-.21.21-.21.55 0 .75z'/%3E%3Cpath fill='%233371B7' d='M10.15 38.43c4.41 0 8-3.59 8-8s-3.59-8-8-8-8 3.59-8 8 3.59 8 8 8zm0-14.94c3.83 0 6.94 3.11 6.94 6.94 0 3.83-3.11 6.94-6.94 6.94-3.83 0-6.94-3.11-6.94-6.94 0-3.83 3.12-6.94 6.94-6.94z'/%3E%3Cpath fill='%23C0C0BF' d='M6.98 53.59a.53.53 0 0 0 .74 0l2.42-2.42 2.43 2.43a.53.53 0 0 0 .74 0c.21-.21.21-.54 0-.75l-2.43-2.43L13.32 48c.21-.21.21-.54 0-.75a.525.525 0 0 0-.75 0l-2.42 2.42-2.41-2.41a.525.525 0 0 0-.75 0c-.21.21-.21.54 0 .75l2.41 2.41-2.42 2.42c-.21.21-.21.55 0 .75z'/%3E%3Cpath fill='%23C0C0BF' d='M10.15 58.43c4.41 0 8-3.59 8-8s-3.59-8-8-8-8 3.59-8 8 3.59 8 8 8zm0-14.94c3.83 0 6.94 3.11 6.94 6.94 0 3.83-3.11 6.94-6.94 6.94-3.83 0-6.94-3.11-6.94-6.94 0-3.83 3.12-6.94 6.94-6.94z'/%3E%3Cpath fill='%236AA9DD' d='M6.98 73.59a.53.53 0 0 0 .74 0l2.42-2.42 2.43 2.43a.53.53 0 0 0 .74 0c.21-.21.21-.54 0-.75l-2.43-2.43L13.32 68c.21-.21.21-.54 0-.75a.525.525 0 0 0-.75 0l-2.42 2.42-2.41-2.41a.525.525 0 0 0-.75 0c-.21.21-.21.54 0 .75l2.41 2.41-2.42 2.42c-.21.21-.21.55 0 .75z'/%3E%3Cpath fill='%236AA9DD' d='M10.15 78.43c4.41 0 8-3.59 8-8s-3.59-8-8-8-8 3.59-8 8 3.59 8 8 8zm0-14.94c3.83 0 6.94 3.11 6.94 6.94 0 3.83-3.11 6.94-6.94 6.94-3.83 0-6.94-3.11-6.94-6.94 0-3.83 3.12-6.94 6.94-6.94z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-size:20px;height:20px;width:20px}.EmojiPickerReact .epr-search-container button.epr-btn-clear-search{align-items:center;border-radius:50%;display:flex;height:30px;justify-content:center;padding:0;position:absolute;right:var(--epr-search-bar-inner-padding);top:50%;transform:translateY(-50%);width:30px}.EmojiPickerReact .epr-search-container button.epr-btn-clear-search:focus .epr-icn-clear-search,.EmojiPickerReact .epr-search-container button.epr-btn-clear-search:hover .epr-icn-clear-search{background-position-y:-20px}.EmojiPickerReact .epr-search-container button.epr-btn-clear-search:focus,.EmojiPickerReact .epr-search-container button.epr-btn-clear-search:hover{background:var(--epr-hover-bg-color)}.EmojiPickerReact..epr-dark-theme .epr-search-container button.epr-btn-clear-search .epr-icn-clear-search{background-position-y:-40px}.EmojiPickerReact..epr-dark-theme .epr-search-container button.epr-btn-clear-search:hover .epr-icn-clear-search{background-position-y:-60px}.EmojiPickerReact .epr-search-container .epr-icn-search{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='40' xml:space='preserve'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' fill='%23868686' d='M12 8.81c0 2.08-1.68 3.76-3.76 3.76s-3.76-1.68-3.76-3.76 1.68-3.76 3.76-3.76S12 6.73 12 8.81zm-.77 3.91c-.83.64-1.87 1.01-2.99 1.01-2.72 0-4.92-2.2-4.92-4.92 0-2.72 2.2-4.92 4.92-4.92 2.72 0 4.92 2.2 4.92 4.92 0 1.13-.38 2.16-1.01 2.99l3.94 3.93c.25.25.25.66 0 .92-.25.25-.66.25-.92 0l-3.94-3.93z'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' fill='%23C0C0BF' d='M12 28.81c0 2.08-1.68 3.76-3.76 3.76s-3.76-1.68-3.76-3.76 1.68-3.76 3.76-3.76S12 26.73 12 28.81zm-.77 3.91c-.83.64-1.87 1.01-2.99 1.01-2.72 0-4.92-2.2-4.92-4.92 0-2.72 2.2-4.92 4.92-4.92 2.72 0 4.92 2.2 4.92 4.92 0 1.13-.38 2.16-1.01 2.99l3.94 3.93c.25.25.25.66 0 .92-.25.25-.66.25-.92 0l-3.94-3.93z'/%3E%3C/svg%3E");background-position:0 0;background-repeat:no-repeat;background-size:20px;content:"";height:20px;left:var(--epr-search-bar-inner-padding);position:absolute;top:50%;transform:translateY(-50%);width:20px}.EmojiPickerReact.epr-dark-theme .epr-search-container .epr-icn-search{background-position-y:-20px}.EmojiPickerReact .epr-search-container input.epr-search::-moz-placeholder{color:var(--epr-search-input-placeholder-color)}.EmojiPickerReact .epr-search-container input.epr-search::placeholder{color:var(--epr-search-input-placeholder-color)}.EmojiPickerReact .epr-search-container input.epr-search:focus{background-color:var(--epr-search-input-bg-color-active);border:1px solid var(--epr-search-border-color)}</style><style type="text/css">aside.EmojiPickerReact.epr-main{border-color:var(--epr-picker-border-color);border-radius:var(--epr-picker-border-radius);border-style:solid;border-width:1px;display:flex;flex-direction:column;position:relative}</style><style type="text/css">.EmojiPickerReact{--epr-highlight-color:#007aeb;--epr-hover-bg-color:#f1f8ff;--epr-focus-bg-color:#e0f0ff;--epr-text-color:#858585;--epr-search-input-bg-color:#f6f6f6;--epr-picker-border-color:#e7e7e7;--epr-bg-color:#fff;--epr-category-icon-active-color:#6aa8de;--epr-skin-tone-picker-menu-color:#ffffff95;--epr-horizontal-padding:10px;--epr-picker-border-radius:8px;--epr-search-border-color:var(--epr-highlight-color);--epr-header-padding:15px var(--epr-horizontal-padding);--epr-active-skin-tone-indicator-border-color:var(--epr-highlight-color);--epr-active-skin-hover-color:var(--epr-hover-bg-color);--epr-search-input-bg-color-active:var(--epr-search-input-bg-color);--epr-search-input-padding:0 30px;--epr-search-input-border-radius:8px;--epr-search-input-height:40px;--epr-search-input-text-color:var(--epr-text-color);--epr-search-input-placeholder-color:var(--epr-text-color);--epr-search-bar-inner-padding:var(--epr-horizontal-padding);--epr-category-navigation-button-size:30px;--epr-emoji-variation-picker-height:45px;--epr-emoji-variation-picker-bg-color:var(--epr-bg-color);--epr-preview-height:70px;--epr-preview-text-size:14px;--epr-preview-text-padding:0 var(--epr-horizontal-padding);--epr-preview-border-color:var(--epr-picker-border-color);--epr-preview-text-color:var(--epr-text-color);--epr-category-padding:0 var(--epr-horizontal-padding);--epr-category-label-bg-color:#ffffffe6;--epr-category-label-text-color:var(--epr-text-color);--epr-category-label-padding:0 var(--epr-horizontal-padding);--epr-category-label-height:40px;--epr-emoji-size:30px;--epr-emoji-padding:5px;--epr-emoji-fullsize:calc(var(--epr-emoji-size) + var(--epr-emoji-padding)*2);--epr-emoji-hover-color:var(--epr-hover-bg-color);--epr-emoji-variation-indicator-color:var(--epr-picker-border-color);--epr-emoji-variation-indicator-color-hover:var(--epr-text-color);--epr-header-overlay-z-index:3;--epr-emoji-variations-indictator-z-index:1;--epr-category-label-z-index:2;--epr-skin-variation-picker-z-index:5;--epr-preview-z-index:6}.EmojiPickerReact.epr-dark-theme{--epr-dark:#000;--epr-emoji-variation-picker-bg-color:var(--epr-dark);--epr-highlight-color:silver;--epr-text-color:var(--epr-highlight-color);--epr-hover-bg-color:#363636f6;--epr-focus-bg-color:#474747;--epr-search-input-bg-color:#333;--epr-category-label-bg-color:#222222e6;--epr-picker-border-color:#151617;--epr-bg-color:#222;--epr-search-input-bg-color-active:var(--epr-dark);--epr-emoji-variation-indicator-color:#444;--epr-category-icon-active-color:#3271b7;--epr-skin-tone-picker-menu-color:#22222295}.EmojiPickerReact{background-color:var(--epr-bg-color);overflow:hidden}.EmojiPickerReact .epr-hidden,.EmojiPickerReact.epr-search-active .epr-hidden-on-search,.EmojiPickerReact:not(.epr-search-active) .epr-visible-on-search-only{display:none!important;opacity:0!important;pointer-events:none!important;visibility:hidden!important}aside.EmojiPickerReact.epr-main:has(input:not(:-moz-placeholder-shown)) .epr-hidden-on-search{display:none!important;opacity:0!important;pointer-events:none!important;visibility:hidden!important}aside.EmojiPickerReact.epr-main:has(input:not(:placeholder-shown)) .epr-hidden-on-search{display:none!important;opacity:0!important;pointer-events:none!important;visibility:hidden!important}aside.EmojiPickerReact.epr-main:has(input:-moz-placeholder-shown) .epr-visible-on-search-only{display:none!important;opacity:0!important;pointer-events:none!important;visibility:hidden!important}aside.EmojiPickerReact.epr-main:has(input:placeholder-shown) .epr-visible-on-search-only{display:none!important;opacity:0!important;pointer-events:none!important;visibility:hidden!important}.EmojiPickerReact *{box-sizing:border-box;font-family:sans-serif}.EmojiPickerReact button.epr-btn{background:none;border:0;cursor:pointer;outline:none}</style><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/json-ENPUEPYp.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/json-BESjz4hO.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/python-DcJqrvjk.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SidebarMobile-A78gaPAE.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/sessionStorageKeys-DVXjLDnd.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/SiteTabs-DhglWObl.js"><link rel="modulepreload" as="script" crossorigin="" href="https://pplx-next-static-public.perplexity.ai/_spa/assets/MobileSidebar-C8DrFjiC.js"></head><body class="md:bg-underlay bg-transparent"><main id="root"><div class="border-subtlest ring-subtlest divide-subtlest bg-base"><div class="isolate flex h-dvh"><div class="flex size-full flex-1 duration-normal ease-in-out" style="transition-property: padding;"><div style="padding-left: 0px; transition: padding-left 0.2s cubic-bezier(0.16, 1, 0.3, 1), padding-right 0.2s cubic-bezier(0.16, 1, 0.3, 1);" class="erp-tab:p-0 md:gap-xs erp-tab:gap-0 isolate flex h-auto max-h-screen min-w-0 grow flex-col"><div class="@container/main relative isolate min-h-0 flex-1 overflow-clip bg-clip-border border-subtlest ring-subtlest divide-subtlest bg-base"><div class="mx-auto flex w-full flex-col h-full"><div dir="ltr" data-orientation="horizontal" class="contents"><div></div><div class="h-headerHeight !bg-base/95 @container/header pointer-events-none inset-x-0 top-0 transition-none md:mb-0 relative max-[970px]:md:bg-base border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="flex size-full items-center " style="gap: 16px; --left-width: 16px; --expanded-tabs-width: 327.11667251586914px; --gap: 0px; --scrollbar-gutter-offset: 0px;"><div class="pointer-events-none invisible absolute left-[-9999px] top-0 inline-block pl-md" aria-hidden="true"></div><div class="flex h-full min-w-0 flex-1 items-center [container-name:tabbar] [container-type:inline-size] [margin-left:max(0px,calc((100%-var(--thread-content-width))/2-var(--left-width)-var(--gap)-var(--scrollbar-gutter-offset)/2))] pl-md opacity-100"><div class="hideScroll pointer-events-auto inline-flex h-full items-end overflow-x-auto" style="gap: 16px;"><div role="tablist" aria-orientation="horizontal" aria-label="Answer mode tabs" class="flex flex-row flex-nowrap h-[54px] gap-5 relative" tabindex="0" data-orientation="horizontal" style="outline: none;"><span class="inline-flex" data-state="closed"><button type="button" role="tab" aria-selected="true" aria-controls="radix-:r4l:-content-default" data-state="active" id="radix-:r4l:-trigger-default" aria-label="Answer" class="group reset interactable font-sans font-medium select-none transition-colors duration-300 relative flex gap-1.5 items-center text-sm text-foreground data-[state=inactive]:opacity-80 data-[state=active]:opacity-100 cursor-pointer py-3.5 px-3" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" color="currentColor" class="tabler-icon shrink-0" fill="currentColor" fill-rule="evenodd"><path d="M21.23 7.134h-2.307V2.775a.772.772 0 0 0-.441-.697.795.795 0 0 0-.82.102l-4.893 4.072V1.775c0-.42-.348-.77-.769-.77-.42 0-.77.35-.77.77v4.487L6.339 2.18a.751.751 0 0 0-.82-.102.772.772 0 0 0-.441.697v4.36H2.769A.774.774 0 0 0 2 7.903v8.205c0 .42.349.77.77.77h2.307v4.359c0 .297.174.574.44.697a.73.73 0 0 0 .33.072.802.802 0 0 0 .491-.175l4.893-4.071v4.487c0 .42.348.77.769.77.42 0 .77-.35.77-.77V17.76l4.892 4.071a.802.802 0 0 0 .492.175.73.73 0 0 0 .328-.072.772.772 0 0 0 .441-.697v-4.36h2.308c.42 0 .769-.348.769-.769V7.903a.775.775 0 0 0-.77-.769Zm-3.845-2.718v2.718h-3.262l3.262-2.718Zm-10.77 0 3.262 2.718H6.615V4.416ZM3.538 15.34V8.673h6.606l-4.841 4.84a.768.768 0 0 0-.226.544v1.282H3.538Zm3.077.77v-1.734l4.616-4.615v5.99l-4.616 3.846v-3.488Zm10.77 3.487-4.616-3.847V9.76l4.616 4.616v5.22Zm3.076-4.257h-1.538v-1.282c0-.205-.082-.4-.226-.543l-4.84-4.841h6.605v6.666Z"></path></svg></button></span><div class="pointer-events-none invisible absolute left-[-9999px] top-0 inline-block " aria-hidden="true"><button type="button" role="tab" aria-selected="true" aria-controls="radix-:r4l:-content-default" data-state="active" id="radix-:r4l:-trigger-default" class="group reset interactable font-sans font-medium select-none transition-colors duration-300 relative flex gap-1.5 items-center text-sm text-foreground data-[state=inactive]:opacity-80 data-[state=active]:opacity-100 cursor-pointer py-3.5 data-[state=inactive]:hover:opacity-100" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" color="currentColor" class="tabler-icon shrink-0" fill="currentColor" fill-rule="evenodd"><path d="M21.23 7.134h-2.307V2.775a.772.772 0 0 0-.441-.697.795.795 0 0 0-.82.102l-4.893 4.072V1.775c0-.42-.348-.77-.769-.77-.42 0-.77.35-.77.77v4.487L6.339 2.18a.751.751 0 0 0-.82-.102.772.772 0 0 0-.441.697v4.36H2.769A.774.774 0 0 0 2 7.903v8.205c0 .42.349.77.77.77h2.307v4.359c0 .297.174.574.44.697a.73.73 0 0 0 .33.072.802.802 0 0 0 .491-.175l4.893-4.071v4.487c0 .42.348.77.769.77.42 0 .77-.35.77-.77V17.76l4.892 4.071a.802.802 0 0 0 .492.175.73.73 0 0 0 .328-.072.772.772 0 0 0 .441-.697v-4.36h2.308c.42 0 .769-.348.769-.769V7.903a.775.775 0 0 0-.77-.769Zm-3.845-2.718v2.718h-3.262l3.262-2.718Zm-10.77 0 3.262 2.718H6.615V4.416ZM3.538 15.34V8.673h6.606l-4.841 4.84a.768.768 0 0 0-.226.544v1.282H3.538Zm3.077.77v-1.734l4.616-4.615v5.99l-4.616 3.846v-3.488Zm10.77 3.487-4.616-3.847V9.76l4.616 4.616v5.22Zm3.076-4.257h-1.538v-1.282c0-.205-.082-.4-.226-.543l-4.84-4.841h6.605v6.666Z"></path></svg>Answer</button></div><span class="inline-flex" data-state="closed"><button type="button" role="tab" aria-selected="false" aria-controls="radix-:r4l:-content-sources" data-state="inactive" id="radix-:r4l:-trigger-sources" aria-label="Links" class="group reset interactable font-sans font-medium select-none transition-colors duration-300 relative flex gap-1.5 items-center text-sm text-foreground data-[state=inactive]:opacity-80 data-[state=active]:opacity-100 cursor-pointer py-3.5 px-3" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><svg role="img" class="inline-flex fill-current" width="18" height="18"><use xlink:href="#pplx-icon-world"></use></svg></button></span><div class="pointer-events-none invisible absolute left-[-9999px] top-0 inline-block " aria-hidden="true"><button type="button" role="tab" aria-selected="false" aria-controls="radix-:r4l:-content-sources" data-state="inactive" id="radix-:r4l:-trigger-sources" class="group reset interactable font-sans font-medium select-none transition-colors duration-300 relative flex gap-1.5 items-center text-sm text-foreground data-[state=inactive]:opacity-80 data-[state=active]:opacity-100 cursor-pointer py-3.5 data-[state=inactive]:hover:opacity-100" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><svg role="img" class="inline-flex fill-current" width="18" height="18"><use xlink:href="#pplx-icon-world"></use></svg>Links</button></div><span class="inline-flex" data-state="closed"><button type="button" role="tab" aria-selected="false" aria-controls="radix-:r4l:-content-images" data-state="inactive" id="radix-:r4l:-trigger-images" aria-label="Images" class="group reset interactable font-sans font-medium select-none transition-colors duration-300 relative flex gap-1.5 items-center text-sm text-foreground data-[state=inactive]:opacity-80 data-[state=active]:opacity-100 cursor-pointer py-3.5 px-3" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><svg role="img" class="inline-flex fill-current" width="18" height="18"><use xlink:href="#pplx-icon-photo"></use></svg></button></span><div class="pointer-events-none invisible absolute left-[-9999px] top-0 inline-block " aria-hidden="true"><button type="button" role="tab" aria-selected="false" aria-controls="radix-:r4l:-content-images" data-state="inactive" id="radix-:r4l:-trigger-images" class="group reset interactable font-sans font-medium select-none transition-colors duration-300 relative flex gap-1.5 items-center text-sm text-foreground data-[state=inactive]:opacity-80 data-[state=active]:opacity-100 cursor-pointer py-3.5 data-[state=inactive]:hover:opacity-100" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><svg role="img" class="inline-flex fill-current" width="18" height="18"><use xlink:href="#pplx-icon-photo"></use></svg>Images</button></div><div class="flex h-full will-change-auto" style="opacity: 1; transform: none; transform-origin: 50% 50% 0px;"><span class="inline-flex" data-state="closed"><button type="button" role="tab" aria-selected="false" aria-controls="radix-:r4l:-content-videos" data-state="inactive" id="radix-:r4l:-trigger-videos" aria-label="Videos" class="group reset interactable font-sans font-medium select-none transition-colors duration-300 relative flex gap-1.5 items-center text-sm text-foreground data-[state=inactive]:opacity-80 data-[state=active]:opacity-100 cursor-pointer py-3.5 px-3" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><svg role="img" class="inline-flex fill-current" width="18" height="18"><use xlink:href="#pplx-icon-movie"></use></svg></button></span></div><div class="pointer-events-none invisible absolute left-[-9999px] top-0 inline-block " aria-hidden="true"><div class="flex h-full will-change-auto" style="opacity: 1; transform: none;"><button type="button" role="tab" aria-selected="false" aria-controls="radix-:r4l:-content-videos" data-state="inactive" id="radix-:r4l:-trigger-videos" class="group reset interactable font-sans font-medium select-none transition-colors duration-300 relative flex gap-1.5 items-center text-sm text-foreground data-[state=inactive]:opacity-80 data-[state=active]:opacity-100 cursor-pointer py-3.5 data-[state=inactive]:hover:opacity-100" tabindex="-1" data-orientation="horizontal" data-radix-collection-item=""><svg role="img" class="inline-flex fill-current" width="18" height="18"><use xlink:href="#pplx-icon-movie"></use></svg>Videos</button></div></div><span class="absolute bottom-0 h-two bg-inverse pointer-events-none transition-[transform,width,opacity] duration-300 ease-in-out" style="transform: translateX(0px); width: 42px; opacity: 1;" aria-hidden="true"></span></div></div></div><div class="pr-md flex-shrink-0"><div class="gap-x-sm pointer-events-auto relative flex min-w-0 items-center justify-end"><div><button data-state="closed" aria-label="Thread actions" aria-expanded="false" aria-haspopup="dialog" aria-controls="radix-:r6rj:" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex hover:text-foreground hover:bg-subtle px-3 rounded-lg"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-dots"></use></svg></button></div><div class="transition-all duration-300 flex items-center gap-x-xs md:gap-x-0 opacity-100"><span><button aria-label="Share" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex aspect-[9/8] hover:text-foreground hover:bg-subtle rounded-lg"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-share-3"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></span></div></div></div></div><div class="absolute bottom-0 inset-x-0 border-b border-subtlest ring-subtlest divide-subtlest bg-transparent"></div></div><div class="scrollable-container flex flex-1 basis-0 overflow-auto [scrollbar-gutter:stable] scrollbar-subtle"><div class="mx-auto size-full max-w-none"><div class="erp-sidecar:h-fit erp-sidecar:pb-0 mx-auto h-full"><div class="relative border-subtlest ring-subtlest divide-subtlest bg-base"><div class="px-md md:px-lg overflow-hidden"><div class="max-w-threadContentWidth mx-auto"></div></div><div><div><div><div class="" style="margin-top: 0px; padding-bottom: 0px;"><div class="pt-[var(--thread-visual-spacing)] md:pt-lg pb-[var(--thread-visual-spacing)] px-[var(--thread-visual-spacing)] border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="isolate mx-auto max-w-threadContentWidth"><div class="bg-base erp-sidecar:pt-0 erp-mobile-sidecar:pt-0" style="opacity: 1; transform: none;"><div class="mx-auto max-w-threadContentWidth"><div class="max-w-threadContentWidth relative isolate z-20 mx-auto"><div class="relative z-10"><div class="group relative flex items-end gap-0.5"><div class="-inset-md pointer-events-none absolute select-none"></div><div class="relative min-w-0 flex-1 flex justify-end"><div class="flex items-center gap-2"><div class="flex shrink-0 items-center gap-1 opacity-0 transition-opacity duration-150 pointer-events-none group-hover:pointer-events-auto group-hover:opacity-100 focus-within:pointer-events-auto focus-within:opacity-100" aria-hidden="false"><button aria-label="Edit Query" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-pencil"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Copy Query" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></div><div class="group/title relative inline-flex flex-col"><div style="mask-image: linear-gradient(black 70%, transparent 97%);"><div style="transition: height 200ms cubic-bezier(0.16, 1, 0.3, 1); overflow: hidden; height: 144px;"><div><h1 class="group/query relative whitespace-pre-line !text-wrap break-words [word-break:break-word] font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex min-w-[48px] items-center justify-center bg-offset text-foreground rounded-2xl p-3 font-sans text-base font-normal select-none max-w-[600px]"><span class="select-text" style="overflow-wrap: anywhere;">исследуй лучшие практики и подходы по администратированию, оптимизации и обслуживанию базы данных Postgresql, а также оптимизации запросов.\</span></div></h1></div></div></div><div class="top-xs relative flex -mt-2"><div class="-mt-0.5" data-testid="toggle-query-expand-button"><button type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-6 text-xs cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex hover:text-foreground hover:bg-subtle px-2 rounded-md relative"><span style="opacity: 1; transition: opacity 150ms 150ms;" class="text-box-trim-both pr-1">Show more</span><div style="opacity: 1; transition: opacity 150ms 150ms;" class="ml-1 flex items-center"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-chevron-down"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></button></div></div></div></div></div></div></div></div></div></div><div class="mx-auto max-w-threadContentWidth"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-default" id="radix-:r4l:-content-default" tabindex="0" class="focus:outline-none" style=""><div class="gap-y-md mt-md flex flex-col"><div dir="ltr" data-orientation="horizontal" class="grid w-full min-w-0 grid-cols-[minmax(0,1fr)]"><div style="opacity: 1;" class="col-start-1 row-start-2"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:rra:-trigger-thread" id="radix-:rra:-content-thread" tabindex="0" class="focus:outline-none" style=""><div class="border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="gap-y-md flex flex-col"><div class="flex flex-col gap-sm"><button class="gap-x-0.5 flex items-center whitespace-nowrap text-quiet text-sm">10 steps completed<span class="duration-quick inline-block transition-transform ease-in-out text-quiet rotate-90"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-chevron-right"></use></svg></span></button><div class="relative z-0 flex flex-col"><div class="relative pl-px"><div class="group/goal relative flex overflow-hidden  gap-[7px]" role="listitem" id="0"><div class="flex"><span class="relative flex w-[15px] shrink-0 flex-col items-center"><span class="w-px border-l border-subtler h-[13px] group-first/goal:opacity-0 group-only/goal:opacity-0"></span><div style="transform: none;"><div class="bg-base"><div class="relative"><div class="shrink-0 rounded-full border bg-inverse/25 dark:bg-inverse/20 flex border-transparent" style="width: 7px; height: 7px; backface-visibility: hidden;"></div></div></div></div><span class="w-px border-l border-subtler grow"></span></span></div><div class="min-w-0 grow"><div class="flex flex-col"><span class="flex grow overflow-hidden py-[6px]"><span class="pr-sm block [&amp;_code]:max-h-[300px] [&amp;_code]:overflow-auto font-sans text-sm text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="relative">Я исследую лучшие практики администрирования, оптимизации и обслуживания PostgreSQL через веб-поиск официальной документации и экспертных источников.</div></span></span><div class="pb-md gap-y-sm flex w-full flex-col empty:hidden group-last/goal:pb-0"><div class="mt-1.5 empty:hidden" id="c04d1a2f-633a-4a0e-b31b-d702f98e15ed"><div class="gap-sm group flex cursor-pointer flex-col mb-two" style="opacity: 1;"><div class="flex items-center gap-1 py-1.5 font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span style="animation-duration: 1800ms;" class="">Searching</span></div></div><div class="gap-sm flex flex-wrap"><div class="flex items-center gap-sm flex-wrap"><div class="inline-flex" style="opacity: 1; transform: none;"><div class="py-xs inline-block rounded-lg px-2 border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class="gap-x-xs flex items-center font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0" width="14" height="14"><use xlink:href="#pplx-icon-search"></use></svg><p class="px-two">PostgreSQL database administration best practices 2025</p></div></div></div><div class="inline-flex" style="opacity: 1; transform: none;"><div class="py-xs inline-block rounded-lg px-2 border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class="gap-x-xs flex items-center font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0" width="14" height="14"><use xlink:href="#pplx-icon-search"></use></svg><p class="px-two">PostgreSQL query optimization performance tuning</p></div></div></div><div class="inline-flex" style="opacity: 1; transform: none;"><div class="py-xs inline-block rounded-lg px-2 border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class="gap-x-xs flex items-center font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0" width="14" height="14"><use xlink:href="#pplx-icon-search"></use></svg><p class="px-two">PostgreSQL maintenance optimization indexing</p></div></div></div></div></div></div><div class="mt-1.5 empty:hidden" id="c0fb4ef2-a0a1-43db-b898-4e06f2592fbe"><div class="gap-sm group flex cursor-pointer flex-col mb-two" style="opacity: 1;"><div class="flex items-center gap-1 py-1.5 font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span style="animation-duration: 1800ms;" class="">Reviewing sources · 20</span></div></div><div class="@container group/step-card relative isolate flex flex-col gap-1.5 overflow-hidden rounded-xl border shadow-sm border-subtlest ring-subtlest divide-subtlest bg-raised dark:bg-offset"><div class="@xs:gap-sm @xs:flex-row flex flex-col gap-0"><div class="flex min-w-0 grow flex-col gap-1.5"><div class="relative border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="flex-col scrollbar-subtle pb-sm relative flex overflow-y-auto pl-3 pr-1 [scrollbar-gutter:stable] pt-sm mask-fade-b-4" style="max-height: 250px;"><div class="flex flex-col gap-px"><div class="mb-sm last:mb-0"><div class="flex items-center flex-col items-start gap-px"><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.instaclustr.com/education/postgresql/top-10-postgresql-best-practices-for-2025/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="instaclustr.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=instaclustr.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Top 10 PostgreSQL® best practices for 2025</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">instaclustr</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.instaclustr.com/education/postgresql/postgresql-tuning-6-things-you-can-do-to-improve-db-performance/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="instaclustr.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=instaclustr.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL tuning: 6 things you can do to improve DB ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">instaclustr</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.pgedge.com/blog/postgresql-performance-tuning"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="pgedge.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=pgedge.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Performance Tuning</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">pgedge</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://speakdatascience.com/postgresql-best-practices/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="speakdatascience.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=speakdatascience.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">7 Crucial PostgreSQL Best Practices - Speak Data Science</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">speakdatascience</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.percona.com/blog/tuning-postgresql-database-parameters-to-optimize-performance/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="percona.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=percona.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Performance Tuning Guide: Settings That Make a ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">percona</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://leapcell.io/blog/maintaining-index-health-in-postgresql-when-to-choose-reindex-or-vacuum-full"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="leapcell.io favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=leapcell.io"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Maintaining Index Health in PostgreSQL: When to Choose ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">leapcell</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.mydbops.com/blog/postgresql-parameter-tuning-best-practices"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="mydbops.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=mydbops.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Performance Tuning Best Practices 2025</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">mydbops</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.geekytidbits.com/performance-tuning-postgres/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="geekytidbits.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=geekytidbits.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Performance Tuning Queries in PostgreSQL - Geeky Tidbits</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">geekytidbits</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.tigerdata.com/learn/postgresql-performance-tuning-optimizing-database-indexes"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="tigerdata.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=tigerdata.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Performance Tuning: Optimizing Database ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">tigerdata</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.reddit.com/r/PostgreSQL/comments/1h0zt4u/postgresql_best_practices_guidelines/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="reddit.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=reddit.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL best practices guidelines</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">reddit</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.tigerdata.com/blog/best-practices-for-query-optimization-in-postgresql"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="tigerdata.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=tigerdata.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Best Practices for Query Optimization on PostgreSQL</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">tigerdata</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://dev.to/mspilari/understanding-indexing-in-postgresql-pros-cons-and-best-practices-41p4"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="dev.to favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=dev.to"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Indexing in PostgreSQL: Pros, Cons, and Best Practices</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">dev</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://roadmap.sh/postgresql-dba"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="roadmap.sh favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=roadmap.sh"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Learn to become a database administrator with PostgreSQL</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">roadmap</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/current/performance-tips.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Documentation: 18: Chapter 14. Performance Tips</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.percona.com/blog/useful-queries-for-postgresql-index-maintenance/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="percona.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=percona.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Useful PostgreSQL Index Maintenance Queries to Improve ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">percona</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.percona.com/blog/postgresql-database-security-best-practices/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="percona.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=percona.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Database Security Best Practices - Percona</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">percona</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://docs.aws.amazon.com/prescriptive-guidance/latest/postgresql-query-tuning/introduction.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="docs.aws.amazon.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=docs.aws.amazon.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Optimizing PostgreSQL query performance</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">docs.aws.amazon</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.bairesdev.com/blog/postgresql-performance-optimization/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="bairesdev.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=bairesdev.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Performance Optimization: What Actually Matters</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">bairesdev</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.reddit.com/r/PostgreSQL/comments/26q3hu/database_maintenance_best_practice/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="reddit.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=reddit.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Database maintenance best practice</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">reddit</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/7.2/performance-tips.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Documentation: 7.2: Performance Tips - PostgreSQL</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class="group/goal relative flex overflow-hidden  gap-[7px]" role="listitem" id="1"><div class="flex"><span class="relative flex w-[15px] shrink-0 flex-col items-center"><span class="w-px border-l border-subtler h-[13px] group-first/goal:opacity-0 group-only/goal:opacity-0"></span><div style="transform: none;"><div class="bg-base"><div class="relative"><div class="shrink-0 rounded-full border bg-inverse/25 dark:bg-inverse/20 flex border-transparent" style="width: 7px; height: 7px; backface-visibility: hidden;"></div></div></div></div><span class="w-px border-l border-subtler grow"></span></span></div><div class="min-w-0 grow"><div class="flex flex-col"><span class="flex grow overflow-hidden py-[6px]"><span class="pr-sm block [&amp;_code]:max-h-[300px] [&amp;_code]:overflow-auto font-sans text-sm text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="relative">Извлекая детальный контент из ключевых источников по оптимизации производительности и настройки запросов PostgreSQL.</div></span></span><div class="pb-md gap-y-sm flex w-full flex-col empty:hidden group-last/goal:pb-0"><div class="mt-1.5 empty:hidden" id="e329a56f-9c35-41b6-9bf1-1e1e77ee0c22"><div class="gap-sm group flex cursor-pointer flex-col mb-two" style="opacity: 1;"><div class="flex items-center gap-1 py-1.5 font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span style="animation-duration: 1800ms;" class="">Getting sources</span></div></div><div class="flex flex-wrap gap-2"><a class="inline-block max-w-full" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/current/performance-tips.html"><div class="py-xs rounded-lg pl-1.5 pr-2.5 border-subtlest ring-subtlest divide-subtlest transition duration-normal bg-subtler md:hover:!bg-subtle"><div class="flex items-center gap-x-1.5 min-w-0 border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="relative flex-none font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="truncate min-w-0 grow break-all leading-none transition-all duration-300 font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</div></div></div></a><a class="inline-block max-w-full" rel="noopener nofollow" target="_blank" href="https://docs.aws.amazon.com/prescriptive-guidance/latest/postgresql-query-tuning/introduction.html"><div class="py-xs rounded-lg pl-1.5 pr-2.5 border-subtlest ring-subtlest divide-subtlest transition duration-normal bg-subtler md:hover:!bg-subtle"><div class="flex items-center gap-x-1.5 min-w-0 border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="relative flex-none font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="docs.aws.amazon.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=docs.aws.amazon.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="truncate min-w-0 grow break-all leading-none transition-all duration-300 font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">docs.aws.amazon</div></div></div></a></div></div><div class="mt-1.5 empty:hidden" id="424c79a5-d89a-4e26-94a1-342d9a4eefa5"><div class="gap-sm group flex cursor-pointer flex-col mb-two" style="opacity: 1;"><div class="flex items-center gap-1 py-1.5 font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span style="animation-duration: 1800ms;" class="">Reviewing sources · 2</span></div></div><div class="@container group/step-card relative isolate flex flex-col gap-1.5 overflow-hidden rounded-xl border shadow-sm border-subtlest ring-subtlest divide-subtlest bg-raised dark:bg-offset"><div class="@xs:gap-sm @xs:flex-row flex flex-col gap-0"><div class="flex min-w-0 grow flex-col gap-1.5"><div class="relative border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="flex-col scrollbar-subtle pb-sm relative flex overflow-y-auto pl-3 pr-1 [scrollbar-gutter:stable] pt-sm" style="max-height: 250px;"><div class="flex flex-col gap-px"><div class="mb-sm last:mb-0"><div class="flex items-center flex-col items-start gap-px"><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://docs.aws.amazon.com/prescriptive-guidance/latest/postgresql-query-tuning/introduction.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="docs.aws.amazon.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=docs.aws.amazon.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Optimizing PostgreSQL query performance - AWS Documentation</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">docs.aws.amazon</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/current/performance-tips.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Documentation: 18: Chapter 14. Performance Tips</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class="group/goal relative flex overflow-hidden  gap-[7px]" role="listitem" id="2"><div class="flex"><span class="relative flex w-[15px] shrink-0 flex-col items-center"><span class="w-px border-l border-subtler h-[13px] group-first/goal:opacity-0 group-only/goal:opacity-0"></span><div style="transform: none;"><div class="bg-base"><div class="relative"><div class="shrink-0 rounded-full border bg-inverse/25 dark:bg-inverse/20 flex border-transparent" style="width: 7px; height: 7px; backface-visibility: hidden;"></div></div></div></div><span class="w-px border-l border-subtler grow"></span></span></div><div class="min-w-0 grow"><div class="flex flex-col"><span class="flex grow overflow-hidden py-[6px]"><span class="pr-sm block [&amp;_code]:max-h-[300px] [&amp;_code]:overflow-auto font-sans text-sm text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="relative">Ищу рекомендации по настройке shared_buffers, work_mem, autovacuum и техникам EXPLAIN ANALYZE для PostgreSQL.</div></span></span><div class="pb-md gap-y-sm flex w-full flex-col empty:hidden group-last/goal:pb-0"><div class="mt-1.5 empty:hidden" id="2875735d-37e5-4646-9f28-244f07e98cae"><div class="gap-sm group flex cursor-pointer flex-col mb-two" style="opacity: 1;"><div class="flex items-center gap-1 py-1.5 font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span style="animation-duration: 1800ms;" class="">Searching</span></div></div><div class="gap-sm flex flex-wrap"><div class="flex items-center gap-sm flex-wrap"><div class="inline-flex" style="opacity: 1; transform: none;"><div class="py-xs inline-block rounded-lg px-2 border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class="gap-x-xs flex items-center font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0" width="14" height="14"><use xlink:href="#pplx-icon-search"></use></svg><p class="px-two">PostgreSQL shared_buffers work_mem effective_cache_size tuning</p></div></div></div><div class="inline-flex" style="opacity: 1; transform: none;"><div class="py-xs inline-block rounded-lg px-2 border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class="gap-x-xs flex items-center font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0" width="14" height="14"><use xlink:href="#pplx-icon-search"></use></svg><p class="px-two">PostgreSQL autovacuum configuration optimization</p></div></div></div><div class="inline-flex" style="opacity: 1; transform: none;"><div class="py-xs inline-block rounded-lg px-2 border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class="gap-x-xs flex items-center font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0" width="14" height="14"><use xlink:href="#pplx-icon-search"></use></svg><p class="px-two">PostgreSQL EXPLAIN ANALYZE query optimization techniques</p></div></div></div></div></div></div><div class="mt-1.5 empty:hidden" id="c70f2ddc-0690-470c-911b-2f25e7eb73fe"><div class="gap-sm group flex cursor-pointer flex-col mb-two" style="opacity: 1;"><div class="flex items-center gap-1 py-1.5 font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span style="animation-duration: 1800ms;" class="">Reviewing sources · 20</span></div></div><div class="@container group/step-card relative isolate flex flex-col gap-1.5 overflow-hidden rounded-xl border shadow-sm border-subtlest ring-subtlest divide-subtlest bg-raised dark:bg-offset"><div class="@xs:gap-sm @xs:flex-row flex flex-col gap-0"><div class="flex min-w-0 grow flex-col gap-1.5"><div class="relative border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="flex-col scrollbar-subtle pb-sm relative flex overflow-y-auto pl-3 pr-1 [scrollbar-gutter:stable] pt-sm mask-fade-b-4" style="max-height: 250px;"><div class="flex flex-col gap-px"><div class="mb-sm last:mb-0"><div class="flex items-center flex-col items-start gap-px"><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.crunchydata.com/blog/optimize-postgresql-server-performance"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="crunchydata.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=crunchydata.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Work_mem</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">crunchydata</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.cybertec-postgresql.com/en/tuning-autovacuum-postgresql/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="cybertec-postgresql.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=cybertec-postgresql.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Tuning autovacuum for PostgreSQL databases</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">cybertec-postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://leapcell.io/blog/decoding-postgresql-query-performance-with-explain-analyze"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="leapcell.io favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=leapcell.io"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Decoding PostgreSQL Query Performance with EXPLAIN ANALYZE - Leapcell</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">leapcell</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://postgrespro.com/list/thread-id/2065166"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgrespro.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgrespro.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Thread: shared_buffers/effective_cache_size on 96GB server</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgrespro</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://pganalyze.com/blog/introducing-vacuum-advisor-postgres"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="pganalyze.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=pganalyze.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Workload-aware autovacuum tuning for Postgres - pganalyze</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">pganalyze</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.enginelabs.ai/blog/optimize-postgres-query-performance-using-explain-analyze-a-comprehensive-guide"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="enginelabs.ai favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=enginelabs.ai"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Optimize Postgres Query Performance Using EXPLAIN ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">enginelabs</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://docs.digitalocean.com/products/databases/postgresql/concepts/shared-buffers/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="docs.digitalocean.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=docs.digitalocean.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Optimize Shared Buffers</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">docs.digitalocean</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://learn.microsoft.com/en-us/azure/postgresql/flexible-server/how-to-autovacuum-tuning"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="learn.microsoft.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=learn.microsoft.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Autovacuum Tuning - Azure Database for PostgreSQL</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">learn.microsoft</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.crunchydata.com/blog/get-started-with-explain-analyze"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="crunchydata.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=crunchydata.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Explaining Your Postgres Query Performance | Crunchy Data Blog</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">crunchydata</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/current/runtime-config-resource.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Documentation: 18: 19.4. Resource Consumption</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.enterprisedb.com/blog/autovacuum-tuning-basics"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="enterprisedb.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=enterprisedb.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Throttling</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">enterprisedb</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.enterprisedb.com/blog/postgresql-query-optimization-performance-tuning-with-explain-analyze?lang=en"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="enterprisedb.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=enterprisedb.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">How To Use Explain Analyze To Improve Query Performance in PostgreSQL</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">enterprisedb</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://postgis.net/workshops/postgis-intro/tuning.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgis.net favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgis.net"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">35. Basic PostgreSQL Tuning</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgis</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/17/runtime-config-autovacuum.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Documentation: 17: 19.10. Automatic Vacuuming</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/8.2/sql-explain.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL: Documentation: 8.2: EXPLAIN</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://postgresqlco.nf/doc/en/param/effective_cache_size/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresqlco.nf favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresqlco.nf"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Documentation: effective_cache_size parameter</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresqlco</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/current/routine-vacuuming.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Documentation: 18: 24.1. Routine Vacuuming - PostgreSQL</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.reddit.com/r/PostgreSQL/comments/19fija0/how_to_use_explain_analyze_output_to_improve/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="reddit.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=reddit.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">How to use EXPLAIN / ANALYZE output to improve performance</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">reddit</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgrespro.com/list/thread-id/2065478"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgrespro.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgrespro.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Thread: Increasing work_mem and shared_buffers on Postgres 9.2 significantly slows down queries</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgrespro</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.percona.com/blog/tuning-autovacuum-in-postgresql-and-autovacuum-internals/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="percona.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=percona.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Is Vacuum Io Intensive?</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">percona</span></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class="group/goal relative flex overflow-hidden  gap-[7px]" role="listitem" id="3"><div class="flex"><span class="relative flex w-[15px] shrink-0 flex-col items-center"><span class="w-px border-l border-subtler h-[13px] group-first/goal:opacity-0 group-only/goal:opacity-0"></span><div style="transform: none;"><div class="bg-base"><div class="relative"><div class="shrink-0 rounded-full border bg-inverse/25 dark:bg-inverse/20 flex border-transparent" style="width: 7px; height: 7px; backface-visibility: hidden;"></div></div></div></div><span class="w-px border-l border-subtler grow"></span></span></div><div class="min-w-0 grow"><div class="flex flex-col"><span class="flex grow overflow-hidden py-[6px]"><span class="pr-sm block [&amp;_code]:max-h-[300px] [&amp;_code]:overflow-auto font-sans text-sm text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="relative">Исследуя практики пулинга соединений, партиционирования таблиц и мониторинга производительности PostgreSQL.</div></span></span><div class="pb-md gap-y-sm flex w-full flex-col empty:hidden group-last/goal:pb-0"><div class="mt-1.5 empty:hidden" id="1fc61e6c-ed6a-4e41-901a-ec91f4b9a06d"><div class="gap-sm group flex cursor-pointer flex-col mb-two" style="opacity: 1;"><div class="flex items-center gap-1 py-1.5 font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span style="animation-duration: 1800ms;" class="">Searching</span></div></div><div class="gap-sm flex flex-wrap"><div class="flex items-center gap-sm flex-wrap"><div class="inline-flex" style="opacity: 1; transform: none;"><div class="py-xs inline-block rounded-lg px-2 border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class="gap-x-xs flex items-center font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0" width="14" height="14"><use xlink:href="#pplx-icon-search"></use></svg><p class="px-two">PostgreSQL connection pooling PgBouncer Pgpool best practices</p></div></div></div><div class="inline-flex" style="opacity: 1; transform: none;"><div class="py-xs inline-block rounded-lg px-2 border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class="gap-x-xs flex items-center font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0" width="14" height="14"><use xlink:href="#pplx-icon-search"></use></svg><p class="px-two">PostgreSQL table partitioning strategies performance</p></div></div></div><div class="inline-flex" style="opacity: 1; transform: none;"><div class="py-xs inline-block rounded-lg px-2 border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class="gap-x-xs flex items-center font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0" width="14" height="14"><use xlink:href="#pplx-icon-search"></use></svg><p class="px-two">PostgreSQL monitoring pg_stat_statements performance analytics</p></div></div></div></div></div></div><div class="mt-1.5 empty:hidden" id="4f4e7aec-12a2-4b4d-b540-2c5824bcf535"><div class="gap-sm group flex cursor-pointer flex-col mb-two" style="opacity: 1;"><div class="flex items-center gap-1 py-1.5 font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span style="animation-duration: 1800ms;" class="">Reviewing sources · 20</span></div></div><div class="@container group/step-card relative isolate flex flex-col gap-1.5 overflow-hidden rounded-xl border shadow-sm border-subtlest ring-subtlest divide-subtlest bg-raised dark:bg-offset"><div class="@xs:gap-sm @xs:flex-row flex flex-col gap-0"><div class="flex min-w-0 grow flex-col gap-1.5"><div class="relative border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="flex-col scrollbar-subtle pb-sm relative flex overflow-y-auto pl-3 pr-1 [scrollbar-gutter:stable] pt-sm mask-fade-b-4" style="max-height: 250px;"><div class="flex flex-col gap-px"><div class="mb-sm last:mb-0"><div class="flex items-center flex-col items-start gap-px"><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://pgdash.io/blog/pgbouncer-connection-pool.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="pgdash.io favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=pgdash.io"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Connection Pooling with PgBouncer</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">pgdash</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/current/ddl-partitioning.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Documentation: 18: 5.12. Table Partitioning - PostgreSQL</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://blog.datasentinel.io/post/pg_stats_statements/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="blog.datasentinel.io favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=blog.datasentinel.io"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Monitoring PostgreSQL Performance with pg_stat_statements ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">blog.datasentinel</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://learn.microsoft.com/en-us/azure/postgresql/flexible-server/concepts-connection-pooling-best-practices"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="learn.microsoft.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=learn.microsoft.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Connection pooling best practices - Azure Database for PostgreSQL</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">learn.microsoft</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.vishalgarg.io/articles/guide-to-postgresql-table-partitioning"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="vishalgarg.io favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=vishalgarg.io"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Best Practices</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">vishalgarg</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.mssqltips.com/sqlservertip/8295/postgresql-monitoring-with-pg-stat-statements/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="mssqltips.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=mssqltips.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Monitoring with pg_stat_statements</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">mssqltips</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://learn.microsoft.com/en-us/azure/postgresql/connectivity/concepts-connection-pooling-best-practices"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="learn.microsoft.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=learn.microsoft.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Connection pooling best practices - PostgreSQL - Microsoft Learn</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">learn.microsoft</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://aws.amazon.com/blogs/database/improve-performance-and-manageability-of-large-postgresql-tables-by-migrating-to-partitioned-tables-on-amazon-aurora-and-amazon-rds/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="aws.amazon.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=aws.amazon.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Improve performance and manageability of large ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">aws.amazon</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://severalnines.com/blog/query-observability-and-performance-tuning-with-pg_stat_monitor-and-pg_stat_statements/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="severalnines.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=severalnines.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Query observability and performance tuning with ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">severalnines</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.reddit.com/r/PostgreSQL/comments/dky65i/is_pgbouncer_connection_pooling_needed/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="reddit.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=reddit.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Is pgbouncer connection pooling needed?</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">reddit</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.reddit.com/r/PostgreSQL/comments/1oj5vre/advice_on_partitioning_postgresql_17_tables_for/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="reddit.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=reddit.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Advice on partitioning PostgreSQL 17 tables for rapidly growing application</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">reddit</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.tigerdata.com/blog/using-pg-stat-statements-to-optimize-queries"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="tigerdata.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=tigerdata.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Using pg_stat_statements to Optimize Queries - Tiger Data</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">tigerdata</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.cybertec-postgresql.com/en/connection-pooling-intro-pgbouncer-and-pgpool-ii/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="cybertec-postgresql.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=cybertec-postgresql.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Connection pooling intro - PgBouncer and pgpool-II</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">cybertec-postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.tigerdata.com/learn/when-to-consider-postgres-partitioning"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="tigerdata.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=tigerdata.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">When to Consider Postgres Partitioning - Tiger Data</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">tigerdata</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/current/pgstatstatements.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">18: F.32. pg_stat_statements — track statistics of SQL planning and ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.pgbouncer.org"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="inline-flex items-center justify-center border-subtlest ring-subtlest divide-subtlest bg-subtle" style="width: 16px; height: 16px;"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0 text-quietest relative block" width="20" height="20"><use xlink:href="#pplx-icon-world"></use></svg></div><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PgBouncer - lightweight connection pooler for PostgreSQL</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">pgbouncer</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.cybertec-postgresql.com/en/killing-performance-with-postgresql-partitioning/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="cybertec-postgresql.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=cybertec-postgresql.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Using PostgreSQL partitioning...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">cybertec-postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.freshpaint.io/blog/a-beginners-guide-to-postgres-performance-monitoring"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="freshpaint.io favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=freshpaint.io"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">A Beginner's Guide to Postgres Performance Monitoring - Freshpaint</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">freshpaint</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.enterprisedb.com/blog/pgpool-vs-pgbouncer"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="enterprisedb.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=enterprisedb.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Pgpool vs PGBouncer</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">enterprisedb</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/9.4/ddl-partitioning.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Partitioning</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class="group/goal relative flex overflow-hidden  gap-[7px]" role="listitem" id="4"><div class="flex"><span class="relative flex w-[15px] shrink-0 flex-col items-center"><span class="w-px border-l border-subtler h-[13px] group-first/goal:opacity-0 group-only/goal:opacity-0"></span><div style="transform: none;"><div class="bg-base"><div class="relative"><div class="shrink-0 rounded-full border bg-inverse/25 dark:bg-inverse/20 flex border-transparent" style="width: 7px; height: 7px; backface-visibility: hidden;"></div></div></div></div><span class="w-px border-l border-subtler grow group-last/goal:opacity-0"></span></span></div><div class="min-w-0 grow"><div class="flex flex-col"><span class="flex grow overflow-hidden py-[6px]"><span class="pr-sm block [&amp;_code]:max-h-[300px] [&amp;_code]:overflow-auto font-sans text-sm text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="relative">Сохраняя собранные заметки по исследованию лучших практик администрирования и оптимизации PostgreSQL в файл.</div></span></span></div></div></div><div class="group/goal relative flex overflow-hidden  gap-[7px]" role="listitem" id="5"><div class="flex"><span class="relative flex w-[15px] shrink-0 flex-col items-center"><span class="w-px border-l border-subtler h-[13px] group-first/goal:opacity-0 group-only/goal:opacity-0"></span><div style="transform: none;"><div class="bg-base"><div class="relative"><div class="shrink-0 rounded-full border bg-inverse/25 dark:bg-inverse/20 flex border-transparent" style="width: 7px; height: 7px; backface-visibility: hidden;"></div></div></div></div><span class="w-px border-l border-subtler grow"></span></span></div><div class="min-w-0 grow"><div class="flex flex-col"><span class="flex grow overflow-hidden py-[6px]"><span class="pr-sm block [&amp;_code]:max-h-[300px] [&amp;_code]:overflow-auto font-sans text-sm text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="relative">Исследуя конфигурацию WAL, стриминговую репликацию и стратегии резервного копирования PostgreSQL.</div></span></span><div class="pb-md gap-y-sm flex w-full flex-col empty:hidden group-last/goal:pb-0"><div class="mt-1.5 empty:hidden" id="bc80ce1d-a856-4bba-9f56-4ad002d44a3c"><div class="gap-sm group flex cursor-pointer flex-col mb-two" style="opacity: 1;"><div class="flex items-center gap-1 py-1.5 font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span style="animation-duration: 1800ms;" class="">Searching</span></div></div><div class="gap-sm flex flex-wrap"><div class="flex items-center gap-sm flex-wrap"><div class="inline-flex" style="opacity: 1; transform: none;"><div class="py-xs inline-block rounded-lg px-2 border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class="gap-x-xs flex items-center font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0" width="14" height="14"><use xlink:href="#pplx-icon-search"></use></svg><p class="px-two">PostgreSQL WAL write-ahead logging configuration tuning</p></div></div></div><div class="inline-flex" style="opacity: 1; transform: none;"><div class="py-xs inline-block rounded-lg px-2 border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class="gap-x-xs flex items-center font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0" width="14" height="14"><use xlink:href="#pplx-icon-search"></use></svg><p class="px-two">PostgreSQL streaming replication high availability setup</p></div></div></div><div class="inline-flex" style="opacity: 1; transform: none;"><div class="py-xs inline-block rounded-lg px-2 border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class="gap-x-xs flex items-center font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0" width="14" height="14"><use xlink:href="#pplx-icon-search"></use></svg><p class="px-two">PostgreSQL backup strategy PITR disaster recovery</p></div></div></div></div></div></div><div class="mt-1.5 empty:hidden" id="82c84a42-13ad-40ba-92aa-91e0b5e94054"><div class="gap-sm group flex cursor-pointer flex-col mb-two" style="opacity: 1;"><div class="flex items-center gap-1 py-1.5 font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span style="animation-duration: 1800ms;" class="">Reviewing sources · 20</span></div></div><div class="@container group/step-card relative isolate flex flex-col gap-1.5 overflow-hidden rounded-xl border shadow-sm border-subtlest ring-subtlest divide-subtlest bg-raised dark:bg-offset"><div class="@xs:gap-sm @xs:flex-row flex flex-col gap-0"><div class="flex min-w-0 grow flex-col gap-1.5"><div class="relative border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="flex-col scrollbar-subtle pb-sm relative flex overflow-y-auto pl-3 pr-1 [scrollbar-gutter:stable] pt-sm mask-fade-b-4" style="max-height: 250px;"><div class="flex flex-col gap-px"><div class="mb-sm last:mb-0"><div class="flex items-center flex-col items-start gap-px"><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://learn.microsoft.com/en-us/azure/postgresql/flexible-server/param-write-ahead-log-settings"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="learn.microsoft.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=learn.microsoft.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Write-Ahead Log / Settings server parameters</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">learn.microsoft</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://severalnines.com/blog/how-setup-streaming-replication-high-availability-postgressql-90/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="severalnines.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=severalnines.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">How to Setup Streaming Replication for High Availability with ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">severalnines</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.mydbops.com/blog/master-postgresql-disaster-recovery-backup-restore"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="mydbops.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=mydbops.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Disaster Recovery Guide: Backup, Restore &amp; ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">mydbops</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/current/runtime-config-wal.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL: Documentation: 18: 19.5. Write Ahead Log</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.tigerdata.com/blog/scalable-postgresql-high-availability-read-scalability-streaming-replication-fb95023e2af"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="tigerdata.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=tigerdata.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">High Availability and Scalable Reads in PostgreSQL</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">tigerdata</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.pgedge.com/blog/point-in-time-recovery-pitr-in-postgresql"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="pgedge.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=pgedge.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Point-In-Time Recovery (PITR) in PostgreSQL</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">pgedge</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/current/wal-intro.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Documentation: 18: 28.3. Write-Ahead Logging (WAL)</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.enterprisedb.com/blog/high-availibility-parameters-configuration-streaming-replication-postgresql"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="enterprisedb.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=enterprisedb.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Key Parameters and Configuration for Streaming ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">enterprisedb</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://access.crunchydata.com/documentation/postgres-operator/latest/tutorials/backups-disaster-recovery/disaster-recovery"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="access.crunchydata.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=access.crunchydata.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Disaster Recovery and Cloning</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">access.crunchydata</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://postgrespro.com/docs/postgresql/16/runtime-config-wal"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgrespro.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgrespro.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL : Documentation: 16: 20.5. Write Ahead Log</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgrespro</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.fastware.com/postgresql-insider-ha-str-rep"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="inline-flex items-center justify-center border-subtlest ring-subtlest divide-subtlest bg-subtle" style="width: 16px; height: 16px;"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0 text-quietest relative block" width="20" height="20"><use xlink:href="#pplx-icon-world"></use></svg></div><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">What is streaming replication, and how can I set it up?</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql.fastware</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/8.1/backup-online.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">23.3. On-line backup and point-in-time recovery (PITR)</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://postgrespro.com/blog/pgsql/5967974"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgrespro.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgrespro.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">WAL in PostgreSQL: 4. Setup and Tuning</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgrespro</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.pgedge.com/blog/postgresql-high-availability-strategies-tools-best-practice"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="pgedge.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=pgedge.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Connection Pooling</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">pgedge</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.percona.com/blog/postgresql-backup-strategy-enterprise-grade-environment/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="percona.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=percona.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Backup Strategies for Enterprise-Grade ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">percona</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://docs.postgresql.tw/server-administration/server-configuration/write-ahead-log"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="docs.postgresql.tw favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=docs.postgresql.tw"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">20.5. Write Ahead Log | PostgreSQL 正體中文使用手冊</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">docs.postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/current/high-availability.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Chapter 26. High Availability, Load Balancing, and Replication</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/current/continuous-archiving.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">25.3. Continuous Archiving and Point-in-Time Recovery ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.cloudraft.io/blog/tuning-postgresql-for-write-heavy-workloads"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="cloudraft.io favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=cloudraft.io"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Tuning PostgreSQL for Write Heavy Workloads - CloudRaft</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">cloudraft</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/current/runtime-config-replication.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Documentation: 18: 19.6. Replication</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class="group/goal relative flex overflow-hidden  gap-[7px]" role="listitem" id="6"><div class="flex"><span class="relative flex w-[15px] shrink-0 flex-col items-center"><span class="w-px border-l border-subtler h-[13px] group-first/goal:opacity-0 group-only/goal:opacity-0"></span><div style="transform: none;"><div class="bg-base"><div class="relative"><div class="shrink-0 rounded-full border bg-inverse/25 dark:bg-inverse/20 flex border-transparent" style="width: 7px; height: 7px; backface-visibility: hidden;"></div></div></div></div><span class="w-px border-l border-subtler grow"></span></span></div><div class="min-w-0 grow"><div class="flex flex-col"><span class="flex grow overflow-hidden py-[6px]"><span class="pr-sm block [&amp;_code]:max-h-[300px] [&amp;_code]:overflow-auto font-sans text-sm text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="relative">Исследуя лучшие практики проектирования схем, оптимизации типов данных и нагрузок на запись в PostgreSQL.</div></span></span><div class="pb-md gap-y-sm flex w-full flex-col empty:hidden group-last/goal:pb-0"><div class="mt-1.5 empty:hidden" id="3e7fdcf4-431a-4811-af90-db0d9194634a"><div class="gap-sm group flex cursor-pointer flex-col mb-two" style="opacity: 1;"><div class="flex items-center gap-1 py-1.5 font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span style="animation-duration: 1800ms;" class="">Searching</span></div></div><div class="gap-sm flex flex-wrap"><div class="flex items-center gap-sm flex-wrap"><div class="inline-flex" style="opacity: 1; transform: none;"><div class="py-xs inline-block rounded-lg px-2 border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class="gap-x-xs flex items-center font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0" width="14" height="14"><use xlink:href="#pplx-icon-search"></use></svg><p class="px-two">PostgreSQL schema design normalization denormalization best practices</p></div></div></div><div class="inline-flex" style="opacity: 1; transform: none;"><div class="py-xs inline-block rounded-lg px-2 border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class="gap-x-xs flex items-center font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0" width="14" height="14"><use xlink:href="#pplx-icon-search"></use></svg><p class="px-two">PostgreSQL data types optimization JSON JSONB UUID performance</p></div></div></div><div class="inline-flex" style="opacity: 1; transform: none;"><div class="py-xs inline-block rounded-lg px-2 border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class="gap-x-xs flex items-center font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0" width="14" height="14"><use xlink:href="#pplx-icon-search"></use></svg><p class="px-two">PostgreSQL write-heavy workload optimization bulk insert tuning</p></div></div></div></div></div></div><div class="mt-1.5 empty:hidden" id="6b1de729-ad23-43bb-9d65-b1887b902b07"><div class="gap-sm group flex cursor-pointer flex-col mb-two" style="opacity: 1;"><div class="flex items-center gap-1 py-1.5 font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span style="animation-duration: 1800ms;" class="">Reviewing sources · 17</span></div></div><div class="@container group/step-card relative isolate flex flex-col gap-1.5 overflow-hidden rounded-xl border shadow-sm border-subtlest ring-subtlest divide-subtlest bg-raised dark:bg-offset"><div class="@xs:gap-sm @xs:flex-row flex flex-col gap-0"><div class="flex min-w-0 grow flex-col gap-1.5"><div class="relative border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="flex-col scrollbar-subtle pb-sm relative flex overflow-y-auto pl-3 pr-1 [scrollbar-gutter:stable] pt-sm mask-fade-b-4" style="max-height: 250px;"><div class="flex flex-col gap-px"><div class="mb-sm last:mb-0"><div class="flex items-center flex-col items-start gap-px"><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://chat2db.ai/resources/blog/postgresql-data-types-guide"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="chat2db.ai favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=chat2db.ai"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Data Types: A Practical Guide for Developers</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">chat2db</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://chat2db.ai/resources/blog/normalization-and-denormalization-strategies-in-postgresql-database-modeling-with-sql-commands"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="chat2db.ai favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=chat2db.ai"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Normalization and Denormalization Strategies in ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">chat2db</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://aws.amazon.com/blogs/database/postgresql-as-a-json-database-advanced-patterns-and-best-practices/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="aws.amazon.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=aws.amazon.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL as a JSON database: Advanced patterns and ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">aws.amazon</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.tigerdata.com/blog/13-tips-to-improve-postgresql-insert-performance"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="tigerdata.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=tigerdata.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">13 Tips to Improve PostgreSQL Insert Performance</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">tigerdata</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://blog.bytebytego.com/p/database-schema-design-simplified"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="blog.bytebytego.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=blog.bytebytego.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Database Schema Design Simplified: Normalization vs ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">blog.bytebytego</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.postgresql.org/docs/current/datatype-json.html"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Documentation: 18: 8.14. JSON Types</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.cybertec-postgresql.com/en/bulk-load-performance-in-postgresql/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="cybertec-postgresql.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=cybertec-postgresql.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Bulk load performance in PostgreSQL</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">cybertec-postgresql</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://blog.purestorage.com/purely-technical/denormalized-vs-normalized-data/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="blog.purestorage.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=blog.purestorage.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Denormalized vs. Normalized Data</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">blog.purestorage</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.tigerdata.com/learn/optimizing-your-database-a-deep-dive-into-postgresql-data-types"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="tigerdata.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=tigerdata.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Optimizing Your Database: A Deep Dive into PostgreSQL ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">tigerdata</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://stackoverflow.com/questions/12206600/how-to-speed-up-insertion-performance-in-postgresql"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="stackoverflow.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=stackoverflow.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">How to speed up insertion performance in PostgreSQL</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">stackoverflow</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.tigerdata.com/learn/guide-to-postgresql-database-design"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="tigerdata.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=tigerdata.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Guide to PostgreSQL Database Design</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">tigerdata</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://airbyte.com/data-engineering-resources/postgres-data-types"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="airbyte.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=airbyte.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Data Types: 5 Key Categories Explained</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">airbyte</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.reddit.com/r/PostgreSQL/comments/1jeaqaa/when_designing_databases_whats_a_piece_of/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="reddit.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=reddit.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">When designing databases, what's a piece of hard-earned ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">reddit</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.reddit.com/r/PostgreSQL/comments/mh4hfl/any_good_stats_on_jsonb_vs_normal_column/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="reddit.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=reddit.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Any good stats on jsonb vs "normal column" performance?</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">reddit</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://www.youtube.com/watch?v=t8rAOgDdH1U"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="youtube.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=youtube.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Optimizing Postgres for write heavy workloads ft. ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">youtube</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://towardsdatascience.com/designing-your-database-schema-best-practices-31843dc78a8d/"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="towardsdatascience.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=towardsdatascience.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Designing your database schema - best practices</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">towardsdatascience</span></div></div></a></div><div class="w-full" style="opacity: 1; transform: none;"><a class="-ml-xs block" rel="noopener nofollow" target="_blank" href="https://stackoverflow.com/questions/65820380/improving-performance-of-postgres-jsonb-queries-combined-with-relational-queries"><div class="hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5"><div class="mt-two shrink-0 font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex size-4 items-center justify-center"><div style="width: 16px; height: 16px;" class="relative shrink-0 overflow-hidden rounded-full"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="stackoverflow.com favicon" width="16" height="16" style="width: 16px; height: 16px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=stackoverflow.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="gap-sm flex min-w-0 flex-1 items-start"><div class="flex min-w-0 flex-1 flex-col"><span class="min-w-0 shrink truncate break-words font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Improving performance of Postgres jsonb queries ...</span></div><span class="overflow-wrap-anywhere mt-px break-words text-right lowercase font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">stackoverflow</span></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class="group/goal relative flex overflow-hidden  gap-[7px]" role="listitem" id="7"><div class="flex"><span class="relative flex w-[15px] shrink-0 flex-col items-center"><span class="w-px border-l border-subtler h-[13px] group-first/goal:opacity-0 group-only/goal:opacity-0"></span><div style="transform: none;"><div class="bg-base"><div class="relative"><div class="shrink-0 rounded-full border bg-inverse/25 dark:bg-inverse/20 flex border-transparent" style="width: 7px; height: 7px; backface-visibility: hidden;"></div></div></div></div><span class="w-px border-l border-subtler grow"></span></span></div><div class="min-w-0 grow"><div class="flex flex-col"><span class="flex grow overflow-hidden py-[6px]"><span class="pr-sm block [&amp;_code]:max-h-[300px] [&amp;_code]:overflow-auto font-sans text-sm text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="relative">Создавая таблицу справочных параметров конфигурации PostgreSQL для оптимизации по размерам серверов.</div></span></span><div class="pb-md gap-y-sm flex w-full flex-col empty:hidden group-last/goal:pb-0"><div class="mt-1.5 empty:hidden" id="57c027d6-813f-44fa-9b4d-43f04bb6e98b"><div class="gap-sm group flex cursor-pointer flex-col mb-two" style="opacity: 1;"><div class="flex items-center gap-1 py-1.5 font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span style="animation-duration: 1800ms;" class="">Creating chart</span></div></div><div class="!text-[0.68rem] font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Configuration Parameters by Server Size</div></div><div class="mt-1.5 empty:hidden" id="37eab10c-38c4-4287-a760-1e36935e0165"><div class="gap-sm my-sm flex flex-row flex-wrap"><div class="flex w-fit items-center rounded-lg p-1.5 border-subtlest ring-subtlest divide-subtlest bg-subtler" role="button" tabindex="0"><div class="m-1 flex size-8 items-center justify-center rounded-md p-2 border-subtlest ring-subtlest divide-subtlest bg-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0 text-inverse" width="18" height="18"><use xlink:href="#pplx-icon-code"></use></svg></div><div class="flex flex-col gap-0.5 px-2"><div class="!font-display !text-[0.8125rem] font-medium font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Python</div><div class="!font-display !text-[0.6875rem] leading-none font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Programming</div></div></div><div class="flex w-fit items-center rounded-lg p-1.5 border-subtlest ring-subtlest divide-subtlest bg-subtler" role="button" tabindex="0"><div class="m-1 flex size-8 items-center justify-center rounded-md p-2 border-subtlest ring-subtlest divide-subtlest bg-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0 text-inverse" width="18" height="18"><use xlink:href="#pplx-icon-chart-histogram"></use></svg></div><div class="flex flex-col gap-0.5 px-2"><div class="!font-display !text-[0.8125rem] font-medium font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Chart</div><div class="!font-display !text-[0.6875rem] leading-none font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Code Interpreter Graph</div></div></div></div></div></div></div></div></div><div class="group/goal relative flex overflow-hidden  gap-[7px]" role="listitem" id="8"><div class="flex"><span class="relative flex w-[15px] shrink-0 flex-col items-center"><span class="w-px border-l border-subtler h-[13px] group-first/goal:opacity-0 group-only/goal:opacity-0"></span><div style="transform: none;"><div class="bg-base"><div class="relative"><div class="shrink-0 rounded-full border bg-inverse/25 dark:bg-inverse/20 flex border-transparent" style="width: 7px; height: 7px; backface-visibility: hidden;"></div></div></div></div><span class="w-px border-l border-subtler grow"></span></span></div><div class="min-w-0 grow"><div class="flex flex-col"><span class="flex grow overflow-hidden py-[6px]"><span class="pr-sm block [&amp;_code]:max-h-[300px] [&amp;_code]:overflow-auto font-sans text-sm text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="relative">Создавая блок-схему методологии оптимизации запросов PostgreSQL с диагностикой через pg_stat_statements и EXPLAIN ANALYZE.</div></span></span><div class="pb-md gap-y-sm flex w-full flex-col empty:hidden group-last/goal:pb-0"><div class="mt-1.5 empty:hidden" id="d42cc2c4-ba84-4253-baa0-436c085cc4d6"><div class="gap-sm group flex cursor-pointer flex-col mb-two" style="opacity: 1;"><div class="flex items-center gap-1 py-1.5 font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span style="animation-duration: 1800ms;" class="">Creating chart</span></div></div><div class="!text-[0.68rem] font-sans text-xs font-normal text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Query Optimization Decision Tree</div></div><div class="mt-1.5 empty:hidden" id="0c90cd4a-45ca-4773-b9b9-707dd63df39d"><div class="gap-sm my-sm flex flex-row flex-wrap"><div class="flex w-fit items-center rounded-lg p-1.5 border-subtlest ring-subtlest divide-subtlest bg-subtler" role="button" tabindex="0"><div class="m-1 flex size-8 items-center justify-center rounded-md p-2 border-subtlest ring-subtlest divide-subtlest bg-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0 text-inverse" width="18" height="18"><use xlink:href="#pplx-icon-code"></use></svg></div><div class="flex flex-col gap-0.5 px-2"><div class="!font-display !text-[0.8125rem] font-medium font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Python</div><div class="!font-display !text-[0.6875rem] leading-none font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Programming</div></div></div><div class="flex w-fit items-center rounded-lg p-1.5 border-subtlest ring-subtlest divide-subtlest bg-subtler" role="button" tabindex="0"><div class="m-1 flex size-8 items-center justify-center rounded-md p-2 border-subtlest ring-subtlest divide-subtlest bg-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0 text-inverse" width="18" height="18"><use xlink:href="#pplx-icon-chart-histogram"></use></svg></div><div class="flex flex-col gap-0.5 px-2"><div class="!font-display !text-[0.8125rem] font-medium font-sans text-sm text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Chart</div><div class="!font-display !text-[0.6875rem] leading-none font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Code Interpreter Graph</div></div></div></div></div></div></div></div></div><div class="group/goal relative flex overflow-hidden  gap-[7px]" role="listitem" id="final-goal"><div class="flex"><span class="relative flex w-[15px] shrink-0 flex-col items-center"><span class="w-px border-l border-subtler h-[13px] group-first/goal:opacity-0 group-only/goal:opacity-0"></span><div style="transform: none;"><div class="bg-base"><div class="relative"><div class="shrink-0 rounded-full border bg-inverse/25 dark:bg-inverse/20 flex border-transparent" style="width: 7px; height: 7px; backface-visibility: hidden;"></div></div></div></div></span></div><div class="min-w-0 grow"><div class="flex flex-col"><span class="flex grow overflow-hidden py-[6px]"><span class="pr-sm block [&amp;_code]:max-h-[300px] [&amp;_code]:overflow-auto font-sans text-sm text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="relative">Finished</div></span></span></div></div></div><div class="-mx-lg from-base to-base/0 absolute bottom-0 z-20 h-3 w-full bg-gradient-to-t"></div></div></div></div><div class="relative font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto" id="markdown-content-0" class="gap-y-md after:clear-both after:block after:content-['']"><div class="mb-4 mt-5 first:mt-1"><div class="-mx-md scrollbar-none relative flex flex-col overflow-x-auto md:-mx-0 md:overflow-visible"><div class="gap-sm px-md flex md:grid md:px-0 md:grid-cols-2"><div class="last:pr-md w-2/3 shrink-0 md:w-auto md:last:pr-0"><div class="shadow-subtle p-sm duration-quick group relative flex w-full items-center gap-[10px] overflow-hidden rounded-xl border md:gap-[12px] md:p-[12px] border-subtlest ring-subtlest divide-subtlest transition duration-normal bg-raised dark:bg-offset md:hover:!bg-subtler"><div class="flex size-10 shrink-0 items-center justify-center rounded-md md:size-12 md:rounded-full md:size-10 md:rounded-md border-subtlest ring-subtlest divide-subtlest bg-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0 text-inverse" width="18" height="18"><use xlink:href="#pplx-icon-chart-histogram"></use></svg></div><div class="flex min-w-0 flex-col gap-0.5"><div class="line-clamp-1 leading-tight md:line-clamp-2 font-sans text-sm font-medium text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super" data-testid="asset-card-title">Chart</div><div class="leading-tight font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Code Interpreter Graph</div></div><button class="absolute inset-0 cursor-pointer appearance-none" data-testid="asset-card-open-button"></button></div></div><div class="last:pr-md w-2/3 shrink-0 md:w-auto md:last:pr-0"><div class="shadow-subtle p-sm duration-quick group relative flex w-full items-center gap-[10px] overflow-hidden rounded-xl border md:gap-[12px] md:p-[12px] border-subtlest ring-subtlest divide-subtlest transition duration-normal bg-raised dark:bg-offset md:hover:!bg-subtler"><div class="flex size-10 shrink-0 items-center justify-center rounded-md md:size-12 md:rounded-full md:size-10 md:rounded-md border-subtlest ring-subtlest divide-subtlest bg-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0 text-inverse" width="18" height="18"><use xlink:href="#pplx-icon-chart-histogram"></use></svg></div><div class="flex min-w-0 flex-col gap-0.5"><div class="line-clamp-1 leading-tight md:line-clamp-2 font-sans text-sm font-medium text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super" data-testid="asset-card-title">Chart</div><div class="leading-tight font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Code Interpreter Graph</div></div><button class="absolute inset-0 cursor-pointer appearance-none" data-testid="asset-card-open-button"></button></div></div></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Excellent. Now I have all the research complete with comprehensive coverage and visualizations. Let me compose the final professional report.</p>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0 md:text-lg [hr+&amp;]:mt-4" id="postgresql">Комплексное руководство по администрированию и оптимизации PostgreSQL</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostgreSQL представляет собой мощную открытую объектно-реляционную базу данных, требующую систематического подхода к администрированию, оптимизации и обслуживанию. Успешное управление PostgreSQL требует глубокого понимания трех взаимосвязанных областей: конфигурационной настройки параметров, оптимизации запросов и стратегической архитектуры данных.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Стратегическая конфигурация памяти и ресурсов</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Правильная настройка параметров памяти является фундаментом производительности PostgreSQL и должна базироваться на характеристиках выделенного оборудования. Основной параметр <code>shared_buffers</code> определяет размер буфера памяти для кеширования страниц диска. Оптимальное значение находится на уровне 25% от общей памяти сервера и не должно превышать 40%, так как превышение этого порога приводит к снижению производительности из-за накладных расходов на управление буфером.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.instaclustr.com/education/postgresql/top-10-postgresql-best-practices-for-2025/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">instaclustr</span></span></span></a></span>​</p></div></div></div><div class="first:-mt-sm mb-4 mt-5 overflow-hidden border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="relative rounded-xl group relative w-full overflow-hidden border-subtlest ring-subtlest divide-subtlest bg-raised dark:bg-offset" style="aspect-ratio: 1.5 / 1;"><div class="rounded-inherit pointer-events-none absolute inset-0 z-[1] border border-[black]/5 dark:border-[white]/5"></div><div class="absolute right-4 top-4 z-10 opacity-0 transition-opacity duration-300 group-hover:opacity-100 !opacity-100"><span><button type="button" class="focus-visible:bg-subtle text-quiet  cursor-default bg-black/30 !text-white backdrop-blur-sm font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-xs h-6 aspect-square"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-3.5"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-dots"></use></svg></div></div></button></span></div><div class="size-full"><div class="bg-subtler group relative size-full overflow-hidden size-full [&amp;&gt;img]:max-h-[unset] !bg-underlay rounded-md"><img alt="PostgreSQL Configuration Parameters by Server Size" class="size-full object-cover transition-all ease-in-out max-h-[90vh] cursor-zoom-in hover:shadow-lg duration-200 " draggable="true" src="https://ppl-ai-code-interpreter-files.s3.amazonaws.com/web/direct-files/bf60a5a5b6c93dcfe0f5af3a42421a83/8d275825-5e15-450b-8ae6-eabc447c60c7/6ecb0f73.png?AWSAccessKeyId=ASIA2F3EMEYEXTR5YF3Q&amp;Signature=JvGvMyeK9S1U%2Bvjmovk9kuOyXIc%3D&amp;x-amz-security-token=IQoJb3JpZ2luX2VjEK3%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLWVhc3QtMSJHMEUCIQDiDGDmHTG%2Fd8F3bK4%2Fk0L6vjvfDFMxxbOiLuxL62KbswIgEQjJ89pvGK9IMl4zbXOBmqTG0LwtnBAkP4PWrNWLWDUq8wQIdhABGgw2OTk3NTMzMDk3MDUiDDbLacTy%2B5PaTHKAjSrQBM3kclKPGfTODYcKSlv28%2BYKbsB2Qgwq6XfWfuL0slfVrIchoI8DkQT0XX8ejm%2FS%2FxyPA4VA0K2boX2MdR1Vd%2BR4i2WvzxrFpmvuA%2FiZ64bXPlS%2FblqXcDnBVLuBt7UApvZO4jR9wKxIEbj2qL7Oj3Z4fn148Mrm6xYT%2FOzUaWpMSaEtTbAx1Lzxa1JTXo44FvUEx09p1Qn023JMFD5cjNNnqPvTKPQWtOd6T8QupyPel6CumLhaWId9dCXk4NVCRibWN%2FI%2F4Cf4LiiNN08qwkm%2BwwrYxo249brEL6OvtEyS0Wej4BiIdkmSFzRhqLPvx8QwGHPzAOwwYRkCVXgiiUnI%2BQEti3sa4Th%2B9itT1h1IFl58mvhCpWrbV31dkrKcwSuhY7FqLp6fi2032wSUgQDIGGsnggR%2Fs%2B86BsafUoFD75e5mo9k59iNH9vxMjOcHaHzhCOIOwhcFhRiMH5XL%2BYqaKXaMIYi1cQQQB2vUsDpaK0%2F1wQaYg%2FRPbAqlcGPtaqlmVnzr3sSoH88pXrylSv7EElknAEXYFDE8dAe0BNe3hvvtyzIuCYtci%2FqwopnGPfnnGy1rpbMiHCYyPiBkp6IrjPuCKJxrldhICYjwJqM%2FOXMTkjuGIuBsysxdE9exNMThiHVueqmO3fVEcSuJRFkyEukj7%2B5wQrHJ5u6onAio7B20s4QYvISkRcaZE396VcrAPyeiR%2F4crRQBjpdvRJhKJXOzSDV4K%2FaxkmweqhsU6kytYq2%2Ba3t910A2mSxe%2BetlbKZhJZ%2B0MqZDgeQpIowp6z5ygY6mAFYlr30dRxuH38%2Bqu6bcHeXJ5D0Enj0eA%2BfBQxoPMZSC%2FWldGn3aqLel2lKkBLS3CrZevZ8y9nQJSxPX8KpuxXgr4AobV5KZNZrzHyu1XmRc4gKCc0Ot1RkEe78Gq8grc6MKoqiDN9z%2BTJA9UiATTqrcXLF%2B1XV2Un3TUzMZg6IIyBGKLzAemaGRDoGF9ss6D1%2FUwSnlBwVkQ%3D%3D&amp;Expires=1767792820"></div></div></div><div class="pt-sm leading-tight"><span><span class="font-sans text-sm text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Configuration Parameters by Server Size<span class="inline-block translate-y-px">&nbsp;<a rel="noopener" class="inline" target="_blank" href="https://ppl-ai-code-interpreter-files.s3.amazonaws.com/web/direct-files/bf60a5a5b6c93dcfe0f5af3a42421a83/8d275825-5e15-450b-8ae6-eabc447c60c7/6ecb0f73.png"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="-mt-px inline-block align-middle mr-xs"><img alt="" class="m-0 size-3 rounded-sm" src="https://www.google.com/s2/favicons?sz=32&amp;domain=perplexity.ai"></span><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">perplexity</span></span></span></a></span></span></span></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>effective_cache_size</code> указывает планировщику запросов общий объём дисковых кешей, доступных в операционной системе, и должен быть установлен на уровне 75% от общей памяти для выделенного сервера БД. Этот параметр критичен для правильного выбора планом запроса между использованием индексов и полных сканирований таблиц.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">instaclustr</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>work_mem</code> определяет объём памяти, доступный каждой операции сортировки и хеширования. Оптимальное значение рассчитывается по формуле: (общая_память × 0.75) / максимальное_количество_одновременных_соединений. Для OLTP-систем с высокой конкурентностью рекомендуется значение 4–16 МБ на операцию.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">instaclustr</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>maintenance_work_mem</code> выделяет память для операций обслуживания (VACUUM, CREATE INDEX, REINDEX). Общее руководство предполагает 50 МБ на каждый 1 ГБ оперативной памяти, но может быть увеличено до 2–4 ГБ для крупных серверов с интенсивными операциями обслуживания.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://learn.microsoft.com/en-us/azure/postgresql/flexible-server/how-to-autovacuum-tuning"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">learn.microsoft</span></span></span></a></span>​</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Оптимизация параметров Write-Ahead Logging (WAL)</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">WAL является критической системой для обеспечения надёжности данных и совместимости с потоковой репликацией. Параметр <code>wal_level</code> должен быть установлен на 'replica' для стандартной конфигурации с резервными серверами или на 'logical' для логической репликации.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://learn.microsoft.com/en-us/azure/postgresql/flexible-server/param-write-ahead-log-settings"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">learn.microsoft</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Параметры <code>min_wal_size</code> и <code>max_wal_size</code> контролируют контрольные точки (checkpoints). Оптимальные значения зависят от характера рабочей нагрузки: <code>min_wal_size</code> рекомендуется устанавливать на 1–4 ГБ, а <code>max_wal_size</code> на 4–32 ГБ в зависимости от размера сервера. Более крупные значения <code>max_wal_size</code> снижают частоту контрольных точек, уменьшая нагрузку на ввод-вывод, но требуют больше дискового пространства.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.instaclustr.com/education/postgresql/top-10-postgresql-best-practices-for-2025/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">instaclustr</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>wal_buffers</code> определяет размер буфера WAL в памяти. Значение по умолчанию -1 (автоматическая настройка) обычно работает хорошо, но для высоконагруженных OLTP-систем может быть явно установлено на 16–64 МБ.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.crunchydata.com/blog/optimize-postgresql-server-performance"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">crunchydata</span></span></span></a></span>​</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Стратегическое управление автоматической очисткой (Autovacuum)</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Autovacuum — это критический фоновый процесс, удаляющий мёртвые кортежи и обновляющий статистику таблиц. Неправильная конфигурация приводит к деградации производительности и вздуванию таблиц.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Параметр <code>autovacuum_naptime</code> определяет интервал между проверками autovacuum. Рекомендуемые значения варьируются от 5 секунд на высоконагруженных серверах до 10 секунд на менее загруженных системах. На серверах с несколькими базами данных можно увеличить значение, если это необходимо.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.mydbops.com/blog/postgresql-parameter-tuning-best-practices"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">mydbops</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>autovacuum_vacuum_cost_delay</code> (в миллисекундах) контролирует темп работы autovacuum. Значение 2 мс по умолчанию является консервативным и позволяет autovacuum работать в фоне без значительного влияния на основные операции. Для высоконагруженных систем рекомендуется уменьшение до 0 (максимальная скорость) или увеличение <code>autovacuum_vacuum_cost_limit</code> с 200 до 500–5000 в зависимости от интенсивности обновлений.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">cybertec-postgresql</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Критический параметр <code>autovacuum_analyze_scale_factor</code> (по умолчанию 0.1) определяет порог анализа таблиц. Для таблиц с высоким числом обновлений рекомендуется снижение этого значения или использование таблиц-специфичных настроек:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> busy_table </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token punctuation">(</span><span>autovacuum_vacuum_cost_delay </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> busy_table </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token punctuation">(</span><span>autovacuum_vacuum_scale_factor </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.01</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Для таблиц, которые получают только INSERT (append-only), в PostgreSQL 13+ можно использовать <code>autovacuum_vacuum_insert_scale_factor</code> для более агрессивного запуска autovacuum при вставках.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.cybertec-postgresql.com/en/tuning-autovacuum-postgresql/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">cybertec-postgresql</span></span></span></a></span>​</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Оптимизация запросов и планирование выполнения</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">EXPLAIN ANALYZE является незаменимым инструментом для диагностики производительности запросов. Он не только показывает предполагаемый план выполнения, но и выполняет запрос, предоставляя фактическую статистику:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">leapcell</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">EXPLAIN</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ANALYZE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> orders 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> customer_id </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">42</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token operator">AND</span><span> created_at </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'2024-01-01'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">При интерпретации вывода EXPLAIN необходимо обратить внимание на следующие признаки неоптимальности:</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Seq Scan (полное сканирование таблицы)</strong> вместо Index Scan обычно указывает на необходимость добавления индекса на столбцы в предложении WHERE.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Большое расхождение между estimated rows и actual rows</strong> часто указывает на устаревшую статистику — требуется запуск ANALYZE.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Nested Loop с высоким значением loops</strong> может указывать на коррелированные подзапросы, которые лучше переписать как JOIN.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Параллельный запрос с недостаточным количеством workers</strong> предполагает необходимость настройки параметров параллелизма (<code>max_parallel_workers_per_gather</code>, <code>max_parallel_workers</code>).<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.percona.com/blog/tuning-postgresql-database-parameters-to-optimize-performance/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">percona</span></span></span></a></span>​</p></div></div></div><div class="first:-mt-sm mb-4 mt-5 overflow-hidden border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="relative rounded-xl group relative w-full overflow-hidden border-subtlest ring-subtlest divide-subtlest bg-raised dark:bg-offset" style="aspect-ratio: 1.5 / 1;"><div class="rounded-inherit pointer-events-none absolute inset-0 z-[1] border border-[black]/5 dark:border-[white]/5"></div><div class="absolute right-4 top-4 z-10 opacity-0 transition-opacity duration-300 group-hover:opacity-100 !opacity-100"><span><button type="button" class="focus-visible:bg-subtle text-quiet  cursor-default bg-black/30 !text-white backdrop-blur-sm font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-xs h-6 aspect-square"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-3.5"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-dots"></use></svg></div></div></button></span></div><div class="size-full"><div class="bg-subtler group relative size-full overflow-hidden size-full [&amp;&gt;img]:max-h-[unset] !bg-underlay rounded-md"><img alt="PostgreSQL Query Optimization Decision Tree" class="size-full object-cover transition-all ease-in-out max-h-[90vh] cursor-zoom-in hover:shadow-lg duration-200 " draggable="true" src="https://ppl-ai-code-interpreter-files.s3.amazonaws.com/web/direct-files/bf60a5a5b6c93dcfe0f5af3a42421a83/62acd091-4c44-49b0-bd99-a53727322984/04220b8c.png?AWSAccessKeyId=ASIA2F3EMEYEXTR5YF3Q&amp;Signature=8%2BZXyPfp%2F9TuJToJ7pmeeIGLhLI%3D&amp;x-amz-security-token=IQoJb3JpZ2luX2VjEK3%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLWVhc3QtMSJHMEUCIQDiDGDmHTG%2Fd8F3bK4%2Fk0L6vjvfDFMxxbOiLuxL62KbswIgEQjJ89pvGK9IMl4zbXOBmqTG0LwtnBAkP4PWrNWLWDUq8wQIdhABGgw2OTk3NTMzMDk3MDUiDDbLacTy%2B5PaTHKAjSrQBM3kclKPGfTODYcKSlv28%2BYKbsB2Qgwq6XfWfuL0slfVrIchoI8DkQT0XX8ejm%2FS%2FxyPA4VA0K2boX2MdR1Vd%2BR4i2WvzxrFpmvuA%2FiZ64bXPlS%2FblqXcDnBVLuBt7UApvZO4jR9wKxIEbj2qL7Oj3Z4fn148Mrm6xYT%2FOzUaWpMSaEtTbAx1Lzxa1JTXo44FvUEx09p1Qn023JMFD5cjNNnqPvTKPQWtOd6T8QupyPel6CumLhaWId9dCXk4NVCRibWN%2FI%2F4Cf4LiiNN08qwkm%2BwwrYxo249brEL6OvtEyS0Wej4BiIdkmSFzRhqLPvx8QwGHPzAOwwYRkCVXgiiUnI%2BQEti3sa4Th%2B9itT1h1IFl58mvhCpWrbV31dkrKcwSuhY7FqLp6fi2032wSUgQDIGGsnggR%2Fs%2B86BsafUoFD75e5mo9k59iNH9vxMjOcHaHzhCOIOwhcFhRiMH5XL%2BYqaKXaMIYi1cQQQB2vUsDpaK0%2F1wQaYg%2FRPbAqlcGPtaqlmVnzr3sSoH88pXrylSv7EElknAEXYFDE8dAe0BNe3hvvtyzIuCYtci%2FqwopnGPfnnGy1rpbMiHCYyPiBkp6IrjPuCKJxrldhICYjwJqM%2FOXMTkjuGIuBsysxdE9exNMThiHVueqmO3fVEcSuJRFkyEukj7%2B5wQrHJ5u6onAio7B20s4QYvISkRcaZE396VcrAPyeiR%2F4crRQBjpdvRJhKJXOzSDV4K%2FaxkmweqhsU6kytYq2%2Ba3t910A2mSxe%2BetlbKZhJZ%2B0MqZDgeQpIowp6z5ygY6mAFYlr30dRxuH38%2Bqu6bcHeXJ5D0Enj0eA%2BfBQxoPMZSC%2FWldGn3aqLel2lKkBLS3CrZevZ8y9nQJSxPX8KpuxXgr4AobV5KZNZrzHyu1XmRc4gKCc0Ot1RkEe78Gq8grc6MKoqiDN9z%2BTJA9UiATTqrcXLF%2B1XV2Un3TUzMZg6IIyBGKLzAemaGRDoGF9ss6D1%2FUwSnlBwVkQ%3D%3D&amp;Expires=1767792810"></div></div></div><div class="pt-sm leading-tight"><span><span class="font-sans text-sm text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL Query Optimization Decision Tree<span class="inline-block translate-y-px">&nbsp;<a rel="noopener" class="inline" target="_blank" href="https://ppl-ai-code-interpreter-files.s3.amazonaws.com/web/direct-files/bf60a5a5b6c93dcfe0f5af3a42421a83/62acd091-4c44-49b0-bd99-a53727322984/04220b8c.png"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="-mt-px inline-block align-middle mr-xs"><img alt="" class="m-0 size-3 rounded-sm" src="https://www.google.com/s2/favicons?sz=32&amp;domain=perplexity.ai"></span><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">perplexity</span></span></span></a></span></span></span></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Основные стратегии оптимизации запросов включают:</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Избегание коррелированных подзапросов</strong>: коррелированные подзапросы выполняются один раз для каждой строки внешнего запроса, что может привести к экспоненциальному росту времени выполнения. Переписание с использованием JOIN или EXISTS обычно значительно быстрее.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.geekytidbits.com/performance-tuning-postgres/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">geekytidbits</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Оптимизация JOIN-операций</strong>: убедитесь, что столбцы в условиях JOIN индексированы, и используйте INNER JOIN вместо OUTER JOIN где возможно. На больших таблицах Hash Join и Merge Join обычно масштабируются лучше, чем Nested Loop.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.enginelabs.ai/blog/optimize-postgres-query-performance-using-explain-analyze-a-comprehensive-guide"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">enginelabs</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Сокращение наборов результатов</strong>: использование LIMIT и более узких предложений WHERE снижает нагрузку на сеть и память. Избегайте SELECT *, выбирайте только необходимые столбцы.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.instaclustr.com/education/postgresql/postgresql-tuning-6-things-you-can-do-to-improve-db-performance/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">instaclustr</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Избегание операций, вызывающих высокие затраты</strong>: ORDER BY, DISTINCT, GROUP BY и UNION требуют сортировки или агрегирования всех результатов. Их следует избегать или минимизировать когда возможно.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.geekytidbits.com/performance-tuning-postgres/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">geekytidbits</span></span></span></a></span>​</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Стратегическое индексирование</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Индексы — это наиболее мощный инструмент оптимизации производительности, но также и наиболее часто неправильно используемый. Избыточное индексирование замедляет операции записи и увеличивает объём диска.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.bairesdev.com/blog/postgresql-performance-optimization/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">bairesdev</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>B-tree индексы</strong> являются общеценовыми и должны использоваться для большинства столбцов в предложениях WHERE, JOIN и ORDER BY. Для многостолбцовых индексов критичен порядок столбцов: первые столбцы должны соответствовать наиболее селективному условию в типичных запросах.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>BRIN индексы (Block Range Indexes)</strong> идеальны для больших таблиц с последовательно упорядоченными данными, особенно для данных временных рядов. BRIN требует значительно меньше дискового пространства и быстрее создаётся, чем B-tree, но менее селективен.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgedge</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>GIN индексы (Generalized Inverted Indexes)</strong> оптимальны для полнотекстового поиска, массивов и JSONB содержимого. GIN поддерживает операторы <code>@&gt;</code> (contains) и <code>&lt;@</code> (contained by) для JSONB запросов.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://aws.amazon.com/blogs/database/postgresql-as-a-json-database-advanced-patterns-and-best-practices/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">aws.amazon</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Partial индексы</strong> индексируют только подмножество строк, удовлетворяющих предложению WHERE, что существенно снижает размер индекса и ускоряет создание:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_active_orders </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> orders</span><span class="token token punctuation">(</span><span>customer_id</span><span class="token token punctuation">)</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'active'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Регулярный аудит использования индексов</strong> должен выполняться для выявления неиспользуемых или редко используемых индексов:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> schemaname</span><span class="token token punctuation">,</span><span> relname</span><span class="token token punctuation">,</span><span> indexrelname</span><span class="token token punctuation">,</span><span> idx_scan
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_stat_user_indexes
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> idx_scan </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Неиспользуемые индексы следует удалять, так как они замедляют запись без предоставления выгод при чтении.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">percona</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Мониторинг и диагностика производительности</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>pg_stat_statements</code> — это критическое расширение для идентификации медленных запросов и выявления закономерностей в производительности. Оно нормализует запросы, заменяя литеральные значения на заполнители, что позволяет агрегировать статистику идентичных запросов:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">datasentinel</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> query</span><span class="token token punctuation">,</span><span> calls</span><span class="token token punctuation">,</span><span> mean_exec_time</span><span class="token token punctuation">,</span><span> max_exec_time</span><span class="token token punctuation">,</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>       stddev_exec_time</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">rows</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_stat_statements
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> mean_exec_time </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DESC</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">20</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Крайне важно отслеживать коэффициент попадания кеша на уровне буфера:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">sum</span><span class="token token punctuation">(</span><span>heap_blks_hit</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">/</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(197, 200, 198);">sum</span><span class="token token punctuation">(</span><span>heap_blks_hit</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">+</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">sum</span><span class="token token punctuation">(</span><span>heap_blks_read</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>       </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">AS</span><span> cache_hit_ratio
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_statio_user_tables</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Коэффициент попадания 99% указывает на хорошее выделение памяти. Значения ниже 90% предполагают необходимость увеличения <code>shared_buffers</code> или <code>effective_cache_size</code>.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.mssqltips.com/sqlservertip/8295/postgresql-monitoring-with-pg-stat-statements/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">mssqltips</span></span></span></a></span>​</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Управление подключениями и connection pooling</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Прямое управление подключениями к PostgreSQL неэффективно, когда количество клиентов превышает несколько дюжин. Каждое подключение потребляет память и системные ресурсы, создавая узкое место.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://pgdash.io/blog/pgbouncer-connection-pool.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgdash</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>PgBouncer</strong> — это лёгкий инструмент pooling, который реализует три режима управления подключениями:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">learn.microsoft</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Session pooling</strong> (режим по умолчанию) назначает серверное подключение клиентскому приложению на всю продолжительность его подключения. Это обеспечивает полную совместимость с приложениями, но менее эффективно при высоком количестве клиентов.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Transaction pooling</strong> переиспользует подключения на уровне транзакций, что значительно снижает потребление ресурсов на сервере БД. Это требует соблюдения ограничений, таких как отсутствие сессионных команд (SET, PREPARE) внутри транзакций.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Statement pooling</strong> переиспользует подключения на уровне отдельных SQL-выражений, но имеет ограничения для multi-statement транзакций.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Оптимальный размер пула рассчитывается как:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>pool_size = (количество_ядер_БД * 2) + ram_в_гб
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">На сервере с 8 ядрами и 32 ГБ ОЗУ это даст: (8 × 2) + 32 = 48 подключений.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://pgdash.io/blog/pgbouncer-connection-pool.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgdash</span></span></span></a></span>​</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Секционирование больших таблиц</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Секционирование (partitioning) логически разделяет большую таблицу на несколько физических частей, обеспечивая dramатическое улучшение производительности запросов при правильной реализации.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/current/ddl-partitioning.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Range partitioning</strong> идеален для данных временных рядов или последовательно упорядоченных данных:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> orders </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id BIGSERIAL </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PRIMARY</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">KEY</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    customer_id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INTEGER</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    order_date </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DATE</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    amount </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">NUMERIC</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PARTITION</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> RANGE </span><span class="token token punctuation">(</span><span>order_date</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> orders_2024_q1 </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PARTITION</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">OF</span><span> orders
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FOR</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VALUES</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'2024-01-01'</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TO</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'2024-04-01'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Преимущества: быстрое удаление старых данных через DROP PARTITION вместо DELETE, улучшенное использование индексов из-за сокращения диапазона данных, параллельный vacuum для нескольких партиций.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>List partitioning</strong> разделяет данные по дискретным значениям (страны, регионы, категории):</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> customer_data </span><span class="token token punctuation">(</span><span>id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INTEGER</span><span class="token token punctuation">,</span><span> country </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">data</span><span> JSONB</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PARTITION</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> LIST </span><span class="token token punctuation">(</span><span>country</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> customer_data_us </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PARTITION</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">OF</span><span> customer_data
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FOR</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VALUES</span><span> </span><span class="token token operator">IN</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'US'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'CA'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'MX'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Hash partitioning</strong> распределяет данные равномерно по фиксированному количеству партиций, полезно при отсутствии естественного ключа секционирования.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Критическим моментом является выбор оптимального количества партиций. PostgreSQL может обрабатывать тысячи партиций, но время планирования запросов возрастает линейно с их количеством. Общее руководство: 100–1000 партиций в зависимости от размера и паттернов доступа.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">vishalgarg</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Дизайн схемы данных и выбор типов данных</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Нормализация остаётся основой для OLTP-систем, обеспечивая целостность данных и минимизируя избыточность. Однако современный подход рекомендует прагматичный баланс между нормализацией (для целостности) и денормализацией (для производительности).<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">chat2db</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Гибридный подход</strong>: начните с нормализации, затем денормализуйте на основе профиля запросов. Например, денормализуйте часто запрашиваемые агрегаты в отдельные столбцы или используйте материализованные представления для сложных вычислений.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://chat2db.ai/resources/blog/normalization-and-denormalization-strategies-in-postgresql-database-modeling-with-sql-commands"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">chat2db</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>JSONB для полугруктурированных данных</strong>: JSONB является не просто альтернативой нормализации, а инструментом для гибкого представления данных. Храните часто запрашиваемые поля в регулярных столбцах, переменные данные — в JSONB:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://aws.amazon.com/blogs/database/postgresql-as-a-json-database-advanced-patterns-and-best-practices/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">aws.amazon</span></span></span></a></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> users </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SERIAL</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PRIMARY</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">KEY</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    email </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VARCHAR</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- часто запрашиваемое</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    name </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VARCHAR</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>   </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- часто запрашиваемое</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    metadata JSONB       </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- редко используемые поля</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_metadata_gin </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> users </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> GIN </span><span class="token token punctuation">(</span><span>metadata</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Для JSONB запросов используйте <code>jsonb_path_ops</code> GIN индекс для простых операций содержания, так как он компактнее и быстрее, чем стандартный <code>jsonb_ops</code>.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>UUID vs SERIAL для первичных ключей</strong>: SERIAL (4 байта) более компактен и быстр для локальных систем, но UUID (16 байт) обеспечивает глобальную уникальность и предпочтителен для распределённых систем и систем с горизонтальным масштабированием.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://chat2db.ai/resources/blog/postgresql-data-types-guide"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">chat2db</span></span></span></a></span>​</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Оптимизация операций записи</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Для таблиц с высокой интенсивностью вставок следует применять специализированные стратегии.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Batch inserts</strong>: вместо вставки строк по одной:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Неоптимально</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INSERT</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INTO</span><span> logs </span><span class="token token punctuation">(</span><span>id</span><span class="token token punctuation">,</span><span> message</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VALUES</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'msg1'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INSERT</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INTO</span><span> logs </span><span class="token token punctuation">(</span><span>id</span><span class="token token punctuation">,</span><span> message</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VALUES</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'msg2'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Оптимально</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INSERT</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INTO</span><span> logs </span><span class="token token punctuation">(</span><span>id</span><span class="token token punctuation">,</span><span> message</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VALUES</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'msg1'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'msg2'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">3</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'msg3'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">.</span><span class="token token punctuation">.</span><span class="token token punctuation">.</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">1000</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'msg1000'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Batch-вставка сотен или тысяч строк за раз снижает накладные расходы на управление подключением и парсинг SQL.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.tigerdata.com/blog/13-tips-to-improve-postgresql-insert-performance"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">tigerdata</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>COPY вместо INSERT</strong>: для массовой загрузки данных COPY на порядок величины быстрее:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>COPY logs </span><span class="token token punctuation">(</span><span>id</span><span class="token token punctuation">,</span><span> message</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> STDIN</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span>	msg1
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span>	msg2
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>\</span><span class="token token punctuation">.</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Отключение индексов для bulk loading</strong>: при загрузке больших объёмов данных временное отключение индексов значительно ускоряет процесс:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> large_table </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DISABLE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TRIGGER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALL</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- выполнить bulk-вставку</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> large_table </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ENABLE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TRIGGER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALL</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>REINDEX </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> large_table</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Оптимизация параметров для write-heavy рабочих нагрузок</strong>: увеличение <code>checkpoint_completion_target</code> с 0.5 до 0.9 растягивает контрольные точки, снижая пиковую нагрузку ввода-вывода. Увеличение <code>maintenance_work_mem</code> ускоряет создание индексов.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Обслуживание индексов и управление вздутием</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Индексы со временем вздуваются из-за частых обновлений и удалений. Выявление и исправление вздутия критично для поддержания производительности.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://leapcell.io/blog/maintaining-index-health-in-postgresql-when-to-choose-reindex-or-vacuum-full"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">leapcell</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>REINDEX INDEX CONCURRENTLY</code> — рекомендуемый инструмент для переиндексирования отдельных индексов без блокировки таблицы:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>REINDEX </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> CONCURRENTLY idx_orders_customer_id</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Стандартная команда <code>REINDEX</code> требует эксклюзивной блокировки таблицы, поэтому использование её в продакшене нежелательно.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>VACUUM FULL</code> восстанавливает дисковое пространство таблиц, но требует полной блокировки таблицы и должен выполняться только во время окна обслуживания. Для большинства случаев регулярный VACUUM и оптимизация параметров autovacuum предпочтительнее, чем VACUUM FULL.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://leapcell.io/blog/maintaining-index-health-in-postgresql-when-to-choose-reindex-or-vacuum-full"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">leapcell</span></span></span></a></span>​</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Потоковая репликация и высокая доступность</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Потоковая репликация PostgreSQL обеспечивает как масштабирование чтения, так и высокую доступность. Резервные серверы применяют WAL (Write-Ahead Log) в реальном времени и могут быть переведены в режим Hot Standby для выполнения читаемых запросов.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.tigerdata.com/blog/scalable-postgresql-high-availability-read-scalability-streaming-replication-fb95023e2af"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">tigerdata</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Критические параметры конфигурации на основном сервере:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>max_wal_senders = количество_резервных_серверов + 1
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">wal_level = replica
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">wal_keep_segments = &gt;=16  # или используйте min_wal_size
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">На резервном сервере:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>hot_standby = on
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">max_standby_streaming_delay = 300000  # 5 минут
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Синхронная vs асинхронная репликация</strong>: синхронная репликация (<code>synchronous_commit = remote_apply</code>) гарантирует, что транзакция завершена только после применения на резервном сервере, обеспечивая нулевую потерю данных при отказе, но снижает пропускную способность. Асинхронная репликация быстрее, но может привести к потере нескольких секунд данных при отказе.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">enterprisedb</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Стратегия резервного копирования и восстановления Point-in-Time</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Надёжная стратегия резервного копирования основана на трёх компонентах:</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Base backup</strong> — полная снимок базы данных в определённый момент времени, обычно создаваемая с помощью <code>pg_basebackup</code>:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>pg_basebackup -D /path/to/backup -Fp -Xs -P
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>WAL archiving</strong> — непрерывное архивирование WAL-файлов после базовой резервной копии, что позволяет восстановить базу данных на любой момент времени между созданием базовой копии и последним архивированным WAL:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>archive_mode = on
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">archive_command = 'cp %p /archive/%f'
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Recovery</strong> — восстановление из базовой копии и последовательное применение архивированных WAL-файлов до желаемого момента времени:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>restore_command = 'cp /archive/%f %p'
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">recovery_target_timeline = 'latest'
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">recovery_target_time = '2024-01-15 14:30:00'
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>pgBackRest</strong> — инструмент для управления резервными копиями, автоматизирующий WAL-архивирование и поддерживающий полные, дифференциальные и инкрементальные резервные копии с высокой эффективностью сжатия.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">mydbops</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Комплексный чек-лист администратора</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Успешное администрирование PostgreSQL требует систематического подхода к конфигурации, мониторингу и обслуживанию:</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Установка и начальная конфигурация</strong>: настройка параметров памяти на основе оборудования, включение расширений (pg_stat_statements, pgBackRest), конфигурация резервного копирования и репликации.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Регулярное обслуживание</strong>: запуск ANALYZE для обновления статистики, мониторинг и настройка autovacuum, проверка индексов на вздутие и использование, проверка WAL-архивирования и целостности резервных копий.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Оптимизация на основе нагрузки</strong>: анализ медленных запросов через pg_stat_statements, использование EXPLAIN ANALYZE для диагностики, добавление или оптимизация индексов, переписание неэффективных запросов.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Мониторинг и оповещение</strong>: отслеживание коэффициента попадания кеша, размера свободного дискового пространства, частоты и длительности контрольных точек, задержки репликации (для реплик).</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Тестирование и валидация</strong>: регулярное тестирование процедур восстановления из резервных копий, нагрузочное тестирование критических операций, проверка плана восстановления в случае отказа оборудования.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Оптимизация PostgreSQL — это итеративный процесс, требующий постоянного мониторинга, анализа и настройки в соответствии с изменяющимися требованиями приложения и объёмом данных. Ключ к успеху — это комбинация правильной первоначальной конфигурации, надёжного мониторинга и предактивного решения проблем до того, как они повлияют на конечных пользователей.</p>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Источники</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Instaclustr, "Top 10 PostgreSQL Best Practices for 2025", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.instaclustr.com/education/postgresql/top-10-postgresql-best-practices-for-2025/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">instaclustr</span></span></span></a></span>​<br>
Instaclustr, "PostgreSQL Tuning: 6 Things You Can Do to Improve DB Performance", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.instaclustr.com/education/postgresql/postgresql-tuning-6-things-you-can-do-to-improve-db-performance/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">instaclustr</span></span></span></a></span>​<br>
PgEdge, "PostgreSQL Performance Tuning", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.pgedge.com/blog/postgresql-performance-tuning"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgedge</span></span></span></a></span>​<br>
Speak Data Science, "7 Crucial PostgreSQL Best Practices", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://speakdatascience.com/postgresql-best-practices/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">speakdatascience</span></span></span></a></span>​<br>
Percona, "PostgreSQL Performance Tuning Guide", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.percona.com/blog/tuning-postgresql-database-parameters-to-optimize-performance/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">percona</span></span></span></a></span>​<br>
Leapcell, "Maintaining Index Health in PostgreSQL", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://leapcell.io/blog/maintaining-index-health-in-postgresql-when-to-choose-reindex-or-vacuum-full"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">leapcell</span></span></span></a></span>​<br>
MyDBOps, "PostgreSQL Parameter Tuning Best Practices 2025", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.mydbops.com/blog/postgresql-parameter-tuning-best-practices"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">mydbops</span></span></span></a></span>​<br>
Geeky Tidbits, "Performance Tuning Queries in PostgreSQL", 2016.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.geekytidbits.com/performance-tuning-postgres/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">geekytidbits</span></span></span></a></span>​<br>
Tiger Data, "PostgreSQL Performance Tuning: Optimizing Database Indexes", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.tigerdata.com/learn/postgresql-performance-tuning-optimizing-database-indexes"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">tigerdata</span></span></span></a></span>​<br>
Percona, "Useful PostgreSQL Index Maintenance Queries", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.percona.com/blog/useful-queries-for-postgresql-index-maintenance/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">percona</span></span></span></a></span>​<br>
Crunchy Data, "PostgreSQL Performance Tuning", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.crunchydata.com/blog/optimize-postgresql-server-performance"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">crunchydata</span></span></span></a></span>​<br>
Cybertec, "Tuning Autovacuum for PostgreSQL Databases", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.cybertec-postgresql.com/en/tuning-autovacuum-postgresql/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">cybertec-postgresql</span></span></span></a></span>​<br>
Leapcell, "Decoding PostgreSQL Query Performance with EXPLAIN ANALYZE", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://leapcell.io/blog/decoding-postgresql-query-performance-with-explain-analyze"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">leapcell</span></span></span></a></span>​<br>
Engine Labs, "Optimize Postgres Query Performance Using EXPLAIN ANALYZE", 2022.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.enginelabs.ai/blog/optimize-postgres-query-performance-using-explain-analyze-a-comprehensive-guide"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">enginelabs</span></span></span></a></span>​<br>
DigitalOcean, "Optimize Shared Buffers", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://docs.digitalocean.com/products/databases/postgresql/concepts/shared-buffers/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">digitalocean</span></span></span></a></span>​<br>
Azure, "Autovacuum Tuning", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://learn.microsoft.com/en-us/azure/postgresql/flexible-server/how-to-autovacuum-tuning"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">learn.microsoft</span></span></span></a></span>​<br>
pgDash, "PostgreSQL Connection Pooling with PgBouncer", 2019.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://pgdash.io/blog/pgbouncer-connection-pool.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgdash</span></span></span></a></span>​<br>
PostgreSQL Documentation, "Table Partitioning", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/current/ddl-partitioning.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​<br>
Data Sentinel, "Monitoring PostgreSQL Performance with pg_stat_statements", 2022.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://blog.datasentinel.io/post/pg_stats_statements/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">datasentinel</span></span></span></a></span>​<br>
Azure, "Connection Pooling Best Practices", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://learn.microsoft.com/en-us/azure/postgresql/flexible-server/concepts-connection-pooling-best-practices"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">learn.microsoft</span></span></span></a></span>​<br>
Vishal Garg, "Guide to PostgreSQL Table Partitioning", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.vishalgarg.io/articles/guide-to-postgresql-table-partitioning"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">vishalgarg</span></span></span></a></span>​<br>
MSSQLTips, "PostgreSQL Monitoring with pg_stat_statements", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.mssqltips.com/sqlservertip/8295/postgresql-monitoring-with-pg-stat-statements/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">mssqltips</span></span></span></a></span>​<br>
Severalnines, "Query Observability with pg_stat_monitor", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://severalnines.com/blog/query-observability-and-performance-tuning-with-pg_stat_monitor-and-pg_stat_statements/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">severalnines</span></span></span></a></span>​<br>
Azure, "Write-Ahead Log Settings", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://learn.microsoft.com/en-us/azure/postgresql/flexible-server/param-write-ahead-log-settings"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">learn.microsoft</span></span></span></a></span>​<br>
MyDBOps, "PostgreSQL Disaster Recovery Guide", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.mydbops.com/blog/master-postgresql-disaster-recovery-backup-restore"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">mydbops</span></span></span></a></span>​<br>
PostgreSQL Documentation, "Write Ahead Log", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/current/runtime-config-wal.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​<br>
Tiger Data, "High Availability and Scalable Reads in PostgreSQL", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.tigerdata.com/blog/scalable-postgresql-high-availability-read-scalability-streaming-replication-fb95023e2af"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">tigerdata</span></span></span></a></span>​<br>
PgEdge, "Point-In-Time Recovery (PITR) in PostgreSQL", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.pgedge.com/blog/point-in-time-recovery-pitr-in-postgresql"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgedge</span></span></span></a></span>​<br>
EnterpriseDB, "High Availability Parameters and Configuration", 2020.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.enterprisedb.com/blog/high-availibility-parameters-configuration-streaming-replication-postgresql"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">enterprisedb</span></span></span></a></span>​<br>
PostgreSQL Fastware, "What is Streaming Replication", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.fastware.com/postgresql-insider-ha-str-rep"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql.fastware</span></span></span></a></span>​<br>
Percona, "PostgreSQL Backup Strategies for Enterprise", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.percona.com/blog/postgresql-backup-strategy-enterprise-grade-environment/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">percona</span></span></span></a></span>​<br>
Chat2DB, "PostgreSQL Data Types Guide", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://chat2db.ai/resources/blog/postgresql-data-types-guide"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">chat2db</span></span></span></a></span>​<br>
Chat2DB, "Normalization and Denormalization Strategies", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://chat2db.ai/resources/blog/normalization-and-denormalization-strategies-in-postgresql-database-modeling-with-sql-commands"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">chat2db</span></span></span></a></span>​<br>
AWS, "PostgreSQL as a JSON Database", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://aws.amazon.com/blogs/database/postgresql-as-a-json-database-advanced-patterns-and-best-practices/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">aws.amazon</span></span></span></a></span>​<br>
Tiger Data, "13 Tips to Improve PostgreSQL Insert Performance", 2026.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.tigerdata.com/blog/13-tips-to-improve-postgresql-insert-performance"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">tigerdata</span></span></span></a></span>​<br>
Byte by Byte Go, "Database Schema Design Simplified", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://blog.bytebytego.com/p/database-schema-design-simplified"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">bytebytego</span></span></span></a></span>​<br>
PostgreSQL Documentation, "JSON Types", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/current/datatype-json.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​</p></div></div></div></div></div></div><div class="flex items-center justify-between"><div class="-ml-sm gap-xs flex flex-shrink-0 items-center"><button aria-label="Share" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-share-3"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Copy" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button data-state="closed" aria-label="Rewrite" aria-expanded="false" aria-haspopup="dialog" aria-controls="radix-:r72u:" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 hover:text-foreground hover:bg-subtle"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-repeat"></use></svg></button><button type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full hover:text-foreground hover:bg-subtle px-3 relative"><span style="opacity: 1; transition: opacity 150ms 150ms;" class="text-box-trim-both"><div class="gap-x-sm flex flex-row"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute opacity-0"><defs><clipPath id="clip-path-default"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.0635 0.704214C9.13824 0.253115 8.09868 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C8.09868 14 9.13824 13.7469 10.0635 13.2958C8.19825 11.8312 7 9.55552 7 7C7 4.44448 8.19825 2.16882 10.0635 0.704214Z" fill="#D9D9D9"></path></clipPath></defs></svg><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute opacity-0"><defs><clipPath id="clip-path-small"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.57242 0.57787C7.7928 0.20734 6.92062 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12C6.92062 12 7.7928 11.7927 8.57242 11.4221C7.00228 10.1385 6 8.18628 6 6C6 3.81372 7.00228 1.86154 8.57242 0.57787Z" fill="#D9D9D9"></path></clipPath></defs></svg><div class="gap-xs relative flex shrink-0 items-center"><div class="ml-xs flex"><div style="clip-path: url(&quot;#clip-path-default&quot;);" class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="instaclustr.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=instaclustr.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div><div style="clip-path: url(&quot;#clip-path-default&quot;);" class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="docs.digitalocean.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=docs.digitalocean.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div><div class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="mydbops.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=mydbops.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="truncate font-sans text-xs font-medium text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">97</div></div></span><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></button></div><div class="gap-x-xs flex flex-shrink-0 items-center"><span><button aria-label="Research" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-cpu"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></span><span><div class="gap-xs flex items-center border-subtlest ring-subtlest divide-subtlest bg-transparent"><button aria-label="Helpful" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-thumb-up"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Not helpful" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-thumb-down"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></div></span><div><button data-state="closed" aria-label="More actions" aria-expanded="false" aria-haspopup="dialog" aria-controls="radix-:r733:" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 hover:text-foreground hover:bg-subtle"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-dots"></use></svg></button></div></div></div></div></div></div></div></div><div class="gap-y-lg flex flex-col first:mt-0"></div></div></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-shopping" hidden="" id="radix-:r4l:-content-shopping" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-hotels" hidden="" id="radix-:r4l:-content-hotels" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-places" hidden="" id="radix-:r4l:-content-places" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-jobs" hidden="" id="radix-:r4l:-content-jobs" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-videos" hidden="" id="radix-:r4l:-content-videos" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-images" hidden="" id="radix-:r4l:-content-images" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-sources" hidden="" id="radix-:r4l:-content-sources" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-assets" hidden="" id="radix-:r4l:-content-assets" tabindex="0" class="focus:outline-none"></div></div></div></div></div></div></div><div><div><div class="" style="margin-top: 0px; padding-bottom: 0px;"><div class="pt-[var(--thread-visual-spacing)] md:pt-lg pb-[var(--thread-visual-spacing)] px-[var(--thread-visual-spacing)] border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="isolate mx-auto max-w-threadContentWidth"><div class="bg-base erp-sidecar:pt-0 erp-mobile-sidecar:pt-0" style="opacity: 1; transform: none;"><div class="mx-auto max-w-threadContentWidth"><div class="max-w-threadContentWidth relative isolate z-20 mx-auto"><div class="relative z-10"><div class="group relative flex items-end gap-0.5"><div class="-inset-md pointer-events-none absolute select-none"></div><div class="relative min-w-0 flex-1 flex justify-end"><div class="flex items-center gap-2"><div class="flex shrink-0 items-center gap-1 opacity-0 transition-opacity duration-150 pointer-events-none group-hover:pointer-events-auto group-hover:opacity-100 focus-within:pointer-events-auto focus-within:opacity-100" aria-hidden="false"><button aria-label="Edit Query" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-pencil"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Copy Query" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></div><div class="group/title relative inline-flex flex-col"><div style="mask-image: linear-gradient(black 70%, transparent 97%);"><div style="transition: height 200ms cubic-bezier(0.16, 1, 0.3, 1); overflow: hidden; height: 144px;"><div><div class="group/query relative whitespace-pre-line !text-wrap break-words [word-break:break-word] font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex min-w-[48px] items-center justify-center bg-offset text-foreground rounded-2xl p-3 font-sans text-base font-normal select-none max-w-[600px]"><span class="select-text" style="overflow-wrap: anywhere;">какие темы для исследования для PostgreSQL можно еще исследовать, для расширения знаний для администратирования системы (PostgreSQL  18 версия)</span></div></div></div></div></div><div class="top-xs relative flex -mt-2"><div class="-mt-0.5" data-testid="toggle-query-expand-button"><button type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-6 text-xs cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex hover:text-foreground hover:bg-subtle px-2 rounded-md relative"><span style="opacity: 1; transition: opacity 150ms 150ms;" class="text-box-trim-both pr-1">Show more</span><div style="opacity: 1; transition: opacity 150ms 150ms;" class="ml-1 flex items-center"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-chevron-down"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></button></div></div></div></div></div></div></div></div></div></div><div class="mx-auto max-w-threadContentWidth"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-default" id="radix-:r4l:-content-default" tabindex="0" class="focus:outline-none" style=""><div class="gap-y-md mt-md flex flex-col"><div dir="ltr" data-orientation="horizontal" class="grid w-full min-w-0 grid-cols-[minmax(0,1fr)]"><div style="opacity: 1;" class="col-start-1 row-start-2"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:rvc:-trigger-thread" id="radix-:rvc:-content-thread" tabindex="0" class="focus:outline-none" style=""><div class="border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="gap-y-md flex flex-col"><div class="flex flex-col gap-sm"><button class="gap-x-0.5 flex items-center whitespace-nowrap text-quiet text-sm">7 steps completed<span class="duration-quick inline-block transition-transform ease-in-out text-quiet rotate-0"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-chevron-right"></use></svg></span></button></div><div class="relative font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto" id="markdown-content-1" class="gap-y-md after:clear-both after:block after:content-['']"><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Perfect. Now I have comprehensive research covering all major advanced PostgreSQL administration topics. Let me compile the final comprehensive report for the user.</p>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0 md:text-lg [hr+&amp;]:mt-4" id="postgresql-18">Рекомендуемые темы для расширения экспертизы в администрировании PostgreSQL 18</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">На основе глубокого исследования передовых практик и новых возможностей PostgreSQL 18, я подготовил структурированный список 20+ ключевых тем для систематического расширения вашей экспертизы в области администрирования баз данных.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0"><strong>РАЗДЕЛ 1: PostgreSQL 18 — Критические новые возможности</strong></h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">1. Асинхронное ввод-вывод (Asynchronous I/O, AIO)</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostgreSQL 18 фундаментально переработал механизм ввода-вывода, заменив синхронную модель (которая ждала завершения каждой операции чтения) на асинхронную систему, выполняющую множественные запросы параллельно.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">betterstack</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ключевые компоненты для изучения:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Параметр <code>io_method</code> (startup-only, требует перезагрузки): выбор между асинхронным и синхронным режимами</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Параметры <code>io_combine_limit</code> и <code>io_max_combine_limit</code> для оптимизации батчинга запросов</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>effective_io_concurrency</code> и <code>maintenance_io_concurrency</code> для платформ без поддержки fadvise()</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Мониторинг AIO активности через новый системный view <code>pg_aios</code></p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Практические улучшения производительности: до 3x ускорение для sequential scans и bitmap heap scans<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Применение:</strong><br>
Для больших сканирований таблиц (аналитические запросы, VACUUM на многотерабайтных таблицах) AIO может обеспечить драматический прирост производительности особенно на сетевых хранилищах (NVMe-over-Fiber).</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">2. Skip Scan — использование многостолбцовых индексов</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Долгое время PostgreSQL требовал условий равенства на ведущих столбцах многостолбцового индекса для его использования. PostgreSQL 18 вводит skip scan, позволяющий автоматически сканировать различные значения пропущенных столбцов.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">guepard</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Пример:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- До PostgreSQL 18: требовал индекса (category, year) для этого запроса</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Или индекс (year) как отдельная сущность</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> products </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">year</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">2024</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- PostgreSQL 18: skip scan автоматически использует (category, year) индекс</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- путём сканирования distincts в category, затем поиска по year</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> products </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">year</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">2024</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Исследовать:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Механизм skip scan в планах EXPLAIN ANALYZE</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Когда плanner выбирает skip scan vs full table scan</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Оптимизация структуры индексов для skip scan</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Влияние на производительность сложных аналитических запросов</p>
</li>
</ul>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">3. Виртуальные генерируемые столбцы (Virtual Generated Columns)</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostgreSQL 18 расширяет поддержку генерируемых столбцов, добавляя виртуальные столбцы (STORED vs NOT STORED) для гибкого управления вычисляемыми значениями.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://neon.com/postgresql/postgresql-18-new-features"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Модель:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> products </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SERIAL</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PRIMARY</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">KEY</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    price </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">NUMERIC</span><span> </span><span class="token token operator">NOT</span><span> </span><span class="token token boolean">NULL</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    quantity </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INT</span><span> </span><span class="token token operator">NOT</span><span> </span><span class="token token boolean">NULL</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Виртуальный столбец (не хранится на диске, вычисляется всегда)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    total_value </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">NUMERIC</span><span> GENERATED ALWAYS </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">AS</span><span> </span><span class="token token punctuation">(</span><span>price </span><span class="token token operator">*</span><span> quantity</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Хранимый столбец (вычисляется, но хранится для быстрого доступа)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    audit_info </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span> GENERATED ALWAYS </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">AS</span><span> </span><span class="token token punctuation">(</span><span>audit_data_function</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span> STORED
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Преимущества для администратора:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Сокращение использования диска (виртуальные столбцы)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Ускорение INSERT/UPDATE для вычисляемых значений</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Всегда актуальные вычисляемые значения</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Возможность логической репликации хранимых генерируемых столбцов</p>
</li>
</ul>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">4. Улучшения EXPLAIN ANALYZE в PostgreSQL 18</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">EXPLAIN теперь автоматически включает I/O статистику в буферах памяти без необходимости явного флага BUFFERS.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">betterstack</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Новые метрики:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Количество обращений к shared buffers</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Количество lookup операций в индексах</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Детализация I/O по плану запроса</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Статистика CPU использования в verbose режиме</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Активность WAL записей</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Практическое применение:</strong><br>
Эти метрики позволяют диагностировать истинные узкие места: недостаточность памяти, чрезмерный I/O, проблемы планировщика.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">5. Сохранение статистики при pg_upgrade</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostgreSQL 18 автоматически переносит статистику планировщика при upgrade, устраняя необходимость длительной post-upgrade операции ANALYZE.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Процесс в PostgreSQL 18:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># До: требовалось явно запускать ANALYZE после upgrade</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>pg_upgrade --old-datadir</span><span class="token token operator">=</span><span>/old --new-datadir</span><span class="token token operator">=</span><span>/new
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">vacuumdb --all --analyze-only
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># PostgreSQL 18: статистика автоматически перенесена</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>pg_upgrade --old-datadir</span><span class="token token operator">=</span><span>/old --new-datadir</span><span class="token token operator">=</span><span>/new
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># База данных сразу имеет точную статистику</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0"><strong>РАЗДЕЛ 2: Продвинутая логическая репликация</strong></h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">6. Конфигурация и оптимизация логической репликации</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Логическая репликация обеспечивает гранулярный контроль над тем, какие таблицы репликируются, в отличие от physical streaming replication.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">severalnines</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Критические параметры для настройки:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span># На издателе (publisher)
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">wal_level = logical
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">max_wal_senders = 10  # &gt;= количество подписчиков
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">max_replication_slots = 10  # &gt;= количество подписчиков
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">max_worker_processes = 10
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">max_logical_replication_workers = 4
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"># На подписчике (subscriber)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">max_logical_replication_workers = 4
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">max_sync_workers_per_subscription = 2  # параллельная синхронизация таблиц
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">max_worker_processes = 8
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Параметры для исследования:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>max_worker_processes</code>: общий лимит рабочих процессов</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>max_logical_replication_workers</code>: максимум логических рабочих (для применения изменений)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>max_sync_workers_per_subscription</code>: только один worker на таблицу, но множество таблиц параллельно</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Мониторинг конфликтов репликации через <code>pg_stat_subscription_stats</code></p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Write conflicts и их диагностика</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Сценарий использования:</strong><br>
Логическая репликация идеальна для миграции между версиями PostgreSQL без downtime, выборочной репликации (только определённые таблицы), и multi-master сценариев.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">7. Преобразование physical в logical репликацию</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostgreSQL 17+ предоставляет утилиту <code>pg_createsubscriber</code> для преобразования physical standby в логического подписчика без начальной копии данных.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.percona.com/blog/easy-guide-to-switching-postgresql-physical-replication-to-logical-replication-with-pg_createsubscriber/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">percona</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ключевые шаги:</strong></p>
<ol class="marker:text-quiet list-decimal">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Физический standby должен быть активным (не в режиме восстановления)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Проверка system_identifier на соответствие между издателем и подписчиком</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Конфигурирование параметров репликации слотов</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Запуск <code>pg_createsubscriber</code> для трансформации</p>
</li>
</ol>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Преимущество:</strong><br>
Исключение времени начальной загрузки данных, так как данные уже полностью синхронизированы через physical replication.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0"><strong>РАЗДЕЛ 3: Специализированные индексные стратегии</strong></h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">8. BRIN индексы для временных рядов в масштабе</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">BRIN (Block Range Indexes) хранят только min/max значения для диапазонов блоков, что требует минимума памяти и дискового пространства для больших упорядоченных таблиц.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">devtechtools</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ключевая особенность:</strong> физическая корреляция данных — значения должны быть упорядочены согласно физическому расположению на диске.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Параметр pages_per_range:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Default: 128 страниц на диапазон</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_events_time </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> events </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> BRIN </span><span class="token token punctuation">(</span><span>event_timestamp</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WITH</span><span> </span><span class="token token punctuation">(</span><span>pages_per_range </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">128</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Для узких запросов (дни): 32-64 страницы</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_events_time </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> events </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> BRIN </span><span class="token token punctuation">(</span><span>event_timestamp</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WITH</span><span> </span><span class="token token punctuation">(</span><span>pages_per_range </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">32</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Для широких запросов (месяцы): 256+ страниц</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_events_time </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> events </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> BRIN </span><span class="token token punctuation">(</span><span>event_timestamp</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WITH</span><span> </span><span class="token token punctuation">(</span><span>pages_per_range </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">256</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Проблема коррелячной деградации:</strong><br>
Случайные UPDATE или DELETE нарушают физический порядок, снижая эффективность BRIN. Решение: <code>pg_repack</code> для переупорядочивания таблицы.</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Переупорядочивание таблицы без downtime</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>pg_repack -k -t events --order-by</span><span class="token token operator">=</span><span>event_timestamp --jobs</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">4</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Стратегия для масштаба:</strong><br>
Комбинировать BRIN с партиционированием: каждая партиция (например, за месяц) имеет собственный малый, высокоэффективный BRIN индекс, и TTL-based удаление старых партиций вместо удаления строк.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">9. GIN индексы для JSON и полнотекстового поиска</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">GIN (Generalized Inverted Indexes) оптимальны для JSONB содержимого и полнотекстового поиска. PostgreSQL 18 добавляет поддержку параллельного построения GIN индексов.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Параллельное построение в PostgreSQL 18:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Использует max_parallel_maintenance_workers</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_metadata_gin </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> users </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> GIN </span><span class="token token punctuation">(</span><span>metadata</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Оптимизация JSONB запросов:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Индекс для операций contains (@&gt;)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_metadata_ops </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> users </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> GIN </span><span class="token token punctuation">(</span><span>metadata</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Более компактный индекс для simple contains операций</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_metadata_ops_compact </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> users </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> GIN </span><span class="token token punctuation">(</span><span>metadata jsonb_path_ops</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0"><strong>РАЗДЕЛ 4: Безопасность и управление доступом</strong></h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">10. Row-Level Security (RLS) — продвинутые паттерны</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">RLS позволяет определить политики, контролирующие доступ к отдельным строкам таблицы на основе текущего пользователя и условий.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Комплексный пример с несколькими политиками:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> departments </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SERIAL</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PRIMARY</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">KEY</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    name </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VARCHAR</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    manager </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> departments </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ENABLE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ROW</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LEVEL</span><span> SECURITY</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Permissive политика: OR логика (открытит доступ)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> POLICY department_access </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> departments
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FOR</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> </span><span class="token token punctuation">(</span><span>manager </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">current_user</span><span> </span><span class="token token operator">OR</span><span> current_user_has_admin_role</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Restrictive политика: AND логика (ограничить доступ)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> POLICY department_quarantine </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> departments
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FOR</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">UPDATE</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> </span><span class="token token punctuation">(</span><span>department_status </span><span class="token token operator">!=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'quarantined'</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WITH</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CHECK</span><span> </span><span class="token token punctuation">(</span><span>department_status </span><span class="token token operator">!=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'quarantined'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ключевые параметры для исследования:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>USING</code> clause (видимость строк для SELECT/DELETE)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>WITH CHECK</code> clause (проверка для INSERT/UPDATE)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Permissive vs Restrictive политики</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>FORCE ROW LEVEL SECURITY</code> для принудительного применения даже к владельцам таблиц</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Производительные последствия RLS (требует вычисления условия для каждой строки)</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ограничения и альтернативы:</strong><br>
RLS имеет накладные расходы на производительность из-за вычисления условий для каждой строки. Альтернативы: таблицы-специфичные для тенанта, представления с фильтрацией.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0"><strong>РАЗДЕЛ 5: Распределённые и расширенные данные</strong></h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">11. Foreign Data Wrapper (FDW) — оптимизация производительности</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">FDW позволяет запрашивать удалённые базы данных PostgreSQL (или другие источники) как локальные таблицы, с оптимизацией planner для push-down предикатов.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">ongres</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Конфигурация и оптимизация:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Создание FDW подключения</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> EXTENSION postgres_fdw</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> SERVER remote_db </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FOREIGN</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DATA</span><span> WRAPPER postgres_fdw
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    OPTIONS </span><span class="token token punctuation">(</span><span>host </span><span class="token token" style="color: rgb(181, 189, 104);">'remote.host'</span><span class="token token punctuation">,</span><span> dbname </span><span class="token token" style="color: rgb(181, 189, 104);">'remote_db'</span><span class="token token punctuation">,</span><span> port </span><span class="token token" style="color: rgb(181, 189, 104);">'5432'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USER</span><span> MAPPING </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FOR</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">current_user</span><span> SERVER remote_db
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    OPTIONS </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">user</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'remote_user'</span><span class="token token punctuation">,</span><span> password </span><span class="token token" style="color: rgb(181, 189, 104);">'pass'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Создание внешней таблицы</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FOREIGN</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> f_customers </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INT</span><span class="token token punctuation">,</span><span> name </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VARCHAR</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> age </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INT</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span> SERVER remote_db OPTIONS </span><span class="token token punctuation">(</span><span>schema_name </span><span class="token token" style="color: rgb(181, 189, 104);">'public'</span><span class="token token punctuation">,</span><span> table_name </span><span class="token token" style="color: rgb(181, 189, 104);">'customers'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Ключевая оптимизация: использование remote estimates</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FOREIGN</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> f_customers OPTIONS </span><span class="token token punctuation">(</span><span>use_remote_estimate </span><span class="token token" style="color: rgb(181, 189, 104);">'on'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Стратегии оптимизации:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Использование <code>use_remote_estimate</code> для получения точных оценок от удалённого сервера</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Использование CONNECTION POOLING (PgBouncer) для FDW соединений (значительно снижает overhead)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Применение фильтров WHERE на удалённом сервере (push-down)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">CTEs и подзапросы для фильтрации данных перед JOIN</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Примеры план-улучшений:</strong><br>
Без оптимизации FDW может загружать огромные наборы данных локально. С <code>use_remote_estimate</code> planner может выбрать более эффективный план с JOIN на удалённом сервере.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">12. TimescaleDB для временных рядов в масштабе</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">TimescaleDB — это расширение на базе PostgreSQL, оптимизированное для временных рядов, автоматически партиционирующее гипертаблицы и предоставляющее специализированные функции.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">tigerdata</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ключевые возможности:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Автоматическое партиционирование по времени (гипертаблицы)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Сжатие данных для экономии диска</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Непрерывные агрегаты для материализации вычисляемых данных</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Функции для анализа временных рядов (gap_fill, time_bucket и т.д.)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Оптимизированный vacuum и autovacuum</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Применение для администратора:</strong><br>
TimescaleDB решает многие масштабируемые проблемы PostgreSQL для временных рядов. Рекомендуемый стек для больших хранилищ метрик, логов, событий.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0"><strong>РАЗДЕЛ 6: Мониторинг и наблюдаемость</strong></h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">13. pg_stat_io — детальная аналитика ввода-вывода (PostgreSQL 16+)</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>pg_stat_io</code> предоставляет гранулярные метрики I/O активности по типам операций, контекстам и типам бэкендов, решая исторический дефицит видимости в I/O.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pganalyze</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ключевые метрики:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> backend_type</span><span class="token token punctuation">,</span><span> io_object</span><span class="token token punctuation">,</span><span> io_context</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>       </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">reads</span><span class="token token punctuation">,</span><span> writes</span><span class="token token punctuation">,</span><span> extends</span><span class="token token punctuation">,</span><span> op_bytes</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>       evictions</span><span class="token token punctuation">,</span><span> reuses</span><span class="token token punctuation">,</span><span> fsyncs
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_stat_io
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">reads</span><span> </span><span class="token token operator">&lt;&gt;</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span> </span><span class="token token operator">OR</span><span> writes </span><span class="token token operator">&lt;&gt;</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span> </span><span class="token token operator">OR</span><span> extends </span><span class="token token operator">&lt;&gt;</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Типы контекстов:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>normal</code> — обычные операции чтения/записи таблиц</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>bulkread</code> — последовательные сканирования (VACUUM, CREATE INDEX)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>bulkwrite</code> — массовые вставки (COPY, INSERT ... SELECT)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>vacuum</code> — операции очистки</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Использование для диагностики:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Высокое количество <code>evictions</code> в shared buffers указывает на недостаток памяти</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Несбалансированное соотношение <code>reads</code>/<code>reuses</code> указывает на неэффективное использование кеша</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Высокие <code>extends</code> на пиковых вставках указывают на необходимость увеличения файлов таблиц</p>
</li>
</ul>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">14. pgBadger — анализ логов и выявление узких мест</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">pgBadger — это быстрый анализатор логов PostgreSQL, преобразующий логи в компактные HTML-отчёты с визуализацией и аналитикой.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">severalnines</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Конфигурация логирования для pgBadger:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span># postgresql.conf
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">log_destination = 'stderr'
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">log_line_prefix = '%t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h '
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">log_checkpoints = on
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">log_connections = on
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">log_disconnections = on
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">log_lock_waits = on
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">log_temp_files = 0
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">log_autovacuum_min_duration = 0
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">log_min_duration_statement = 500  # логировать запросы &gt;500ms
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Использование pgBadger:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>pgBadger -o report.html /var/log/postgresql/postgresql.log
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Генерирует детальный HTML отчёт с:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># - Медленными запросами (топ-N)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># - Часто выполняемыми запросами</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># - Временной распределением сессий</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># - Активностью autovacuum/analyze</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># - Распределением ошибок</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Преимущество для администратора:</strong><br>
Быстрая идентификация проблемных запросов без необходимости текущего мониторинга в реальном времени. Исторический анализ трендов.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">15. Пользовательские метрики наблюдаемости</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Создание dashboard для наблюдаемости специфичных для вашего окружения метрик через Prometheus/Grafana или пользовательские скрипты.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">sematext</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Критические метрики для мониторинга:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Коэффициент попадания кеша: <code>sum(heap_blks_hit) / (sum(heap_blks_hit) + sum(heap_blks_read))</code></p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Скорость autovacuum: <code>pg_stat_user_tables.last_vacuum</code>, <code>last_autovacuum</code></p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Задержка репликации: <code>SELECT extract(epoch FROM (now() - pg_last_wal_receive_lsn())) / 1000000</code></p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Занято памяти в shared buffers: коррелирует с производительностью</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Распределение I/O по типам операций из <code>pg_stat_io</code></p>
</li>
</ul>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0"><strong>РАЗДЕЛ 7: Параллелизм и оптимизация запросов</strong></h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">16. Параллельное выполнение запросов — продвинутая настройка</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Параллельное выполнение позволяет использовать несколько CPU ядер для одного запроса, но требует тщательной настройки параметров.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">tigerdata</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Иерархия параметров параллелизма:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 1. Общий лимит рабочих процессов (требует перезагрузки)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>max_worker_processes </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">8</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- обычно = кол-во CPU ядер</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 2. Максимум активных параллельных рабочих (глобальный лимит)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>max_parallel_workers </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">8</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- обычно = max_worker_processes</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 3. Максимум рабочих per query (лимит для одного Gather узла)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>max_parallel_workers_per_gather </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- default, часто ограничивающий параметр</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 4. Костюм параметров cost для плanner</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>parallel_tuple_cost </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.05</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- уменьшить для поощрения параллелизма</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>parallel_setup_cost </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">500.0</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- стоимость запуска параллельного плана</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>min_parallel_table_scan_size </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">8</span><span>MB  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- минимальный размер для параллельного скана</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>min_parallel_index_scan_size </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">512</span><span>KB  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- для параллельных index scans</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Диагностика с EXPLAIN:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">EXPLAIN</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ANALYZE</span><span class="token token punctuation">,</span><span> BUFFERS</span><span class="token token punctuation">,</span><span> FORMAT JSON</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">COUNT</span><span class="token token punctuation">(</span><span class="token token operator">*</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> large_table </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">year</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">2024</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Ищите Gather/Gather Merge узлы и количество workers</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Когда параллелизм помогает:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Большие последовательные сканы таблиц (full table scans)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Агрегирующие функции (COUNT, SUM, AVG)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Дорогостоящие сортировки (ORDER BY, DISTINCT)</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Когда параллелизм вредит:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Малые таблицы (параллельные издержки превышают выгоду)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Высоконагруженные OLTP системы (истощение пула рабочих)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Недостаток ввод-вывода (I/O bound операции остаются связанными)</p>
</li>
</ul>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">17. Оптимизация параллельного выполнения на уровне таблиц</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Per-table параметр для контроля параллелизма конкретных таблиц:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://jamesguthrie.ch/blog/maxing-out-max-parallel-workers/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">jamesguthrie</span></span></span></a></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Для таблицы, которая часто сканируется параллельно</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> analytical_data </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token punctuation">(</span><span>parallel_workers </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">8</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Для OLTP таблицы, которая должна избежать параллельных издержек</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">transactions</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token punctuation">(</span><span>parallel_workers </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0"><strong>РАЗДЕЛ 8: Расширенные операции администрирования</strong></h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">18. Zero-downtime миграции схемы</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Перемещение схемы в production без downtime требует expand-and-contract паттерна и специализированных инструментов.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">xata</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>pgroll — инструмент для reversible миграций:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Создание миграции (в pgroll формате)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">pgroll start
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Миграция развёртывается без блокировок таблиц</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Старая и новая версии схемы одновременны</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>pgroll commit  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Завершение после проверки новой версии</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ключевые стратегии:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>lock_timeout</code> низкое (50ms) с retry логикой для избежания blocking</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Subtransactions (SAVEPOINT) для частичного rollback</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Phased deployments: расширение, проверка, контракция</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Применение:</strong><br>
Критично для крупных таблиц (где операции блокирования занимают часы) и высоконагруженных систем, где downtime недопустим.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">19. Миграция больших баз данных (TB-scale)</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Для миграции терабайтных баз данных требуется специализированный подход с использованием logical replication и инструментов типа pgcopydb.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.tigerdata.com/blog/migrating-a-terabyte-scale-postgresql-database-to-timescale-with-zero-downtime"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">tigerdata</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Workflow для live migrations:</strong></p>
<ol class="marker:text-quiet list-decimal">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Миграция схемы</strong> (pg_dump/pg_restore в целевую БД)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Настройка логических репликационных слотов</strong> на источнике</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Backfill исторических данных</strong> через pgcopydb</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Логическое декодирование</strong> реальных операций</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Синхронизация</strong> до нулевого лага</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Cutover</strong> с минимальным или нулевым downtime</p>
</li>
</ol>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Преимущество:</strong><br>
Миграция 2.7 TB может быть выполнена за 24-48 часов без downtime на основном источнике.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">20. Лучшие практики pg_upgrade для major version transition</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostgreSQL 18 улучшает процесс upgrade с сохранением статистики и параллельной обработкой.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">betterstack</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Процесс upgrade с PostgreSQL 18:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Инициализирует новый кластер с matching checksums</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">initdb --data-checksums /new/datadir
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Выполняет upgrade с параллельной обработкой</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>pg_upgrade </span><span class="token token punctuation">\</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    --old-datadir</span><span class="token token operator">=</span><span>/old/datadir </span><span class="token token punctuation">\</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    --new-datadir</span><span class="token token operator">=</span><span>/new/datadir </span><span class="token token punctuation">\</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    --old-bindir</span><span class="token token operator">=</span><span>/old/bin </span><span class="token token punctuation">\</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    --new-bindir</span><span class="token token operator">=</span><span>/new/bin </span><span class="token token punctuation">\</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    --jobs</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">4</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># параллельная обработка</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    --swap    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># атомарный swap директорий</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Вызовы для administrator:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Тестирование в staging окружении, идентичном production</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Резервное копирование старого кластера перед upgrade</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Планирование maintenance окна (хотя upgrade меньше занимает времени)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Проверка совместимости приложений с новой версией</p>
</li>
</ul>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0"><strong>РАЗДЕЛ 9: Дополнительные специализированные темы</strong></h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">21. Full-Text Search (FTS) — конфигурация и оптимизация</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">FTS в PostgreSQL обеспечивает sophosticated поиск с рейтингом результатов, морфологическим анализом и поддержкой множества языков.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">totara</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Компоненты FTS:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>tsvector</code> — предварительно обработанный документ (список лексем)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>tsquery</code> — запрос на естественном языке</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Text search configuration — язык и правила лемматизации</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Оптимизация через индексы:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Создание GIN индекса для быстрого полнотекстового поиска</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_fts </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> documents </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> GIN</span><span class="token token punctuation">(</span><span>to_tsvector</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'english'</span><span class="token token punctuation">,</span><span> content</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Запрос с использованием индекса</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> documents
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> to_tsvector</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'english'</span><span class="token token punctuation">,</span><span> content</span><span class="token token punctuation">)</span><span> @@ to_tsquery</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'english'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'postgres &amp; performance'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ранжирование и релевантность:</strong><br>
PostgreSQL позволяет взвешивать различные части документа (заголовок, абстракт, основной текст) для улучшения релевантности результатов.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">22. pgvector — AI/ML векторные вложения</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">pgvector расширение добавляет поддержку векторных данных и операций similarity search для LLM эмбеддингов.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">scaleway</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> EXTENSION </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">IF</span><span> </span><span class="token token operator">NOT</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">EXISTS</span><span> vector</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Создание таблицы с векторным столбцом</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> documents </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SERIAL</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PRIMARY</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">KEY</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    content </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    embedding vector</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">1536</span><span class="token token punctuation">)</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- OpenAI embedding размер</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Индекс для быстрого поиска ближайших соседей</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> documents </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> ivfflat </span><span class="token token punctuation">(</span><span>embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Поиск семантически похожих документов</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> documents
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> embedding </span><span class="token token operator">&lt;</span><span class="token token operator">-</span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'[0.1, 0.2, ...]'</span><span>::vector
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">23. Настройка Autovacuum для специальных рабочих нагрузок</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostgreSQL 18 добавляет insert-specific пороги для более точной конфигурации vacuum для append-only таблиц.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://neon.com/blog/postgres-18"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span></span></span></a></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Для таблицы с высоким INSERT и низким UPDATE</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> events </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token punctuation">(</span><span>autovacuum_vacuum_insert_scale_factor </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.05</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> events </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token punctuation">(</span><span>autovacuum_vacuum_insert_threshold </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1000</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Для таблицы с частыми обновлениями</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> inventory </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token punctuation">(</span><span>autovacuum_vacuum_scale_factor </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.01</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> inventory </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token punctuation">(</span><span>autovacuum_vacuum_cost_delay </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">24. Постгис для геопространственных данных</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostGIS добавляет типы данных и функции для географических объектов, геокодирования и расстояния.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">tigerdata</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Применение для администратора:</strong><br>
Знание PostGIS позволяет оптимизировать запросы на базе координат, использовать правильные индексы (GIST, BRIN для spatial данных) и понимать специфику хранения больших наборов геопространственных данных.</p>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0"><strong>Рекомендуемый порядок углубленного изучения</strong></h2>
<ol class="marker:text-quiet list-decimal">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Неделя 1-2:</strong> PostgreSQL 18 новые возможности (AIO, skip scan, virtual columns) — это база для понимания современных оптимизаций</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Неделя 3-4:</strong> Специализированные индексы (BRIN для временных рядов, GIN для JSON) — практически применимо сразу</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Неделя 5-6:</strong> Продвинутая логическая репликация и миграции — критично для high availability систем</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Неделя 7-8:</strong> Мониторинг (pg_stat_io, pgBadger) и параллелизм — инструменты для ежедневного администрирования</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Неделя 9-10:</strong> Расширенные расширения (TimescaleDB, pgvector, PostGIS) — в зависимости от вашего используемого стека</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Неделя 11-12:</strong> Zero-downtime миграции и масштабирование — навыки для критических операций</p>
</li>
</ol>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0"><strong>Ключевые источники для дальнейшего самообучения</strong></h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Официальная документация PostgreSQL 18, блоги Crunchy Data и Cybertec-PostgreSQL, исследования Percona и Azure, сообщество pganalyze для advanced optimization, и GitHub проекты pgroll, pgBackRest, TimescaleDB для практического опыта.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Каждая из 24 тем может быть развёрнута в полноценный курс study с лабораторными работами. Выбор темы должен соответствовать вашему текущему техническому стеку и приоритетам производства.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">cybertec-postgresql</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+26</span></span></span></span></span>​</p></div></div></div></div></div></div><div class="flex items-center justify-between"><div class="-ml-sm gap-xs flex flex-shrink-0 items-center"><button aria-label="Share" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-share-3"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Copy" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button data-state="closed" aria-label="Rewrite" aria-expanded="false" aria-haspopup="dialog" aria-controls="radix-:r75r:" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 hover:text-foreground hover:bg-subtle"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-repeat"></use></svg></button><button type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full hover:text-foreground hover:bg-subtle px-3 relative"><span style="opacity: 1; transition: opacity 150ms 150ms;" class="text-box-trim-both"><div class="gap-x-sm flex flex-row"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute opacity-0"><defs><clipPath id="clip-path-default"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.0635 0.704214C9.13824 0.253115 8.09868 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C8.09868 14 9.13824 13.7469 10.0635 13.2958C8.19825 11.8312 7 9.55552 7 7C7 4.44448 8.19825 2.16882 10.0635 0.704214Z" fill="#D9D9D9"></path></clipPath></defs></svg><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute opacity-0"><defs><clipPath id="clip-path-small"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.57242 0.57787C7.7928 0.20734 6.92062 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12C6.92062 12 7.7928 11.7927 8.57242 11.4221C7.00228 10.1385 6 8.18628 6 6C6 3.81372 7.00228 1.86154 8.57242 0.57787Z" fill="#D9D9D9"></path></clipPath></defs></svg><div class="gap-xs relative flex shrink-0 items-center"><div class="ml-xs flex"><div style="clip-path: url(&quot;#clip-path-default&quot;);" class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="betterstack.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=betterstack.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div><div style="clip-path: url(&quot;#clip-path-default&quot;);" class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="cybertec-postgresql.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=cybertec-postgresql.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div><div class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="truncate font-sans text-xs font-medium text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">79</div></div></span><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></button></div><div class="gap-x-xs flex flex-shrink-0 items-center"><span><button aria-label="Research" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-cpu"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></span><span><div class="gap-xs flex items-center border-subtlest ring-subtlest divide-subtlest bg-transparent"><button aria-label="Helpful" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-thumb-up"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Not helpful" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-thumb-down"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></div></span><div><button data-state="closed" aria-label="More actions" aria-expanded="false" aria-haspopup="dialog" aria-controls="radix-:r760:" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 hover:text-foreground hover:bg-subtle"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-dots"></use></svg></button></div></div></div></div></div></div></div></div><div class="gap-y-lg flex flex-col first:mt-0"></div></div></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-shopping" hidden="" id="radix-:r4l:-content-shopping" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-hotels" hidden="" id="radix-:r4l:-content-hotels" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-places" hidden="" id="radix-:r4l:-content-places" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-jobs" hidden="" id="radix-:r4l:-content-jobs" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-videos" hidden="" id="radix-:r4l:-content-videos" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-images" hidden="" id="radix-:r4l:-content-images" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-sources" hidden="" id="radix-:r4l:-content-sources" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-assets" hidden="" id="radix-:r4l:-content-assets" tabindex="0" class="focus:outline-none"></div></div></div></div></div></div></div><div><div><div class="" style="margin-top: 0px; padding-bottom: 0px;"><div class="pt-[var(--thread-visual-spacing)] md:pt-lg pb-[var(--thread-visual-spacing)] px-[var(--thread-visual-spacing)] border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="isolate mx-auto max-w-threadContentWidth"><div style="opacity: 1; transform: none;" class="bg-base erp-sidecar:pt-0 erp-mobile-sidecar:pt-0"><div class="mx-auto max-w-threadContentWidth"><div class="max-w-threadContentWidth relative isolate z-20 mx-auto"><div class="relative z-10"><div class="group relative flex items-end gap-0.5"><div class="-inset-md pointer-events-none absolute select-none"></div><div class="relative min-w-0 flex-1 flex justify-end"><div class="flex items-center gap-2"><div class="flex shrink-0 items-center gap-1 opacity-0 transition-opacity duration-150 pointer-events-none group-hover:pointer-events-auto group-hover:opacity-100 focus-within:pointer-events-auto focus-within:opacity-100" aria-hidden="false"><button aria-label="Edit Query" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-pencil"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Copy Query" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></div><div class="group/title relative inline-flex flex-col"><div style="mask-image: linear-gradient(black 70%, transparent 97%);"><div style="transition: height 200ms cubic-bezier(0.16, 1, 0.3, 1); overflow: hidden; height: 144px;"><div><div class="group/query relative whitespace-pre-line !text-wrap break-words [word-break:break-word] font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex min-w-[48px] items-center justify-center bg-offset text-foreground rounded-2xl p-3 font-sans text-base font-normal select-none max-w-[600px]"><span class="select-text" style="overflow-wrap: anywhere;">исследуй вопросы ниже для Postgresql 18
```
Исследовать:
Механизм skip scan в планах EXPLAIN ANALYZE
Когда плanner выбирает skip scan vs full table scan
Оптимизация структуры индексов для skip scan
Влияние на производительность сложных аналитических запросов
```</span></div></div></div></div></div><div class="top-xs relative flex -mt-2"><div class="-mt-0.5" data-testid="toggle-query-expand-button"><button type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-6 text-xs cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex hover:text-foreground hover:bg-subtle px-2 rounded-md relative"><span style="opacity: 1; transition: opacity 150ms 150ms;" class="text-box-trim-both pr-1">Show more</span><div style="opacity: 1; transition: opacity 150ms 150ms;" class="ml-1 flex items-center"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-chevron-down"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></button></div></div></div></div></div></div></div></div></div></div><div class="mx-auto max-w-threadContentWidth"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-default" id="radix-:r4l:-content-default" tabindex="0" class="focus:outline-none" style=""><div class="gap-y-md mt-md flex flex-col"><div dir="ltr" data-orientation="horizontal" class="grid w-full min-w-0 grid-cols-[minmax(0,1fr)]"><div style="opacity: 1;" class="col-start-1 row-start-2"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:rqo:-trigger-thread" id="radix-:rqo:-content-thread" tabindex="0" class="focus:outline-none" style=""><div class="border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="gap-y-md flex flex-col"><div class="flex flex-col gap-sm"><button class="gap-x-0.5 flex items-center whitespace-nowrap text-quiet text-sm">6 steps completed<span class="duration-quick inline-block transition-transform ease-in-out text-quiet rotate-0"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-chevron-right"></use></svg></span></button></div><div class="relative font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto" id="markdown-content-2" class="gap-y-md after:clear-both after:block after:content-['']"><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Now I'll create a comprehensive professional report for the user.</p>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0 md:text-lg [hr+&amp;]:mt-4" id="postgresql-18-skip-scan">PostgreSQL 18 Skip Scan: Механизм, диагностика и оптимизация</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Skip scan — это революционная оптимизация в PostgreSQL 18, которая фундаментально изменяет способ использования многостолбцовых B-tree индексов, позволяя планировщику эффективно запрашивать эти индексы даже когда первый столбец не фильтруется явно в условиях WHERE. Это исследование охватывает четыре ключевые области: механизм работы, интерпретацию EXPLAIN ANALYZE, факторы выбора планировщиком и практическую оптимизацию.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">I. Механизм Skip Scan в планах EXPLAIN ANALYZE</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. Базовое понимание: от линейного к целевому сканированию</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">До PostgreSQL 18, если у вас был многостолбцовый индекс <code>(region, category, date)</code> и запрос не фильтровал по ведущему столбцу <code>region</code>, PostgreSQL был вынужден либо сканировать весь индекс, либо прибегать к последовательному сканированию таблицы:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">opensource-db</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Индекс: CREATE INDEX idx_sales ON sales(region, category, date);</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Запрос</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> sales 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> category </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'Electronics'</span><span> </span><span class="token token operator">AND</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">date</span><span> </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'2024-01-01'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">В PostgreSQL 17 этот запрос игнорировал индекс, потому что <code>region</code> (первый столбец) не был указан.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostgreSQL 18 с skip scan решает эту проблему, внутренне генерируя динамические условия равенства для каждого уникального значения пропущенного столбца:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgedge</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>FOR EACH region_value IN (SELECT DISTINCT region FROM sales):
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    SEARCH INDEX WHERE region = region_value 
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                      AND category = 'Electronics' 
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                      AND date &gt; '2024-01-01'
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Ключевой инсайт: вместо одного сканирования всего индекса выполняется серия целевых поисков, по одному для каждого различного значения в пропущенном столбце. Если <code>region</code> имеет только 4 уникальных значения, планировщик выполнит 4 отдельных индексных поиска.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">B. Структурная организация B-tree и навигация</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostgreSQL B-tree индекс структурирован как сбалансированное дерево с корневой страницей, промежуточными узлами и листовыми страницами, содержащими фактические значения и указатели на данные таблицы.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/current/indexes-multicolumn.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Традиционное сканирование:</p>
<ol class="marker:text-quiet list-decimal">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Входит в индекс через корневую страницу</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Навигирует по промежуточным узлам, используя ведущие столбцы</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Достигает листовых страниц</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Сканирует все листовые страницы последовательно</p>
</li>
</ol>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Skip scan переопределяет этот процесс:</p>
<ol class="marker:text-quiet list-decimal">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Идентифицирует все уникальные значения в пропущенном столбце (например, через статистику <code>pg_stats</code>)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Для каждого значения пропущенного столбца:</p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Позиционируется в B-tree, используя полное составное условие (пропущенный_столбец = текущее_значение AND остальные_условия)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Читает только релевантные листовые страницы для этого значения</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Прыгает (skips) к следующему значению пропущенного столбца</strong>, минуя промежуточные листовые страницы</p>
</li>
</ul>
</li>
</ol>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">C. Конкретный пример из PostgreSQL документации</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Официальный пример из PostgreSQL 18 документации показывает skip scan в действии:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/current/using-explain.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Создание индекса с низкой кардинальностью на ведущий столбец</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_tenk1_four_unique1 </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> tenk1</span><span class="token token punctuation">(</span><span>four</span><span class="token token punctuation">,</span><span> unique1</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- four имеет 4 уникальных значения (0, 1, 2, 3)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- unique1 имеет 10000 уникальных значений</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Запрос БЕЗ условия на four (ведущий столбец)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">EXPLAIN</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ANALYZE</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> four</span><span class="token token punctuation">,</span><span> unique1 </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> tenk1 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> four </span><span class="token token operator">BETWEEN</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span> </span><span class="token token operator">AND</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">3</span><span> </span><span class="token token operator">AND</span><span> unique1 </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">42</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>EXPLAIN ANALYZE вывод:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>Index Only Scan using tenk1_four_unique1_idx on tenk1 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">  (cost=0.29..6.90 rows=1 width=8)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">  (actual time=0.006..0.007 rows=1 loops=1)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Index Cond: ((four &gt;= 1) AND (four &lt;= 3) AND (unique1 = 42))
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Index Searches: 3
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Buffers: shared hit=7
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Интерпретация:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>Index Searches: 3</code> — критический метрик, указывающий на skip scan</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Три отдельных поиска в индексе:</p>
<ol class="marker:text-quiet list-decimal">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>four = 1 AND unique1 = 42</code> (прочитано одно значение листовой страницы)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>four = 2 AND unique1 = 42</code> (прочитано одно значение листовой страницы)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><code>four = 3 AND unique1 = 42</code> (прочитано одно значение листовой страницы)</p>
</li>
</ol>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Каждый поиск читает один или несколько листовых страниц, <strong>пропускает все остальные листовые страницы</strong></p>
</li>
</ul>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">D. Представление в EXPLAIN: где появляется skip scan</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Skip scan не всегда явно обозначен как отдельный узел плана, потому что это оптимизация <strong>внутри</strong> Index Scan узла:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://betterstack.com/community/guides/databases/skip-scans-postgres/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">betterstack</span></span></span></a></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Вариант 1: Явное обозначение (редко)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Seq Scan
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token operator">-</span><span class="token token operator">&gt;</span><span> Custom Scan </span><span class="token token punctuation">(</span><span>SkipScan</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Вариант 2: Регулярный Index Scan с метрикой Index Searches (обычно)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">Index</span><span> Scan </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">using</span><span> idx_name
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">Index</span><span> Searches: N
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Вариант 3: Bitmap Index Scan с множественными поисками</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>Bitmap </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">Index</span><span> Scan </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">on</span><span> idx_name
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">Index</span><span> Searches: N
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ключевой индикатор:</strong> Метрика <code>Index Searches: N</code> где N &gt; 1 показывает, что skip scan был применён. Это единственный надежный способ диагностировать skip scan в EXPLAIN выводе.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://neon.com/postgresql/postgresql-18/enhanced-explain"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span></span></span></a></span>​</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">E. Внутренние механизмы проб (probes)</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Документация PostgreSQL определяет "probe" как малый направленный поиск внутри B-tree:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.linkedin.com/posts/mikhailfishzon_postgresql-databaseperformance-dataengineering-activity-7389038151509557248-vsIy"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">linkedin</span></span></span></a></span>​</p>
<ol class="marker:text-quiet list-decimal">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Позиционирование</strong>: Для каждого distinct значения пропущенного столбца PostgreSQL конструирует полное составное условие. Например, если пропущенный столбец = status, а остальные условия = (category='shoes', date&gt;2025-01-01), то для каждого distinct status значения (active, pending, shipped) создаётся зонд:</p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">(status='active', category='shoes', date&gt;2025-01-01)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">(status='pending', category='shoes', date&gt;2025-01-01)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">(status='shipped', category='shoes', date&gt;2025-01-01)</p>
</li>
</ul>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Навигация</strong>: Каждый зонд использует стандартный B-tree поиск для позиционирования себя в индексе, начиная с корневой страницы и спускаясь к листовым страницам.</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Переход (skip)</strong>: После обработки всех записей для текущего значения пропущенного столбца, PostgreSQL выполняет новый поиск для следующего значения, <strong>прыгая непосредственно в позицию в индексе</strong>, вместо последовательного сканирования промежуточных листовых страниц.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.linkedin.com/posts/mikhailfishzon_postgresql-databaseperformance-dataengineering-activity-7389038151509557248-vsIy"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">linkedin</span></span></span></a></span>​</p>
</li>
</ol>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">II. Когда планировщик выбирает Skip Scan vs Full Table Scan</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. Cost-based decision model</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostgreSQL не может быть принуждён использовать skip scan — решение принимает автоматический планировщик на основе оценки стоимости.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Планировщик сравнивает примерные затраты:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>Cost(Sequential Scan) = (table_pages × seq_page_cost) + (rows × cpu_tuple_cost)
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Cost(Index Scan) = (index_pages × random_page_cost) + 
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                   (index_searches × B-tree_navigation_cost) +
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                   (heap_fetches × random_page_cost)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Cost(Skip Scan) = (skipped_columns_distinct_values × probe_cost) +
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                  (relevant_index_pages × page_access_cost) +
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                  (heap_fetches × random_page_cost)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Планировщик выбирает минимальную оценённую стоимость. Skip scan выигрывает, когда:</p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Количество distinct значений в пропущенном столбце мало</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Таблица достаточно большая, что sequential scan был бы дорогим</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Условия на более поздних столбцах достаточно селективны<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://betterstack.com/community/guides/databases/skip-scans-postgres/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">betterstack</span></span></span></a></span>​</p>
</li>
</ul>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">B. Критические факторы: кардинальность пропущенного столбца</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Оптимальное количество distinct значений для skip scan:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>1-5 значений</strong>: Excellent — skip scan почти наверняка будет выбран</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Пример: статус с 3 значениями (active, pending, inactive)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_orders_status_date </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> orders</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span class="token token punctuation">,</span><span> order_date</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> orders </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> order_date </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'2024-01-01'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Skip scan выполнит 3 целевых поиска</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>5-20 значений</strong>: Good — вероятен skip scan в зависимости от размера таблицы</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Пример: регион с 10 значениями</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_sales_region_date </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> sales</span><span class="token token punctuation">(</span><span>region</span><span class="token token punctuation">,</span><span> sale_date</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>20-100 значений</strong>: Marginal — skip scan может быть выбран для больших таблиц</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_events_type_timestamp </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> events</span><span class="token token punctuation">(</span><span>event_type</span><span class="token token punctuation">,</span><span> ts</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">COUNT</span><span class="token token punctuation">(</span><span class="token token operator">*</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> events </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> ts </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">-</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">interval</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'7 days'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Если event_type имеет ~50 значений и таблица содержит миллиарды строк</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>100+ значений</strong>: Poor — skip scan обычно не будет использован</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Пример: user_id с 1M значений - skip scan неэффективен</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_logs_user_date </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> logs</span><span class="token token punctuation">(</span><span>user_id</span><span class="token token punctuation">,</span><span> created_at</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Планировщик предпочтёт sequential scan или index_only_scan</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Почему кардинальность критична:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">xata</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Skip scan имеет фиксированные издержки на каждый probe:</p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Навигация по B-tree (от корня к листу)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Позиционирование в индексе</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Начало нового поиска</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Если пропущенный столбец имеет 1000 distinct значений, эти издержки повторяются 1000 раз. При этом полное сканирование индекса прочитает данные один раз последовательно, что часто быстрее.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://neon.com/postgresql/postgresql-18/skip-scan-btree"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span></span></span></a></span>​</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">C. Размер таблицы и эффективность кеша</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Планировщик учитывает параметр <code>effective_cache_size</code> при принятии решений:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/current/runtime-config-query.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>-- Если таблица ПОЛНОСТЬЮ помещается в shared_buffers:
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">-- Sequential scan может быть оптимален даже с хорошим индексом
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">-- Если таблица намного больше доступной памяти:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">-- Skip scan становится очень привлекательным, потому что:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">-- - Читает только релевантные страницы индекса
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">-- - Пропускает большие секции индекса
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">-- - Кеширует горячие данные
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Практический пример:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://genexdbs.com/postgresql-18-new-features-you-should-not-miss/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">genexdbs</span></span></span></a></span>​</p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostgreSQL 17: Seq Scan, 152 секунды</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostgreSQL 18: Skip Scan, 51 секунд</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Улучшение: 3x</strong> (для таблицы с миллионами строк)</p>
</li>
</ul>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">D. Селективность условий на поздних столбцах</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Skip scan требует полезных условий на столбцах <strong>после</strong> пропущенного столбца:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/current/indexes-multicolumn.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Пример 1: ХОРОШИЙ кандидат для skip scan</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Индекс: (status, customer_id)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> orders 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> customer_id </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">42</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Equality на поздний столбец = GOOD</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token operator">AND</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span> </span><span class="token token operator">IN</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'pending'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'processing'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Пример 2: ПЛОХОЙ кандидат</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Индекс: (status)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> orders 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span> </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'pending'</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Нет полезного условия на поздний столбец</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Планировщик, вероятно, выберет seq scan</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Пример 3: ОПТИМАЛЬНЫЙ</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Индекс: (status, order_date)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">COUNT</span><span class="token token punctuation">(</span><span class="token token operator">*</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> orders
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> order_date </span><span class="token token operator">&gt;=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'2024-01-01'</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Range на поздний столбец = EXCELLENT</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token operator">AND</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'active'</span><span class="token token punctuation">;</span><span>           </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Точное совпадение на пропущенный</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">E. Случаи, когда планировщик НЕ выбирает skip scan</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Даже с низкой кардинальностью пропущенного столбца:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Случай 1: Результат покрывает большой процент таблицы</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> orders </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span> </span><span class="token token operator">IN</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'active'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'pending'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Если это 60% таблицы, sequential scan быстрее, чем skip scan</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Случай 2: Индекс на малой таблице</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> orders </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'active'</span><span> </span><span class="token token operator">AND</span><span> id </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">42</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Таблица с 1000 строк: seq scan почти всегда быстрее</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Случай 3: Неправильный порядок столбцов в условиях</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_orders </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> orders</span><span class="token token punctuation">(</span><span>category</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">date</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> orders 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'active'</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- status идёт вторым в индексе</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Skip scan не применяется, потому что нет условия на category</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Случай 4: Неселективное условие на позднем столбце</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_products </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> products</span><span class="token token punctuation">(</span><span>category</span><span class="token token punctuation">,</span><span> in_stock</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> products 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> in_stock </span><span class="token token operator">=</span><span> </span><span class="token token boolean">true</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 99% таблицы имеет in_stock=true</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Skip scan + range scan будет очень дорогим</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">III. Оптимизация структуры индексов для Skip Scan</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. Принципы проектирования индексов для skip scan</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Правило 1: Низкая кардинальность впереди (contra-intuitive)</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Исторически, рекомендовалось помещать высокую кардинальность впереди для лучшей селективности. Со skip scan это изменилось:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgedge</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- СТАРАЯ РЕКОМЕНДАЦИЯ (ещё актуальна для обычных индексов)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_orders_v1 </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> orders</span><span class="token token punctuation">(</span><span>customer_id</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">date</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- customer_id имеет высокую кардинальность</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- НОВАЯ РЕКОМЕНДАЦИЯ (если часто запрашиваем по status)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_orders_v2 </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> orders</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span class="token token punctuation">,</span><span> customer_id</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">date</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- status имеет низкую кардинальность (3-5 значений)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Теперь skip scan может быть использован для запросов без status</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ГИБРИДНОЕ РЕШЕНИЕ (если нужны ОБА паттерна)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_orders_status_date </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> orders</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">date</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_orders_customer_date </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> orders</span><span class="token token punctuation">(</span><span>customer_id</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">date</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Отдельные индексы для разных паттернов запросов</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Правило 2: Равенство перед range</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Индекс с равенством, а затем range</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_events_type_time </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> events</span><span class="token token punctuation">(</span><span>event_type</span><span class="token token punctuation">,</span><span> event_time </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DESC</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Запрос 1: Skip scan отлично работает</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> events 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> event_time </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">-</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">interval</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'7 days'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Skip scan: 15 probes (15 distinct event_types)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Запрос 2: Даже лучше с явным условием</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> events 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> event_type </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'login'</span><span> </span><span class="token token operator">AND</span><span> event_time </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">-</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">interval</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'7 days'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Обычный индексный скан без skip scan (быстрее)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Правило 3: Учитывайте реальные паттерны запросов</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Анализ реальных запросов</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Запрос A (40% запросов): SELECT * FROM orders WHERE date &gt; ?</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Запрос B (35% запросов): SELECT * FROM orders WHERE status = ? AND date &gt; ?</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Запрос C (25% запросов): SELECT * FROM orders WHERE customer_id = ? AND date &gt; ?</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ОПТИМАЛЬНАЯ стратегия:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_orders_date </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> orders</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">date</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Для запроса A</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_orders_status_date </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> orders</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">date</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Для B (skip scan)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_orders_customer_date </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> orders</span><span class="token token punctuation">(</span><span>customer_id</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">date</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Для C</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- АЛЬТЕРНАТИВА: один индекс может пожертвовать performance для B</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_orders_status_customer_date </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> orders</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span class="token token punctuation">,</span><span> customer_id</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">date</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Skip scan для B, обычный scan для C</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">B. Использование INCLUDE столбцов</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Index-only scans возможны с INCLUDE столбцами, что улучшает performance skip scan:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/current/indexes-multicolumn.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Индекс с INCLUDE (листовые страницы содержат all данные)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_orders_skip_scan </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> orders</span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span class="token token punctuation">,</span><span>           </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Low cardinality, используется для skip scan</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    order_date</span><span class="token token punctuation">,</span><span>       </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Range/equality</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    INCLUDE </span><span class="token token punctuation">(</span><span>customer_id</span><span class="token token punctuation">,</span><span> amount</span><span class="token token punctuation">,</span><span> product_id</span><span class="token token punctuation">)</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Данные для index-only scan</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Запрос может быть обслужен ТОЛЬКО из индекса</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">EXPLAIN</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ANALYZE</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> customer_id</span><span class="token token punctuation">,</span><span> amount </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> orders 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> order_date </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'2024-01-01'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Index Only Scan (не требует heap fetches)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Index Searches: 5 (для 5 distinct status значений)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">C. Partial indexes для дополнительной оптимизации</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Комбинировать skip scan с partial indexes для дальнейшей оптимизации:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Partial index только для активных заказов</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_orders_active </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> orders</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span class="token token punctuation">,</span><span> order_date</span><span class="token token punctuation">)</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span> </span><span class="token token operator">IN</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'pending'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'processing'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Запрос теперь использует меньший индекс</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> orders 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span> </span><span class="token token operator">IN</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'pending'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'processing'</span><span class="token token punctuation">)</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token operator">AND</span><span> order_date </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'2024-01-01'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Skip scan с меньшим количеством leaf pages = быстрее</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">D. Порядок сортировки в индексе</h2>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- DESC порядок для частых диапазонных запросов</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_events_type_time_desc </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> events</span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    event_type</span><span class="token token punctuation">,</span><span>      </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Skip scan по типам событий</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    event_time </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DESC</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Сортировка в обратном порядке</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Запрос получает упорядоченные результаты из индекса</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> events 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> event_time </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">-</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">interval</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'7 days'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> event_time </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DESC</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- EXPLAIN показывает:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Index Only Scan (уже отсортирован)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Index Searches: 25 (для 25 distinct event_types)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">IV. Влияние Skip Scan на производительность аналитических запросов</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. Типичные аналитические паттерны, выигрывающие от skip scan</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Паттерн 1: Time-series аналитика с категориями</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Таблица: 500 млн строк временных рядов</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Столбцы: sensor_id (1000 unique), metric_type (5 unique), </span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">--          timestamp, value</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_metrics_type_time </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> metrics</span><span class="token token punctuation">(</span><span>metric_type</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">timestamp</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DESC</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Запрос: Получить последние 7 дней для всех метрик типов</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- PostgreSQL 17: Seq Scan 5-8 секунд</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- PostgreSQL 18 с skip scan: 0.5-1.2 секунды (5-8x improvement)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> metric_type</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">COUNT</span><span class="token token punctuation">(</span><span class="token token operator">*</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">AVG</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">value</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> metrics
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">timestamp</span><span> </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">-</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">interval</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'7 days'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">GROUP</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> metric_type</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">EXPLAIN</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ANALYZE</span><span> показал:
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">Index</span><span> Only Scan </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">using</span><span> idx_metrics_type_time
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">Index</span><span> Searches: </span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Пять проб, по одной на каждый metric_type</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  Buffers: shared hit</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">2340</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">read</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">156</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  Execution </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">Time</span><span>: </span><span class="token token" style="color: rgb(222, 147, 95);">0.847</span><span> ms
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Паттерн 2: Отчётность по регионам/категориям</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Таблица: 100 млн заказов</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Индекс: (region, created_at, amount)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_orders_region_date </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> orders</span><span class="token token punctuation">(</span><span>region</span><span class="token token punctuation">,</span><span> created_at </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DESC</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Получить статистику по всем регионам за последний день</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- PostgreSQL 17: 2.3 секунды (seq scan)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- PostgreSQL 18: 0.3 секунды (skip scan with 15 regions)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    region</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(197, 200, 198);">COUNT</span><span class="token token punctuation">(</span><span class="token token operator">*</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> order_count</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(197, 200, 198);">SUM</span><span class="token token punctuation">(</span><span>amount</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> total_amount</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(197, 200, 198);">AVG</span><span class="token token punctuation">(</span><span>amount</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> avg_amount
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> orders
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> created_at </span><span class="token token operator">&gt;=</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CURRENT_DATE</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">GROUP</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> region</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">EXPLAIN</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ANALYZE</span><span>:
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">Index</span><span> Only Scan </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">using</span><span> idx_orders_region_date
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">Index</span><span> Searches: </span><span class="token token" style="color: rgb(222, 147, 95);">15</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  Planning </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">Time</span><span>: </span><span class="token token" style="color: rgb(222, 147, 95);">0.234</span><span> ms
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  Execution </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">Time</span><span>: </span><span class="token token" style="color: rgb(222, 147, 95);">301.543</span><span> ms </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">40</span><span class="token token operator">%</span><span> improvement</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Паттерн 3: DISTINCT запросы на поздних столбцах</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Получить все уникальные значения столбца за период</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Индекс: (status, user_id, timestamp)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DISTINCT</span><span> user_id
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> events
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">status</span><span> </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'completed'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token operator">AND</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">timestamp</span><span> </span><span class="token token operator">&gt;=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'2024-01-01'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Skip scan: Один probe для status='completed', </span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">--            затем скан unique user_id значений</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 10-100x быстрее чем seq scan на больших таблицах</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">B. Бенчмарк-результаты (из реальных реализаций)</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Бенчмарк 1: PostgreSQL официальный тест</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://genexdbs.com/postgresql-18-new-features-you-should-not-miss/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">genexdbs</span></span></span></a></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>Query: SELECT * FROM large_table WHERE indexed_column = constant
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Table size: 100 млн строк
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Index leading column cardinality: 4
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">PostgreSQL 17 (Seq Scan):     152 seconds
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">PostgreSQL 18 (Skip Scan):     51 seconds
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Improvement:                  3x faster (66% reduction)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Бенчмарк 2: Xata.io реальная нагрузка</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://xata.io/blog/going-down-the-rabbit-hole-of-postgres-18-features"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">xata</span></span></span></a></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>Time-series queries with low-cardinality prefix columns
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Query result set size variations:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Small result (0.01% of table):
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">  PG17: 85ms (seq scan)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">  PG18: 12ms (skip scan)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">  Improvement: 7x
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Medium result (1% of table):
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">  PG17: 340ms
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">  PG18: 95ms
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">  Improvement: 3.5x
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Large result (20% of table):
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">  PG17: 2100ms (seq scan preferred)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">  PG18: 1200ms (skip scan still wins)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">  Improvement: 1.75x
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Бенчмарк 3: Planetscale PostgreSQL 17 vs 18</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://planetscale.com/blog/benchmarking-postgres-17-vs-18"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">planetscale</span></span></span></a></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>Mixed OLAP workload with various index strategies:
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">- Skip scan improved 40-70% for eligible queries
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">- No regression for non-skip-scan queries
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">- Storage efficiency improved due to better index utilization
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">C. Предположение неправильного плана и способы исправления</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Сценарий: Skip scan не был использован, но должен был</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Проблема: Запрос использует seq scan вместо skip scan</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">EXPLAIN</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ANALYZE</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> category</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">COUNT</span><span class="token token punctuation">(</span><span class="token token operator">*</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> products
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> last_update </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'2024-01-01'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">GROUP</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> category</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- QUERY PLAN:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Seq Scan on products (cost=0.00..1000000.00 rows=1000000)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">--   Filter: (last_update &gt; '2024-01-01')</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Решение 1: Проверить, существует ли индекс</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_indexes </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> tablename </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'products'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Если индекса нет, создать:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_products_category_date </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> products</span><span class="token token punctuation">(</span><span>category</span><span class="token token punctuation">,</span><span> last_update </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DESC</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Решение 2: Обновить статистику (может быть неточной)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ANALYZE</span><span> products</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Решение 3: Увеличить default_statistics_target</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> products </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">COLUMN</span><span> category </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">STATISTICS</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">500</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ANALYZE</span><span> products</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Решение 4: Проверить planner cost parameters</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SHOW</span><span> random_page_cost</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Должен быть 1.1 для SSD, 4.0 для HDD</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SHOW</span><span> effective_cache_size</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Должен быть ~75% RAM</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Решение 5: Принудительное тестирование (только для диагностики)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> enable_seqscan </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">OFF</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">EXPLAIN</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ANALYZE</span><span> </span><span class="token token punctuation">.</span><span class="token token punctuation">.</span><span class="token token punctuation">.</span><span> </span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>RESET enable_seqscan</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">D. Временные ряды и аналитические нагрузки</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Skip scan особенно мощен для временных рядов, где:</p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Низкая кардинальность на "категории" (sensor_type, region, account_id)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Высокая кардинальность на временных измерениях (timestamp, sequence)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Частые запросы: "Последние N дней для всех категорий"<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">devtechtools</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
</li>
</ul>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Оптимальная структура для временных рядов</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> timeseries </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id BIGSERIAL </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PRIMARY</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">KEY</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    sensor_id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INT</span><span class="token token punctuation">,</span><span>           </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 100s-1000s unique</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    metric_type </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VARCHAR</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">50</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 5-20 unique (PERFECT для skip scan)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">timestamp</span><span> TIMESTAMPTZ</span><span class="token token punctuation">,</span><span>   </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Billions of distinct values</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">value</span><span> FLOAT8
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Индекс для skip scan</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_ts_metric_time </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> timeseries</span><span class="token token punctuation">(</span><span>metric_type</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">timestamp</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DESC</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    INCLUDE </span><span class="token token punctuation">(</span><span>sensor_id</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">value</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- INCLUDE для index-only scans</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Типичный аналитический запрос (выигрывает от skip scan)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    metric_type</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    DATE_TRUNC</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'day'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">timestamp</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">day</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(197, 200, 198);">COUNT</span><span class="token token punctuation">(</span><span class="token token operator">*</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> count</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(197, 200, 198);">AVG</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">value</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> avg_val</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(197, 200, 198);">MIN</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">value</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> min_val</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(197, 200, 198);">MAX</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">value</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> max_val
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> timeseries
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">timestamp</span><span> </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">-</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">interval</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'30 days'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">GROUP</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> metric_type</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Результаты:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- PG17: 45 seconds (Seq Scan всей таблицы)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- PG18: 4.2 seconds (Skip Scan: 1 probe per metric_type)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">V. Диагностические инструменты и мониторинг</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. Проверка использования skip scan</h2>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 1. Получить EXPLAIN ANALYZE с полными деталями</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">EXPLAIN</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ANALYZE</span><span class="token token punctuation">,</span><span> BUFFERS</span><span class="token token punctuation">,</span><span> VERBOSE</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> your_table </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> your_conditions</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Ищите: "Index Searches: N" где N &gt; 1</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Это единственный надежный индикатор skip scan</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 2. Сравнить различные версии плана</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- PostgreSQL 17 vs 18 для одного запроса</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Смотрите: снижение buffers read, улучшение execution time</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 3. Проверить индексы на таблице</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> indexname</span><span class="token token punctuation">,</span><span> indexdef 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_indexes 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> tablename </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'your_table'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> indexname</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 4. Проверить статистику столбцов (кардинальность)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> attname</span><span class="token token punctuation">,</span><span> n_distinct</span><span class="token token punctuation">,</span><span> n_distinct_inherited
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_stats
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> tablename </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'your_table'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token operator">AND</span><span> attname </span><span class="token token operator">IN</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'column1'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'column2'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Ищите: низкие n_distinct значения на leading columns</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">B. Мониторинг skip scan в production</h2>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Создать представление для отслеживания индексов, кандидатов на skip scan</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VIEW</span><span> v_skip_scan_candidates </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">AS</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    schemaname</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    tablename</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    indexname</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    indexdef</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    idx_blks_hit</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    idx_blks_read</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    idx_tup_read</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    idx_tup_fetch</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CASE</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHEN</span><span> idx_blks_read </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">THEN</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">ROUND</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">100.0</span><span> </span><span class="token token operator">*</span><span> idx_blks_hit </span><span class="token token operator">/</span><span> </span><span class="token token punctuation">(</span><span>idx_blks_hit </span><span class="token token operator">+</span><span> idx_blks_read</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>        </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ELSE</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">100.0</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">END</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> cache_hit_ratio
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_stat_user_indexes
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> indexrelname </span><span class="token token operator">LIKE</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'%_idx'</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token operator">AND</span><span> idx_tup_read </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> idx_blks_read </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DESC</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Использование</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> v_skip_scan_candidates </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">20</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Для конкретного индекса, проверить если он кандидат для skip scan</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    indexname</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    array_agg</span><span class="token token punctuation">(</span><span>attname</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">columns</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    array_agg</span><span class="token token punctuation">(</span><span>n_distinct</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> cardinalities
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_stat_user_indexes i
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">JOIN</span><span> pg_index idx </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> i</span><span class="token token punctuation">.</span><span>indexrelid </span><span class="token token operator">=</span><span> idx</span><span class="token token punctuation">.</span><span>indexrelid
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">JOIN</span><span> pg_attribute a </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> a</span><span class="token token punctuation">.</span><span>attrelid </span><span class="token token operator">=</span><span> idx</span><span class="token token punctuation">.</span><span>indrelid 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                      </span><span class="token token operator">AND</span><span> a</span><span class="token token punctuation">.</span><span>attnum </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ANY</span><span class="token token punctuation">(</span><span>idx</span><span class="token token punctuation">.</span><span>indkey</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">JOIN</span><span> pg_stats s </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> s</span><span class="token token punctuation">.</span><span>tablename </span><span class="token token operator">=</span><span> i</span><span class="token token punctuation">.</span><span>relname 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                 </span><span class="token token operator">AND</span><span> s</span><span class="token token punctuation">.</span><span>attname </span><span class="token token operator">=</span><span> a</span><span class="token token punctuation">.</span><span>attname
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> i</span><span class="token token punctuation">.</span><span>relname </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'your_table'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">GROUP</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> i</span><span class="token token punctuation">.</span><span>indexname</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Анализировать результаты:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Если первые 1-2 столбца имеют n_distinct &lt; 100</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- И остальные столбцы имеют n_distinct &gt; 10000</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- --&gt; Хороший кандидат для skip scan</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">C. Исторический анализ улучшений</h2>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Собирать метрики за время для отслеживания улучшений</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> index_metrics_history </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    capture_date TIMESTAMPTZ </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DEFAULT</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    indexname </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VARCHAR</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    idx_scan </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BIGINT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    idx_tup_read </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BIGINT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    idx_tup_fetch </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BIGINT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    heap_blks_hit </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BIGINT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    heap_blks_read </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BIGINT</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Ежедневная запись метрик</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INSERT</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INTO</span><span> index_metrics_history </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    indexname</span><span class="token token punctuation">,</span><span> idx_scan</span><span class="token token punctuation">,</span><span> idx_tup_read</span><span class="token token punctuation">,</span><span> idx_tup_fetch</span><span class="token token punctuation">,</span><span> heap_blks_hit</span><span class="token token punctuation">,</span><span> heap_blks_read
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    indexname</span><span class="token token punctuation">,</span><span> idx_scan</span><span class="token token punctuation">,</span><span> idx_tup_read</span><span class="token token punctuation">,</span><span> idx_tup_fetch</span><span class="token token punctuation">,</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    heap_blks_hit</span><span class="token token punctuation">,</span><span> heap_blks_read
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_stat_user_indexes</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Анализ тренда за месяц</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    indexname</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    date_trunc</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'day'</span><span class="token token punctuation">,</span><span> capture_date</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">day</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(197, 200, 198);">AVG</span><span class="token token punctuation">(</span><span>idx_scan</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> avg_scans</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(197, 200, 198);">AVG</span><span class="token token punctuation">(</span><span>idx_tup_read</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> avg_tuples_read</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(197, 200, 198);">AVG</span><span class="token token punctuation">(</span><span>heap_blks_read</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> avg_heap_reads
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> index_metrics_history
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> indexname </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'idx_orders_status_date'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token operator">AND</span><span> capture_date </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">-</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">interval</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'30 days'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">GROUP</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> indexname</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">day</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DESC</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Выводы</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Skip scan в PostgreSQL 18 — это трансформационная оптимизация, которая позволяет многостолбцовым B-tree индексам быть полезными для гораздо большего разнообразия паттернов запросов.</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ключевые моменты:</strong></p>
<ol class="marker:text-quiet list-decimal">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Механизм</strong>: Skip scan выполняет серию целевых индексных поисков для каждого уникального значения пропущенного столбца, вместо линейного сканирования всего индекса.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">opensource-db</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Диагностика</strong>: Метрика <code>Index Searches: N</code> в EXPLAIN ANALYZE указывает на применение skip scan.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://neon.com/postgresql/postgresql-18/enhanced-explain"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span></span></span></a></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Условия успеха</strong>: Низкая кардинальность пропущенного столбца (3-20 значений оптимально), равенство/диапазоны на более поздних столбцах, достаточно большие таблицы.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Автоматизация</strong>: Планировщик автоматически выбирает skip scan на основе cost-модели; нет необходимости в явной конфигурации.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.pgedge.com/blog/postgres-18-skip-scan-breaking-free-from-the-left-most-index-limitation"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgedge</span></span></span></a></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Производительность</strong>: 3-7x улучшения для аналитических запросов на аппендируемых таблицах; особенно эффективно для временных рядов.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">genexdbs</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Проектирование индексов</strong>: Новая рекомендация — помещать низкокардинальные столбцы впереди, обратное исторической практике, для максимизации skip scan преимуществ.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.pgedge.com/blog/postgres-18-skip-scan-breaking-free-from-the-left-most-index-limitation"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgedge</span></span></span></a></span>​</p>
</li>
</ol>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Источники:</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Xata.io, "Going Down the Rabbit Hole of PostgreSQL 18 Features", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://xata.io/blog/going-down-the-rabbit-hole-of-postgres-18-features"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">xata</span></span></span></a></span>​<br>
Opensource-DB, "Skip Scan on Multicolumn B-tree Indexes", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://opensource-db.com/pg18-hacktober-31-days-of-new-features-skip-scan-on-multicolumn-b-tree-indexes/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">opensource-db</span></span></span></a></span>​<br>
Neon, "PostgreSQL 18 B-tree Skip Scan for Better Queries", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://neon.com/postgresql/postgresql-18/skip-scan-btree"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span></span></span></a></span>​<br>
GenexDBS, "PostgreSQL 18 New Features", 2026.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://genexdbs.com/postgresql-18-new-features-you-should-not-miss/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">genexdbs</span></span></span></a></span>​<br>
PgEdge, "Postgres 18: Skip Scan - Breaking Free from the Left-Most Index Limitation", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.pgedge.com/blog/postgres-18-skip-scan-breaking-free-from-the-left-most-index-limitation"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgedge</span></span></span></a></span>​<br>
PostgreSQL Documentation, "Using EXPLAIN", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/current/using-explain.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​<br>
PostgreSQL Documentation, "Multicolumn Indexes", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/current/indexes-multicolumn.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​<br>
LinkedIn, "PostgreSQL 18: B-Tree Skip Scans", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.linkedin.com/posts/mikhailfishzon_postgresql-databaseperformance-dataengineering-activity-7389038151509557248-vsIy"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">linkedin</span></span></span></a></span>​<br>
Better Stack, "How to Use Skip Scans in PostgreSQL 18", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://betterstack.com/community/guides/databases/skip-scans-postgres/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">betterstack</span></span></span></a></span>​<br>
PlanetScale, "Benchmarking Postgres 17 vs 18", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://planetscale.com/blog/benchmarking-postgres-17-vs-18"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">planetscale</span></span></span></a></span>​<br>
Neon, "PostgreSQL 18 Enhanced EXPLAIN with Automatic Buffers", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://neon.com/postgresql/postgresql-18/enhanced-explain"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span></span></span></a></span>​</p></div></div></div></div></div></div><div class="flex items-center justify-between"><div class="-ml-sm gap-xs flex flex-shrink-0 items-center"><button aria-label="Share" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-share-3"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Copy" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button data-state="closed" aria-label="Rewrite" aria-expanded="false" aria-haspopup="dialog" aria-controls="radix-:r79s:" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 hover:text-foreground hover:bg-subtle"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-repeat"></use></svg></button><button type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full hover:text-foreground hover:bg-subtle px-3 relative"><span style="opacity: 1; transition: opacity 150ms 150ms;" class="text-box-trim-both"><div class="gap-x-sm flex flex-row"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute opacity-0"><defs><clipPath id="clip-path-default"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.0635 0.704214C9.13824 0.253115 8.09868 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C8.09868 14 9.13824 13.7469 10.0635 13.2958C8.19825 11.8312 7 9.55552 7 7C7 4.44448 8.19825 2.16882 10.0635 0.704214Z" fill="#D9D9D9"></path></clipPath></defs></svg><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute opacity-0"><defs><clipPath id="clip-path-small"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.57242 0.57787C7.7928 0.20734 6.92062 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12C6.92062 12 7.7928 11.7927 8.57242 11.4221C7.00228 10.1385 6 8.18628 6 6C6 3.81372 7.00228 1.86154 8.57242 0.57787Z" fill="#D9D9D9"></path></clipPath></defs></svg><div class="gap-xs relative flex shrink-0 items-center"><div class="ml-xs flex"><div style="clip-path: url(&quot;#clip-path-default&quot;);" class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="opensource-db.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=opensource-db.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div><div style="clip-path: url(&quot;#clip-path-default&quot;);" class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="neon.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=neon.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div><div class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="pgedge.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=pgedge.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="truncate font-sans text-xs font-medium text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">43</div></div></span><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></button></div><div class="gap-x-xs flex flex-shrink-0 items-center"><span><button aria-label="Research" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-cpu"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></span><span><div class="gap-xs flex items-center border-subtlest ring-subtlest divide-subtlest bg-transparent"><button aria-label="Helpful" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-thumb-up"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Not helpful" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-thumb-down"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></div></span><div><button data-state="closed" aria-label="More actions" aria-expanded="false" aria-haspopup="dialog" aria-controls="radix-:r7a1:" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 hover:text-foreground hover:bg-subtle"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-dots"></use></svg></button></div></div></div></div></div></div></div></div><div class="gap-y-lg flex flex-col first:mt-0"></div></div></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-shopping" hidden="" id="radix-:r4l:-content-shopping" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-hotels" hidden="" id="radix-:r4l:-content-hotels" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-places" hidden="" id="radix-:r4l:-content-places" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-jobs" hidden="" id="radix-:r4l:-content-jobs" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-videos" hidden="" id="radix-:r4l:-content-videos" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-images" hidden="" id="radix-:r4l:-content-images" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-sources" hidden="" id="radix-:r4l:-content-sources" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-assets" hidden="" id="radix-:r4l:-content-assets" tabindex="0" class="focus:outline-none"></div></div></div></div></div></div></div><div style="min-height: 18164.9px;"><div></div></div><div style="min-height: 15570.3px;"><div></div></div><div style="min-height: 17841.3px;"><div></div></div><div style="min-height: 14809px;"><div></div></div><div style="min-height: 15329.7px;"><div></div></div><div style="min-height: 15961.7px;"><div></div></div><div style="min-height: 15279.3px;"><div></div></div><div style="min-height: 16156px;"><div></div></div><div style="min-height: 14950.7px;"><div></div></div><div style="min-height: 14825px;"><div></div></div><div style="min-height: 13472px;"><div></div></div><div style="min-height: 15604.5px;"><div></div></div><div style="min-height: 12573.3px;"><div></div></div><div style="min-height: 13505.3px;"><div></div></div><div style="min-height: 14724.7px;"><div></div></div><div style="min-height: 12307.3px;"><div></div></div><div style="min-height: 11287px;"><div></div></div><div style="min-height: 12758.7px;"><div></div></div><div style="min-height: 12741.3px;"><div></div></div><div style="min-height: 12436px;"><div></div></div><div style="min-height: 12690px;"><div></div></div><div style="min-height: 20770.7px;"><div><div class="" style="margin-top: 0px; padding-bottom: 0px;"><div class="pt-[var(--thread-visual-spacing)] md:pt-lg pb-[var(--thread-visual-spacing)] px-[var(--thread-visual-spacing)] border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="isolate mx-auto max-w-threadContentWidth"><div class="bg-base erp-sidecar:pt-0 erp-mobile-sidecar:pt-0" style="opacity: 1; transform: none;"><div class="mx-auto max-w-threadContentWidth"><div class="max-w-threadContentWidth relative isolate z-20 mx-auto"><div class="relative z-10"><div class="group relative flex items-end gap-0.5"><div class="-inset-md pointer-events-none absolute select-none"></div><div class="relative min-w-0 flex-1 flex justify-end"><div class="flex items-center gap-2"><div class="flex shrink-0 items-center gap-1 opacity-0 transition-opacity duration-150 pointer-events-none group-hover:pointer-events-auto group-hover:opacity-100 focus-within:pointer-events-auto focus-within:opacity-100" aria-hidden="false"><button aria-label="Edit Query" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-pencil"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Copy Query" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></div><div class="group/title relative inline-flex flex-col"><div style="mask-image: linear-gradient(black 70%, transparent 97%);"><div style="transition: none; overflow: hidden; height: 144px;"><div><div class="group/query relative whitespace-pre-line !text-wrap break-words [word-break:break-word] font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex min-w-[48px] items-center justify-center bg-offset text-foreground rounded-2xl p-3 font-sans text-base font-normal select-none max-w-[600px]"><span class="select-text" style="overflow-wrap: anywhere;">исследуй вопросы ниже для Postgresql 18
```
pgvector — AI/ML векторные вложения
pgvector расширение добавляет поддержку векторных данных и операций similarity search для LLM эмбеддингов.
```</span></div></div></div></div></div><div class="top-xs relative flex -mt-2"><div class="-mt-0.5" data-testid="toggle-query-expand-button"><button type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-6 text-xs cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex hover:text-foreground hover:bg-subtle px-2 rounded-md relative"><span style="opacity: 1; transition: opacity 150ms 150ms;" class="text-box-trim-both pr-1">Show more</span><div style="opacity: 1; transition: opacity 150ms 150ms;" class="ml-1 flex items-center"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-chevron-down"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></button></div></div></div></div></div></div></div></div></div></div><div class="mx-auto max-w-threadContentWidth"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-default" id="radix-:r4l:-content-default" tabindex="0" class="focus:outline-none" style="animation-duration: 0s;"><div class="gap-y-md mt-md flex flex-col"><div dir="ltr" data-orientation="horizontal" class="grid w-full min-w-0 grid-cols-[minmax(0,1fr)]"><div style="opacity: 1;" class="col-start-1 row-start-2"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r7kr:-trigger-thread" id="radix-:r7kr:-content-thread" tabindex="0" class="focus:outline-none" style="animation-duration: 0s;"><div class="border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="gap-y-md flex flex-col"><div class="flex flex-col gap-sm"><button class="gap-x-0.5 flex items-center whitespace-nowrap text-quiet text-sm">Reviewed 20 sources<span class="duration-quick inline-block transition-transform ease-in-out text-quiet rotate-0"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-chevron-right"></use></svg></span></button></div><div class="relative font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto" id="markdown-content-24" class="gap-y-md after:clear-both after:block after:content-['']"><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Отлично! У меня есть исчерпывающая информация о pgvector. Позвольте мне создать финальный детальный отчет.</p>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0 md:text-lg [hr+&amp;]:mt-4" id="postgresql-18-pgvector---similarity-search-----aim">PostgreSQL 18 pgvector: векторные вложения, similarity search и практическая реализация для AI/ML приложений</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">pgvector в PostgreSQL 18 представляет собой <strong>открытый стандарт для хранения и поиска векторных embeddings</strong> с поддержкой нескольких алгоритмов индексирования и distance metrics. Это исследование охватывает архитектуру, оптимизацию и практическую реализацию для production AI/ML систем.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">I. Основы pgvector: архитектура и distance metrics</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. Когда и почему использовать pgvector</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Архитектура RAG (Retrieval-Augmented Generation):</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">userjot</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>Традиционный LLM: Проблема с контекстом
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ LLM имеет ограниченный context window (8K-200K tokens)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Большой документ → обрезается → потеря информации
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Результат: Неполные/неправильные ответы
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">RAG с pgvector: Решение
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ 1. Разбить документы на chunks
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ 2. Создать embeddings каждого chunk'а (OpenAI API, etc.)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ 3. Сохранить embeddings в pgvector
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ 4. При вопросе: найти релевантные chunks (similarity search)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ 5. Передать релевантные chunks в context window LLM
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Результат: Точные, основанные на факты ответы
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Пример RAG workflow:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Documentation (100 MB) → 
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    Chunks (1000) → 
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    Embeddings (1536 dims) → 
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    pgvector storage + HNSW index → 
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    Query (&lt; 10ms) → 
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    Top 5 chunks → 
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    LLM context → 
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    Answer!
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Три основных distance metrics:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">severalnines</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 1. Cosine Distance (рекомендуется OpenAI)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Измеряет угол между векторами (направление)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Значение: 0 (идентичные) → 2 (противоположные)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Использование: Semantic similarity (most common)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> documents </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> hnsw </span><span class="token token punctuation">(</span><span>embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 2. L2 Distance (Euclidean)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Прямая линия между точками в пространстве</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Значение: 0 (идентичные) → ∞ (далеко друг от друга)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Использование: Когда важна величина вектора</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> documents </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> hnsw </span><span class="token token punctuation">(</span><span>embedding vector_l2_ops</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 3. Inner Product (dot product)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Скалярное произведение векторов</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Значение: -∞ → ∞ (зависит от направления и величины)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Использование: Специализированные случаи</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> documents </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> hnsw </span><span class="token token punctuation">(</span><span>embedding vector_ip_ops</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Рекомендация:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Для LLM embeddings: Cosine (OpenAI, Hugging Face рекомендуют)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Для других: L2 (universal, "simple Euclidean")</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Inner product: редко (только если explicitly needed)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">II. Индексы pgvector: HNSW vs IVFFlat</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. HNSW Index (Hierarchical Navigable Small World)</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Архитектура:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">aws.amazon</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>HNSW Index structure:
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Multi-layer graph (like layers in navigation)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">│  ├─ Layer 0: ~N nodes, full graph
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">│  ├─ Layer 1: ~N/M nodes, sparser graph
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">│  ├─ Layer 2: ~N/M² nodes, even sparser
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">│  └─ ...up to 16 layers
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Query traversal: Start at top, navigate down
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">│  ├─ Move to closest neighbor at current layer
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">│  ├─ Drop to next layer when no improvement
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">│  └─ Found! (usually after 10-20 hops)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Property: Greedy, fast, good recall
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Visualization (simplified):
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Layer 1 (sparse):  o---o
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                   |   |
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Layer 0 (dense):   o-o-o-o-o
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Search: Start top-left, navigate to target
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Преимущества:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Query: 1.5ms (very fast)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Recall: 99%+ (excellent)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ No tuning parameters (except M, ef_construction)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Best for production!
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Недостатки:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Index build: 30-80 seconds (slower than IVFFlat)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Memory: Requires lots of maintenance_work_mem
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Space: Slightly larger than IVFFlat
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Оптимизация HNSW build:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Параметры сборки:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- m: number of connections per node (default 16)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ef_construction: size of dynamic list during build (default 64)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Для быстрой сборки с меньше памяти:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> embeddings </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> hnsw 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">(</span><span>embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WITH</span><span> </span><span class="token token punctuation">(</span><span>m</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">4</span><span class="token token punctuation">,</span><span> ef_construction</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">32</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Для максимального качества (медленнее, больше памяти):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> embeddings </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> hnsw 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">(</span><span>embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WITH</span><span> </span><span class="token token punctuation">(</span><span>m</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">32</span><span class="token token punctuation">,</span><span> ef_construction</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">256</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Рекомендуемые значения (balance):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> embeddings </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> hnsw 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">(</span><span>embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WITH</span><span> </span><span class="token token punctuation">(</span><span>m</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">16</span><span class="token token punctuation">,</span><span> ef_construction</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">64</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Параметры поиска (runtime):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> hnsw</span><span class="token token punctuation">.</span><span>ef_search </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">40</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Size of dynamic list during search</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- higher = more accurate but slower</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Default 40 is usually fine</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Увеличить параметры для лучшего recall при фильтрации:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> hnsw</span><span class="token token punctuation">.</span><span>ef_search </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Trade speed for accuracy</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Параллельная сборка (pgvector 0.6.0+, 30x faster!):</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">dev</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Key settings for parallel HNSW build:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># 1. Increase maintenance_work_mem (for graph in memory)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>SET maintenance_work_mem </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'8GB'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># 2. Increase parallel workers</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>SET max_parallel_maintenance_workers </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">7</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># 7 + 1 leader = 8 total</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># 3. Optional: increase max_parallel_workers too</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>SET max_parallel_workers </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">8</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># 4. Create index (will use parallel build!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>CREATE INDEX ON embeddings USING hnsw </span><span class="token token punctuation">(</span><span>embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Results with parallelization:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># - Before (pgvector 0.5): 81 seconds (58k rows)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># - After (pgvector 0.6): 30 seconds (58k rows) = 2.7x faster</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># - On 10M rows: 3-5 hours → 10-20 minutes = 30x faster!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">B. IVFFlat Index (Inverted File Flat)</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Архитектура:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pixion</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>IVFFlat Algorithm:
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Build phase:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">│  ├─ Run K-means on data (e.g., 100 centroids)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">│  ├─ Assign each vector to nearest centroid
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">│  └─ Store vectors in inverted lists by centroid
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Query phase:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">│  ├─ Find K nearest centroids to query (small set)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">│  ├─ Search within those inverted lists
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">│  └─ Return top matches
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Trade-off: Faster build, slightly slower query
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Visualization (simplified):
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Centroid 1: [v1, v2, v3, ...]
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Centroid 2: [v4, v5, v6, ...]
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Centroid 3: [v7, v8, v9, ...]
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Query: Find nearest to query vector Q
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Q is closest to Centroid 2 (maybe also check 1)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Search v4, v5, v6, ... (and maybe v1, v2, v3)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Return top 10
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Преимущества:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Build: 15 seconds (much faster than HNSW!)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Space: 5% of data (smaller than HNSW)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Good recall with tuning
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Tunable: lists, probes parameters
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Недостатки:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Query: 2.4ms (slower than HNSW 1.5ms)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Recall: 95-98% (lower than HNSW)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Requires tuning for good performance
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Can miss distant neighbors (greedy like HNSW)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Оптимизация IVFFlat:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+4</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Параметры сборки:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- lists: number of K-means centroids (default 100)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">--        Higher = more clusters, slower search, better recall</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">--        Rule of thumb: sqrt(n_rows)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> embeddings </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> ivfflat 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">(</span><span>embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WITH</span><span> </span><span class="token token punctuation">(</span><span>lists</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- For 1M rows: lists should be ~1000 (sqrt(1M))</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> embeddings </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> ivfflat 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">(</span><span>embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WITH</span><span> </span><span class="token token punctuation">(</span><span>lists</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">1000</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Параметры поиска (runtime):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> ivfflat</span><span class="token token punctuation">.</span><span>probes </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">;</span><span>   </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- How many lists to search</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Default 1: only search closest centroid (fast!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Increase to 2-10 for better recall, slower</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Пример: фильтрованный поиск</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> ivfflat</span><span class="token token punctuation">.</span><span>probes </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Search 10 nearest centroids</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> embeddings
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> category_id </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'AI'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> embedding </span><span class="token token operator">&lt;=&gt;</span><span> query_embedding
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- More probes needed for filtering (fewer candidates after filter)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">C. Матрица выбора индекса</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Когда использовать что:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">github</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+5</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>Scenario                    Best Index    Recall  Speed   Build Time
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">──────────────────────────────────────────────────────────────────
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">&lt; 10k vectors              No index      100%    1ms     N/A
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">10k-100k vectors           IVFFlat       98%     2ms     5s
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">100k-1M vectors            HNSW          99%     1.5ms   30s
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">1M-10M vectors (OLAP)      HNSW          99%     1.5ms   5-10min
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">10M+ vectors with filters  Hybrid        98%     2ms     10min+
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Budget constraints:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Memory limited: IVFFlat (smaller, lower mem)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Speed critical: HNSW (1.5ms is fastest)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Storage critical: IVFFlat (5-10% smaller)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Mixed: IVFFlat with high probes
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Recommendation for LLM/RAG:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Most cases: HNSW (best recall, single-digit ms)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Very large (&gt; 10M): IVFFlat with good tuning
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ With filters: Hybrid approach (see below)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Budget: IVFFlat with optimization
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">III. Production optimization: filtered queries</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. Проблема: фильтрованные запросы очень медленные</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Проблема:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">clarvo</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Наивный запрос (ОЧЕНЬ МЕДЛЕННЫЙ!):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> documents
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> category_id </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'AI'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> embedding </span><span class="token token operator">&lt;=&gt;</span><span> query_embedding
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Проблема:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 1. HNSW/IVFFlat индекс работает на embedding column</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 2. Фильтр (category_id) применяется ПОСЛЕ index scan</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 3. Результат:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//    - Index finds top 10 closest embeddings (regardless of category)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//    - Filter removes non-AI documents</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//    - Gets only 2 AI docs (from 10 closest overall)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//    - Has to retry multiple times!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 4. Time: 10+ seconds for filtered search!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Реальный пример:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Query: Find similar documents in "AI" category</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Overall top 10 closest: {AI:2, ML:3, NLP:5} </span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// After filter: Only 2 AI docs (but needed 10!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Must retry with top 100 → top 1000 → ...</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Time: 20+ seconds!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Решение 1: Partial Index (лучше всего!)</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">userjot</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Create index только для "AI" documents</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> documents </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> hnsw 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">(</span><span>embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> category_id </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'AI'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Now query is FAST:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> documents
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> category_id </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'AI'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> embedding </span><span class="token token operator">&lt;=&gt;</span><span> query_embedding
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Time: &lt; 10ms (instead of 20 seconds!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Benefits:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 1. Index only has AI documents</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 2. No filter needed, all results relevant</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 3. Tiny index (1% of original)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 4. Very fast search (10ms)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Repeat for each common category:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> documents </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> hnsw 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">(</span><span>embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> category_id </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'ML'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> documents </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> hnsw 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">(</span><span>embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> category_id </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'NLP'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Решение 2: Partitioning (для большого количества категорий)</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">clarvo</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Partition by category_id</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> documents </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id BIGSERIAL</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    embedding vector</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">1536</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    category_id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    content </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PARTITION</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> LIST</span><span class="token token punctuation">(</span><span>category_id</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> documents_ai </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PARTITION</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">OF</span><span> documents </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FOR</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VALUES</span><span> </span><span class="token token operator">IN</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'AI'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> documents_ml </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PARTITION</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">OF</span><span> documents </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FOR</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VALUES</span><span> </span><span class="token token operator">IN</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'ML'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> documents_nlp </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PARTITION</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">OF</span><span> documents </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FOR</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VALUES</span><span> </span><span class="token token operator">IN</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'NLP'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Create separate indexes on each partition:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> documents_ai </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> hnsw </span><span class="token token punctuation">(</span><span>embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> documents_ml </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> hnsw </span><span class="token token punctuation">(</span><span>embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> documents_nlp </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> hnsw </span><span class="token token punctuation">(</span><span>embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Query (partition elimination happens automatically):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> documents
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> category_id </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'AI'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> embedding </span><span class="token token operator">&lt;=&gt;</span><span> query_embedding
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Only scans documents_ai partition!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Time: &lt; 10ms</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Решение 3: Tuning ef_search (компромисс)</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">userjot</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Если нельзя использовать partial index/partitioning:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> hnsw</span><span class="token token punctuation">.</span><span>ef_search </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">200</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Search wider (was 40)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> documents
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> category_id </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'AI'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> embedding </span><span class="token token operator">&lt;=&gt;</span><span> query_embedding
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Time: 100ms (slower but acceptable)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Find more candidates before filtering = more AI docs</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Trade-off:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Higher ef_search = wider search = more memory</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// But still slower than partial index/partitioning</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Use only if other approaches not possible</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">IV. Практическая реализация RAG с pgvector</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. End-to-end RAG setup</h2>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">python</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Python example: Complete RAG with pgvector</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> os
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> langchain</span><span class="token token punctuation">.</span><span>document_loaders </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> PyPDFLoader
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> langchain</span><span class="token token punctuation">.</span><span>text_splitter </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> RecursiveCharacterTextSplitter
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> langchain</span><span class="token token punctuation">.</span><span>embeddings</span><span class="token token punctuation">.</span><span>openai </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> OpenAIEmbeddings
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> langchain</span><span class="token token punctuation">.</span><span>vectorstores</span><span class="token token punctuation">.</span><span>pgvector </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> PGVector
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> langchain</span><span class="token token punctuation">.</span><span>chat_models </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> ChatOpenAI
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> langchain</span><span class="token token punctuation">.</span><span>prompts </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> ChatPromptTemplate
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">from</span><span> langchain</span><span class="token token punctuation">.</span><span>schema</span><span class="token token punctuation">.</span><span>runnable </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">import</span><span> RunnablePassthrough
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># ШАГ 1: Load documents</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>loader </span><span class="token token operator">=</span><span> PyPDFLoader</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"documentation.pdf"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>documents </span><span class="token token operator">=</span><span> loader</span><span class="token token punctuation">.</span><span>load</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># ШАГ 2: Split into chunks</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>text_splitter </span><span class="token token operator">=</span><span> RecursiveCharacterTextSplitter</span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    chunk_size</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">1000</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    chunk_overlap</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">200</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>chunks </span><span class="token token operator">=</span><span> text_splitter</span><span class="token token punctuation">.</span><span>split_documents</span><span class="token token punctuation">(</span><span>documents</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># ШАГ 3: Create embeddings and store in pgvector</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>CONNECTION_STRING </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"postgresql://user:pass@localhost:5432/mydb"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>embeddings </span><span class="token token operator">=</span><span> OpenAIEmbeddings</span><span class="token token punctuation">(</span><span>model</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">"text-embedding-3-small"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Store in pgvector (creates table + HNSW index)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>vector_store </span><span class="token token operator">=</span><span> PGVector</span><span class="token token punctuation">.</span><span>from_documents</span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    chunks</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    embeddings</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    connection_string</span><span class="token token operator">=</span><span>CONNECTION_STRING</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    collection_name</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">"documentation"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    pre_delete_collection</span><span class="token token operator">=</span><span class="token token boolean">False</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># ШАГ 4: Create RAG chain</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>retriever </span><span class="token token operator">=</span><span> vector_store</span><span class="token token punctuation">.</span><span>as_retriever</span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    search_type</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">"similarity"</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    search_kwargs</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span class="token token" style="color: rgb(181, 189, 104);">"k"</span><span class="token token punctuation">:</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span class="token token punctuation">}</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Return top 5 chunks</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># ШАГ 5: Create LLM chain</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>llm </span><span class="token token operator">=</span><span> ChatOpenAI</span><span class="token token punctuation">(</span><span>model</span><span class="token token operator">=</span><span class="token token" style="color: rgb(181, 189, 104);">"gpt-4"</span><span class="token token punctuation">,</span><span> temperature</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>prompt </span><span class="token token operator">=</span><span> ChatPromptTemplate</span><span class="token token punctuation">.</span><span>from_template</span><span class="token token punctuation">(</span><span class="token token triple-quoted-string" style="color: rgb(181, 189, 104);">"""
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(181, 189, 104); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;" class="token token triple-quoted-string">Use the following context to answer the question.
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(181, 189, 104); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;" class="token token triple-quoted-string">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(181, 189, 104); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;" class="token token triple-quoted-string">Context: {context}
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(181, 189, 104); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;" class="token token triple-quoted-string">Question: {question}
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(181, 189, 104); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;" class="token token triple-quoted-string">Answer:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token triple-quoted-string" style="color: rgb(181, 189, 104);">"""</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>chain </span><span class="token token operator">=</span><span> </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">{</span><span class="token token" style="color: rgb(181, 189, 104);">"context"</span><span class="token token punctuation">:</span><span> retriever</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">"question"</span><span class="token token punctuation">:</span><span> RunnablePassthrough</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">}</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token operator">|</span><span> prompt
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token operator">|</span><span> llm
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># ШАГ 6: Query</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>answer </span><span class="token token operator">=</span><span> chain</span><span class="token token punctuation">.</span><span>invoke</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">"How does pgvector work?"</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">print</span><span class="token token punctuation">(</span><span>answer</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">B. SQL setup для production</h2>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- PostgreSQL setup for production RAG</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 1. Install pgvector</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> EXTENSION pgvector</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 2. Create documents table</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> documents </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id BIGSERIAL </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PRIMARY</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">KEY</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    collection_id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    document_name </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    chunk_id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    content </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    embedding vector</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">1536</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    created_at </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TIMESTAMP</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DEFAULT</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">NOW</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    metadata JSONB </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DEFAULT</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'{}'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 3. Create optimized HNSW index</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> documents </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> hnsw 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">(</span><span>embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WITH</span><span> </span><span class="token token punctuation">(</span><span>m</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">16</span><span class="token token punctuation">,</span><span> ef_construction</span><span class="token token operator">=</span><span class="token token" style="color: rgb(222, 147, 95);">64</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 4. Optional: Create metadata index for filtering</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> documents</span><span class="token token punctuation">(</span><span>collection_id</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 5. Insert documents with embeddings (from Python)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- (LangChain/Python code does this)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 6. Query (similarity search)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    document_name</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    content</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    embedding </span><span class="token token operator">&lt;=&gt;</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'[embedding vector here]'</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> distance
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> documents
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> collection_id </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'documentation'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> distance
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 7. Monitor performance</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">EXPLAIN</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ANALYZE</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> documents
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> collection_id </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'documentation'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> embedding </span><span class="token token operator">&lt;=&gt;</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'[...]'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Should show: "Index Scan using documents_embedding_idx"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">V. Production concerns и troubleshooting</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. Когда pgvector может быть медленным</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Реальные проблемы (из production):</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">instaclustr</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>Scenario 1: Filtering kills performance
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Query with where clause: 10+ seconds
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Cause: Filter applied after index scan
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Solution: Partial index or partitioning (see Section III.A)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Impact: Critical for production!
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Scenario 2: Index build takes too long
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ 10M embeddings, HNSW build: 3 hours
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Cause: Not enough maintenance_work_mem or single-threaded
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Solution: Increase mem + use parallel workers (30x faster!)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Impact: Can't rebuild index during maintenance window
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Scenario 3: Recall drops with IVFFlat
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ IVFFlat with default tuning: only 90% recall
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Cause: lists parameter too small or probes=1
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Solution: Increase lists (sqrt(n_rows)), probes (10-20)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Impact: Missing relevant results!
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Scenario 4: Memory explosion during build
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Trying to build HNSW on 100M vectors
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Error: OOM after 10M vectors
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Cause: maintenance_work_mem insufficient
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Solution: Build on read replica, then promote
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Impact: Cannot build index on production directly
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">B. Monitoring и benchmarking</h2>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Monitor index size and memory</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    schemaname</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    tablename</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    indexname</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    pg_size_pretty</span><span class="token token punctuation">(</span><span>pg_relation_size</span><span class="token token punctuation">(</span><span>indexrelid</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> index_size
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_stat_user_indexes
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> tablename </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'documents'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Benchmark query performance</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">EXPLAIN</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ANALYZE</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> documents
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> embedding </span><span class="token token operator">&lt;=&gt;</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'[...]'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Test recall (compare exact vs approximate)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BEGIN</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LOCAL</span><span> enable_indexscan </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">off</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">count</span><span class="token token punctuation">(</span><span class="token token operator">*</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> documents
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> embedding </span><span class="token token operator">&lt;=&gt;</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'[...]'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Compare with index enabled results</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">COMMIT</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Monitor build progress</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> current_query</span><span class="token token punctuation">,</span><span> query_start</span><span class="token token punctuation">,</span><span> state
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_stat_activity
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> query </span><span class="token token operator">LIKE</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'CREATE INDEX%'</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Выводы:</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">pgvector в PostgreSQL 18 представляет собой <strong>production-ready инструмент для AI/ML приложений</strong>:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">dzone</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+4</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ключевые компоненты:</strong></p>
<ol class="marker:text-quiet list-decimal">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>HNSW index</strong>: Лучший выбор для большинства (1.5ms queries, 99% recall)<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">aws.amazon</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Distance metrics</strong>: Cosine рекомендуется для LLM embeddings<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">severalnines</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Filtered queries</strong>: Требуют partial indexes или partitioning для production speed<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">clarvo</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Parallel build</strong>: pgvector 0.6+ с 30x ускорением для больших наборов<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Hybrid approach</strong>: FTS + vector search для best recall<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">tigerdata</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
</li>
</ol>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Production performance:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Exact search: 1ms (no index needed)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">HNSW indexed: 1.5ms (99% recall, recommended)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">IVFFlat indexed: 2.4ms (98% recall, smaller index)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Filtered queries: 10ms-20s (depends on optimization!)</p>
</li>
</ul>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Источники:</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Severalnines, "Vector Similarity Search with pgvector", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://severalnines.com/blog/vector-similarity-search-with-postgresqls-pgvector-a-deep-dive/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">severalnines</span></span></span></a></span>​<br>
AWS, "Optimize Generative AI with pgvector Indexing", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://aws.amazon.com/blogs/database/optimize-generative-ai-applications-with-pgvector-indexing-a-deep-dive-into-ivfflat-and-hnsw-techniques/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">aws.amazon</span></span></span></a></span>​<br>
Neon, "pgvector: 30x Faster Index Build", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://neon.com/blog/pgvector-30x-faster-index-build-for-your-vector-embeddings"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span></span></span></a></span>​<br>
UserJot, "Deep Dive into Vector Similarity Search", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://userjot.com/blog/pgvector-deep-dive"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">userjot</span></span></span></a></span>​<br>
Apache Cloudberry, "Use pgvector for Vector Similarity Search", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://cloudberry.apache.org/docs/advanced-analytics/pgvector-search/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">cloudberry.apache</span></span></span></a></span>​<br>
DZone, "Use pgvector with PostgreSQL to Improve LLM Accuracy", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://dzone.com/articles/use-pgvector-with-postgresql-to-improve-llm-accura"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">dzone</span></span></span></a></span>​<br>
DataCamp, "pgvector Tutorial", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.datacamp.com/tutorial/pgvector-tutorial"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">datacamp</span></span></span></a></span>​<br>
Pixion, "Choosing Your Index with pgvector", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://pixion.co/blog/choosing-your-index-with-pg-vector-flat-vs-hnsw-vs-ivfflat"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pixion</span></span></span></a></span>​<br>
Instaclustr, "Vector Search Benchmarking", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.instaclustr.com/blog/vector-search-benchmarking-setting-up-embeddings-insertion-and-retrieval-with-postgresql/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">instaclustr</span></span></span></a></span>​<br>
Neon, "Optimizing Vector Search Performance with pgvector", 2023.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://neon.com/blog/optimizing-vector-search-performance-with-pgvector"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span></span></span></a></span>​<br>
GitHub, "pgvector: Open-source Vector Search for Postgres", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://github.com/pgvector/pgvector"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">github</span></span></span></a></span>​<br>
Dev.to, "pgvector: 30x Faster Index Build", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://dev.to/neon-postgres/pgvector-30x-faster-index-build-for-your-vector-embeddings-46da"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">dev</span></span></span></a></span>​<br>
Microsoft, "How to Optimize Performance with pgvector", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://learn.microsoft.com/en-us/azure/cosmos-db/postgresql/howto-optimize-performance-pgvector"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">learn.microsoft</span></span></span></a></span>​<br>
CodeSignal, "Tuning and Running Queries with Approximate Indexes", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://codesignal.com/learn/courses/indexing-optimization-and-scaling-pgvector/lessons/tuning-and-running-queries-with-approximate-indexes-in-pgvector"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">codesignal</span></span></span></a></span>​<br>
TigerData, "PostgreSQL as a Vector Database: pgvector Tutorial", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.tigerdata.com/learn/postgresql-as-a-vector-database-a-pgvector-tutorial"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">tigerdata</span></span></span></a></span>​<br>
Neon, "The pgvector extension", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://neon.com/docs/extensions/pgvector"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span></span></span></a></span>​<br>
Clarvo, "Optimizing Filtered Vector Queries", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.clarvo.ai/blog/optimizing-filtered-vector-queries-from-tens-of-seconds-to-single-digit-milliseconds-in-postgresql"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">clarvo</span></span></span></a></span>​<br>
Alex Jacobs, "The Case Against pgvector", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://alex-jacobs.com/posts/the-case-against-pgvector/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">alex-jacobs</span></span></span></a></span>​<br>
Supabase, "pgvector: Embeddings and Vector Similarity", 2026.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://supabase.com/docs/guides/database/extensions/pgvector"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">supabase</span></span></span></a></span>​<br>
Tessell, "PostgreSQL as Vector Database with pgvector", 2023.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.tessell.com/blogs/postgresql-as-vector-database-create-llm-apps-with-pgvector"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">tessell</span></span></span></a></span>​</p></div></div></div></div></div></div><div class="flex items-center justify-between"><div class="-ml-sm gap-xs flex flex-shrink-0 items-center"><button aria-label="Share" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-share-3"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Copy" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button data-state="closed" aria-label="Rewrite" aria-expanded="false" aria-haspopup="dialog" aria-controls="radix-:r7qh:" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 hover:text-foreground hover:bg-subtle"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-repeat"></use></svg></button><button type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full hover:text-foreground hover:bg-subtle px-3 relative"><span style="opacity: 1; transition: opacity 150ms 150ms;" class="text-box-trim-both"><div class="gap-x-sm flex flex-row"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute opacity-0"><defs><clipPath id="clip-path-default"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.0635 0.704214C9.13824 0.253115 8.09868 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C8.09868 14 9.13824 13.7469 10.0635 13.2958C8.19825 11.8312 7 9.55552 7 7C7 4.44448 8.19825 2.16882 10.0635 0.704214Z" fill="#D9D9D9"></path></clipPath></defs></svg><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute opacity-0"><defs><clipPath id="clip-path-small"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.57242 0.57787C7.7928 0.20734 6.92062 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12C6.92062 12 7.7928 11.7927 8.57242 11.4221C7.00228 10.1385 6 8.18628 6 6C6 3.81372 7.00228 1.86154 8.57242 0.57787Z" fill="#D9D9D9"></path></clipPath></defs></svg><div class="gap-xs relative flex shrink-0 items-center"><div class="ml-xs flex"><div style="clip-path: url(&quot;#clip-path-default&quot;);" class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="userjot.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=userjot.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div><div style="clip-path: url(&quot;#clip-path-default&quot;);" class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="dzone.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=dzone.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div><div class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="datacamp.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=datacamp.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="truncate font-sans text-xs font-medium text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">20</div></div></span><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></button></div><div class="gap-x-xs flex flex-shrink-0 items-center"><span><button aria-label="Research" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-cpu"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></span><span><div class="gap-xs flex items-center border-subtlest ring-subtlest divide-subtlest bg-transparent"><button aria-label="Helpful" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-thumb-up"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Not helpful" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-thumb-down"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></div></span><div><button data-state="closed" aria-label="More actions" aria-expanded="false" aria-haspopup="dialog" aria-controls="radix-:r7qu:" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 hover:text-foreground hover:bg-subtle"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-dots"></use></svg></button></div></div></div></div></div></div></div></div><div class="gap-y-lg flex flex-col first:mt-0"></div></div></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-shopping" hidden="" id="radix-:r4l:-content-shopping" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-hotels" hidden="" id="radix-:r4l:-content-hotels" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-places" hidden="" id="radix-:r4l:-content-places" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-jobs" hidden="" id="radix-:r4l:-content-jobs" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-videos" hidden="" id="radix-:r4l:-content-videos" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-images" hidden="" id="radix-:r4l:-content-images" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-sources" hidden="" id="radix-:r4l:-content-sources" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-assets" hidden="" id="radix-:r4l:-content-assets" tabindex="0" class="focus:outline-none"></div></div></div></div></div></div></div><div><div><div class="" style="margin-top: 0px; padding-bottom: 0px;"><div class="pt-[var(--thread-visual-spacing)] md:pt-lg pb-[var(--thread-visual-spacing)] px-[var(--thread-visual-spacing)] border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="isolate mx-auto max-w-threadContentWidth"><div style="opacity: 1; transform: none;" class="bg-base erp-sidecar:pt-0 erp-mobile-sidecar:pt-0"><div class="mx-auto max-w-threadContentWidth"><div class="max-w-threadContentWidth relative isolate z-20 mx-auto"><div class="relative z-10"><div class="group relative flex items-end gap-0.5"><div class="-inset-md pointer-events-none absolute select-none"></div><div class="relative min-w-0 flex-1 flex justify-end"><div class="flex items-center gap-2"><div class="flex shrink-0 items-center gap-1 opacity-0 transition-opacity duration-150 pointer-events-none group-hover:pointer-events-auto group-hover:opacity-100 focus-within:pointer-events-auto focus-within:opacity-100" aria-hidden="false"><button aria-label="Edit Query" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-pencil"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Copy Query" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></div><div class="group/title relative inline-flex flex-col"><div style="mask-image: linear-gradient(black 70%, transparent 97%);"><div style="transition: height 200ms cubic-bezier(0.16, 1, 0.3, 1); overflow: hidden; height: 144px;"><div><div class="group/query relative whitespace-pre-line !text-wrap break-words [word-break:break-word] font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex min-w-[48px] items-center justify-center bg-offset text-foreground rounded-2xl p-3 font-sans text-base font-normal select-none max-w-[600px]"><span class="select-text" style="overflow-wrap: anywhere;">исследуй вопросы ниже для Postgresql 18
```
Настройка Autovacuum для специальных рабочих нагрузок
PostgreSQL 18 добавляет insert-specific пороги для более точной конфигурации vacuum для append-only таблиц.
```</span></div></div></div></div></div><div class="top-xs relative flex -mt-2"><div class="-mt-0.5" data-testid="toggle-query-expand-button"><button type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-6 text-xs cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex hover:text-foreground hover:bg-subtle px-2 rounded-md relative"><span style="opacity: 1; transition: opacity 150ms 150ms;" class="text-box-trim-both pr-1">Show more</span><div style="opacity: 1; transition: opacity 150ms 150ms;" class="ml-1 flex items-center"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-chevron-down"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></button></div></div></div></div></div></div></div></div></div></div><div class="mx-auto max-w-threadContentWidth"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-default" id="radix-:r4l:-content-default" tabindex="0" class="focus:outline-none" style=""><div class="gap-y-md mt-md flex flex-col"><div dir="ltr" data-orientation="horizontal" class="grid w-full min-w-0 grid-cols-[minmax(0,1fr)]"><div style="opacity: 1;" class="col-start-1 row-start-2"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r68e:-trigger-thread" id="radix-:r68e:-content-thread" tabindex="0" class="focus:outline-none" style=""><div class="border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="gap-y-md flex flex-col"><div class="flex flex-col gap-sm"><button class="gap-x-0.5 flex items-center whitespace-nowrap text-quiet text-sm">Reviewed 20 sources<span class="duration-quick inline-block transition-transform ease-in-out text-quiet rotate-0"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-chevron-right"></use></svg></span></button></div><div class="relative font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto" id="markdown-content-25" class="gap-y-md after:clear-both after:block after:content-['']"><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Отлично! У меня есть комплексная информация о настройке Autovacuum в PostgreSQL 18. Позвольте мне создать финальный детальный отчет.</p>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0 md:text-lg [hr+&amp;]:mt-4" id="postgresql-18--autovacuum-----insert-specific">PostgreSQL 18 Настройка Autovacuum для специальных рабочих нагрузок: insert-specific пороги и оптимизация для всех типов таблиц</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Autovacuum в PostgreSQL 18 претерпел <strong>значительные улучшения с введением insert-specific порогов, максимальных порогов и расширенной аналитики</strong>, позволяя точно конфигурировать maintenance для различных типов рабочих нагрузок. Это исследование охватывает архитектуру, оптимизацию и практическую реализацию для production систем.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">I. Революционные улучшения autovacuum в PostgreSQL 18</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. Три новых параметра для точной конфигурации</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Параметр 1: autovacuum_vacuum_insert_threshold (PG13+, рекомендуемое в PG18)</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">cybertec-postgresql</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- НОВОЕ: Разные пороги для INSERT-only таблиц!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Проблема без этого параметра (до PG13):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Insert-only таблицы не вакуумировались (нет мёртвых кортежей)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Результаты:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//   1. Visibility map не обновлялась (index-only scans медленнели)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//   2. Hint bits не устанавливались</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//   3. Transaction ID не замораживались (XID wraparound risk!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Решение (PG13+):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> SYSTEM </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> autovacuum_vacuum_insert_threshold </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1000</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Vacuum triggered when 1000 tuples INSERTED (even if no deletes!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Formula:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- VACUUM triggered when:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- n_tup_ins &gt; autovacuum_vacuum_insert_threshold + </span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//              autovacuum_vacuum_insert_scale_factor * reltuples</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Пример:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 100k table with insert_threshold=1000, insert_scale_factor=0.2</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Trigger when inserts &gt; 1000 + (0.2 * 100k) = 21,000</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Практическое применение (append-only таблица):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> time_series </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_insert_threshold </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10000</span><span class="token token punctuation">,</span><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 10k inserts trigger</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_insert_scale_factor </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.1</span><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- + 10% of table size</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Параметр 2: autovacuum_vacuum_max_threshold (NEW в PG18!)</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">guepard</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- НОВОЕ в PG18: Maximum cap на мёртвые кортежи!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Проблема без максимума:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Очень большая таблица (100GB) может накопить МИЛЛИАРДЫ мёртвых кортежей</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Vacuum threshold = threshold + (scale_factor * table_size)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Example: 1000 + (0.2 * 100GB) = 1000 + 20M = 20 миллионов мёртвых кортежей!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Vacuum ждёт 20 миллионов мёртвых кортежей → выполняется ДОЛГО!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Решение (PG18):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> SYSTEM </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> autovacuum_vacuum_max_threshold </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">100000000</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 100M max</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Vacuum triggered at MINIMUM of:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//   1. threshold + scale_factor * size</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//   2. autovacuum_vacuum_max_threshold (the cap!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Пример:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Large table (1TB):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//   Normal threshold: 1000 + (0.2 * 1T) = 1000 + 200M = 200M</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//   With max_threshold=100M: min(200M, 100M) = 100M</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//   Result: Vacuum runs at 100M dead tuples (vs waiting for 200M)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Практическое применение:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> large_events_log </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_max_threshold </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">50000000</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Cap at 50M dead tuples</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Ensures vacuum runs more frequently on huge tables</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Параметр 3: Tracking autovacuum efficiency (NEW в PG18)</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- НОВОЕ в PG18: Detailed autovacuum timing!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- New columns in pg_stat_all_tables:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    schemaname</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    relname</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    vacuum_count</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_count</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    total_vacuum_time</span><span class="token token punctuation">,</span><span>           </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ← NEW in PG18!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    total_autovacuum_time</span><span class="token token punctuation">,</span><span>       </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ← NEW in PG18!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    analyze_count</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autoanalyze_count</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    total_analyze_time</span><span class="token token punctuation">,</span><span>          </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ← NEW in PG18!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    total_autoanalyze_time       </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ← NEW in PG18!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_stat_user_tables
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> total_autovacuum_time </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DESC</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Результат показывает:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// How much TIME autovacuum spends on each table</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Calculate average: total_autovacuum_time / autovacuum_count</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Пример:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Table: events_log</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// autovacuum_count = 250 (per day)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// total_autovacuum_time = 12000000 ms = 12000 seconds = 3+ hours/day!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// avg_time_per_run = 12000 / 250 = 48ms per run</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// → Run 250× per day, 48ms each = 3 hours overhead!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// → Solution: Reduce frequency OR increase speed</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">II. Архитектура autovacuum: триггер условия для разных рабочих нагрузок</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. Точные формулы для автоматического запуска</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Для таблиц с UPDATE/DELETE (стандартные):</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">learn.microsoft</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+4</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- VACUUM triggers when:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- n_dead_tuples &gt; autovacuum_vacuum_threshold + </span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//                  autovacuum_vacuum_scale_factor * live_tuples</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ANALYZE triggers when:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- (n_inserted + n_updated + n_deleted) &gt; autovacuum_analyze_threshold +</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//                                         autovacuum_analyze_scale_factor * live_tuples</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Defaults:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SHOW</span><span> autovacuum_vacuum_threshold</span><span class="token token punctuation">;</span><span>          </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 50</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SHOW</span><span> autovacuum_vacuum_scale_factor</span><span class="token token punctuation">;</span><span>       </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 0.2 (20%)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SHOW</span><span> autovacuum_analyze_threshold</span><span class="token token punctuation">;</span><span>         </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 50</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SHOW</span><span> autovacuum_analyze_scale_factor</span><span class="token token punctuation">;</span><span>      </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 0.1 (10%)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Пример таблица с 100,000 строк:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- VACUUM trigger: 50 + (0.2 * 100,000) = 20,050 мёртвых кортежей</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ANALYZE trigger: 50 + (0.1 * 100,000) = 10,050 изменений</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Для таблиц с INSERTS (append-only, новое в PG13):</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">crunchydata</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- INSERT-only VACUUM triggers when:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- n_inserted &gt; autovacuum_vacuum_insert_threshold +</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//              autovacuum_vacuum_insert_scale_factor * live_tuples</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Defaults:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SHOW</span><span> autovacuum_vacuum_insert_threshold</span><span class="token token punctuation">;</span><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 1000</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SHOW</span><span> autovacuum_vacuum_insert_scale_factor</span><span class="token token punctuation">;</span><span> </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 0.2 (20%)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Пример: Таблица с 1M строк (insert-only):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- VACUUM trigger: 1000 + (0.2 * 1,000,000) = 201,000 новых строк</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Применение к append-only таблице (time-series):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> metrics </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_insert_threshold </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">100000</span><span class="token token punctuation">,</span><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- более агрессивно</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_insert_scale_factor </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.05</span><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 5% вместо 20%</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Результат: Vacuum runs more frequently on insert-only tables</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">B. Матрица параметров для разных типов таблиц</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Рекомендации по типам таблиц:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">cybrosys</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>Type of Table               Use Case                     Recommended Settings
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">──────────────────────────────────────────────────────────────────────
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Insert-only                Time-series, logs, events    Low insert_threshold, aggressive frequency
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                                                        vacuum_insert_threshold = 10000
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                                                        vacuum_insert_scale_factor = 0.05
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">High-update                Cache, session data          Aggressive vacuum
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                                                        vacuum_scale_factor = 0.01
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                                                        vacuum_cost_limit = 2000
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Small tables (&lt; 1GB)       Metadata, config             High thresholds (reduce overhead)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                                                        vacuum_threshold = 1000
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                                                        vacuum_scale_factor = 0.5
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Large tables (&gt; 100GB)     Big analytics, archived      Max threshold cap
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                                                        vacuum_max_threshold = 50M
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Mixed workload             Production tables            Balanced (default + tuning)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                                                        vacuum_scale_factor = 0.1
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">                                                        insert_scale_factor = 0.1
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">III. Практические рецепты для специальных рабочих нагрузок</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. Рецепт 1: Append-only таблица (Time-series)</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Проблема:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgres</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Time-series таблица: вставляет только, никогда не обновляется</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> time_series </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">timestamp</span><span> TIMESTAMPTZ</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">value</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FLOAT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    tags JSONB
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Proблема с defaults:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// autovacuum_vacuum_insert_threshold = 1000 (default)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Таблица вставляет 1M rows/hour = 1M/1000 = 1000 triggers/hour!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// autovacuum постоянно запускается (overhead!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Решение:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> time_series </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Set high insert threshold (avoid frequent runs)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_insert_threshold </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1000000</span><span class="token token punctuation">,</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 1M inserts</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_insert_scale_factor </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.05</span><span class="token token punctuation">,</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 5% of size</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Optimize vacuum speed</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_cost_delay </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">,</span><span>              </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- No throttling</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_cost_limit </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">3000</span><span class="token token punctuation">,</span><span>           </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Higher limit</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Freeze min age (freeze more aggressively)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_freeze_min_age </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10000000</span><span>           </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Lower = freeze sooner</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Expected result:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Before: autovacuum every 1 minute (1000 inserts)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// After: autovacuum every 100 minutes (1M inserts)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Overhead: 99% reduction!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">B. Рецепт 2: High-churn таблица (Updates/Deletes)</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Проблема:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">news.ycombinator</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Таблица с быстрым обновлением (cache table)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> cache_table </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">value</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updated_at </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TIMESTAMP</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Нагрузка: 10k updates/sec = 36M updates/hour</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Проблема с defaults:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// VACUUM trigger: 50 + (0.2 * n_rows) = большой лаг перед vacuum</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Таблица быстро bloats (мёртвые кортежи накапливаются)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Решение:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> cache_table </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Aggressive vacuum on updates/deletes</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_threshold </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span class="token token punctuation">,</span><span>             </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Lower base</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_scale_factor </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.01</span><span class="token token punctuation">,</span><span>         </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 1% (vs 20%)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Max threshold to prevent excessive dead tuples</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_max_threshold </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10000000</span><span class="token token punctuation">,</span><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 10M cap</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Maximize vacuum speed</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_cost_delay </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">,</span><span>              </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- No throttling</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_cost_limit </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">5000</span><span class="token token punctuation">,</span><span>           </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Aggressive</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Analyze more frequently</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_analyze_scale_factor </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.005</span><span>        </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 0.5% (vs 10%)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Expected result:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Before: Bloat accumulates, vacuum every 1 hour</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// After: Vacuum every 5-10 minutes, no significant bloat</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Trade-off: More CPU/I/O for vacuum, but better query performance</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">C. Рецепт 3: Large таблица (Careful не перегрузить систему)</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Проблема:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">guepard</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Таблица 1TB с 10B rows</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> large_table </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BIGINT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">data</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Проблема:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// VACUUM threshold = 50 + (0.2 * 10B) = 2B мёртвых кортежей!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Waiting for 2B dead tuples = таблица очень bloated</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// When VACUUM finally runs, takes hours!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Решение:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> large_table </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Use max_threshold to cap dead tuples</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_max_threshold </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">100000000</span><span class="token token punctuation">,</span><span>   </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 100M cap (vs 2B!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Moderate aggressiveness (don't overwhelm system)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_cost_delay </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">,</span><span>              </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Small delay</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_vacuum_cost_limit </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">500</span><span class="token token punctuation">,</span><span>            </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Moderate</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- More frequent ANALYZE (stats important on large table)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_analyze_scale_factor </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.01</span><span>         </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 1%</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Expected result:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Vacuum triggered at: min(2B, 100M) = 100M dead tuples</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Vacuum runs frequently, but not too aggressively</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// System not overwhelmed, but bloat controlled</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">IV. Мониторинг и диагностика autovacuum</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. Найти проблемные таблицы</h2>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Какие таблицы vacuum'ятся слишком часто?</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    schemaname</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    relname</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    n_live_tup</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    n_dead_tup</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(197, 200, 198);">ROUND</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">100.0</span><span> </span><span class="token token operator">*</span><span> n_dead_tup </span><span class="token token operator">/</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">NULLIF</span><span class="token token punctuation">(</span><span>n_live_tup </span><span class="token token operator">+</span><span> n_dead_tup</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> dead_pct</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    autovacuum_count</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    EXTRACT</span><span class="token token punctuation">(</span><span>EPOCH </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(197, 200, 198);">now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">-</span><span> last_autovacuum</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">/</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">3600</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> hours_since_vacuum</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(197, 200, 198);">ROUND</span><span class="token token punctuation">(</span><span>total_autovacuum_time::</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">numeric</span><span> </span><span class="token token operator">/</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">NULLIF</span><span class="token token punctuation">(</span><span>autovacuum_count</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">2</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> avg_vacuum_ms
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_stat_user_tables
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> autovacuum_count </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> autovacuum_count </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DESC</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Результат интерпретация:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// High autovacuum_count: Table is high-churn, might need threshold adjustment</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// High avg_vacuum_ms: Vacuum is slow, might be I/O bound or large table</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// High dead_pct: Table is bloated, increase aggressiveness of vacuum</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">B. Проверить autovacuum log</h2>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Включить detailed autovacuum logging</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> SYSTEM </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> log_autovacuum_min_duration </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Log ALL autovacuum</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> pg_reload_conf</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Check logs:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- tail -f /var/log/postgresql/postgresql.log | grep autovacuum</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Sample output:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// LOG: automatic vacuum of table "mydb.public.orders" completed</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// INFO: vacuumed "orders": index scans: 2</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//   pages: 0 removed, 500 remain, 0 skipped due to pins, 0 skipped frozen</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//   tuples: 1000000 removed, 5000000 remain, 0 are dead but not yet removable</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//   visible map: 0 pages skipped due to all visible</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//   avg read rate: 123.4 MB/s, avg write rate: 45.6 MB/s</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">//   system usage: CPU 1.23s/0.45u sec elapsed 2.34 sec</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">C. Check autovacuum delays</h2>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Monitor if autovacuum is being blocked by long transactions</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    pid</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    usename</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    state</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    EXTRACT</span><span class="token token punctuation">(</span><span>EPOCH </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(197, 200, 198);">now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">-</span><span> query_start</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> query_runtime_sec</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">    query
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_stat_activity
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> state </span><span class="token token operator">!=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'idle'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token operator">AND</span><span> query_start </span><span class="token token operator">&lt;</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">-</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">interval</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'5 minutes'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> query_start</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- If long-running transactions found: they block autovacuum!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Autovacuum waits for these to finish</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Solution: Kill them or commit/rollback</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> pg_terminate_backend</span><span class="token token punctuation">(</span><span>pid</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> usename </span><span class="token token operator">NOT</span><span> </span><span class="token token operator">IN</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'postgres'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">V. PostgreSQL 18 vs ранние версии: эволюция</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Матрица изменений:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">cybertec-postgresql</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>Feature                     PG 12   PG 13   PG 17   PG 18
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">────────────────────────────────────────────────────────
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Insert-only VACUUM          ❌      ✅      ✅      ✅
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">insert_threshold            ❌      ✅      ✅      ✅
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">insert_scale_factor         ❌      ✅      ✅      ✅
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">vacuum_max_threshold        ❌      ❌      ❌      ✅ NEW!
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Timing metrics              ❌      ❌      ❌      ✅ NEW!
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Parallel vacuum             ❌      ❌      ✅      ✅
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Key improvements over time:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">PG 12 → PG 13:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Insert-only tables now vacuum (major improvement!)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ New parameters for fine-tuning
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Impact: Time-series workloads no longer ignored
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">PG 13 → PG 17:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Parallel VACUUM
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Better performance on large tables
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Impact: Large tables vacuum faster
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">PG 17 → PG 18:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Maximum threshold cap (huge for large tables!)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Detailed timing metrics
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Impact: Better observability and control
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Выводы:</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Autovacuum в PostgreSQL 18 представляет собой <strong>sophisticated system для maintenance автоматизации</strong>:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">cybrosys</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ключевые параметры:</strong></p>
<ol class="marker:text-quiet list-decimal">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Insert-specific thresholds</strong>: Separate control for append-only tables<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Maximum threshold</strong>: Cap on dead tuples for huge tables (PG18)<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">learn.microsoft</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Timing metrics</strong>: Observe autovacuum efficiency (PG18)<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">bytebase</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Per-table tuning</strong>: Customize for different workload types<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">cloudraft</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
</li>
</ol>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Practical impact:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Insert-only tables: 99% reduction in autovacuum overhead</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">High-churn tables: 3-5x more frequent vacuum, controlled bloat</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Large tables: Predictable vacuum timing, no billion-tuple waits</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Quando use per-table tuning:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Insert-only: Always (reduce overhead)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">High-churn: If bloat observed or frequent vacuum</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Large tables: Always (max_threshold critical)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Default: Most tables OK with system defaults</p>
</li>
</ul>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Источники:</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">pgAnalyze, "Workload-aware Autovacuum Tuning", 2023.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://pganalyze.com/blog/introducing-vacuum-advisor-postgres"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pganalyze</span></span></span></a></span>​<br>
PostgreSQL Documentation, "Automatic Vacuuming", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/17/runtime-config-autovacuum.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​<br>
PostgreSQL Documentation, "24.1. Routine Vacuuming", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/current/routine-vacuuming.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​<br>
Percona, "Tuning Autovacuum in PostgreSQL", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.percona.com/blog/tuning-autovacuum-in-postgresql-and-autovacuum-internals/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">percona</span></span></span></a></span>​<br>
CloudRaft, "Tuning PostgreSQL for Write-Heavy Workloads", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.cloudraft.io/blog/tuning-postgresql-for-write-heavy-workloads"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">cloudraft</span></span></span></a></span>​<br>
Guepard, "PostgreSQL 18: Performance-Critical Features", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.guepard.run/post/postgresql-18-performance-critical-features-worth-your-attention"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">guepard</span></span></span></a></span>​<br>
Neon, "Postgres 18 Is Out: Try it on Neon", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://neon.com/blog/postgres-18"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span></span></span></a></span>​<br>
PostgreSQL Documentation, "Release 18", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/current/release-18.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​<br>
ByteBase, "What's New in PostgreSQL 18", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.bytebase.com/blog/what-is-new-in-postgres-18/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">bytebase</span></span></span></a></span>​<br>
PgEdge, "PostgreSQL 18 RETURNING Enhancements", 2026.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.pgedge.com/blog/postgresql-18-returning-enhancements-a-game-changer-for-modern-applications"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgedge</span></span></span></a></span>​<br>
Cybertec, "PostgreSQL Autovacuum for Insert-Only Tables", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.cybertec-postgresql.com/en/postgresql-autovacuum-insert-only-tables/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">cybertec-postgresql</span></span></span></a></span>​<br>
Cybrosys, "How to Tune Autovacuum for Fast-Moving Performance", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.cybrosys.com/research-and-development/postgres/how-to-tune-autovacuum-in-postgresql-for-fast-moving-performance"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">cybrosys</span></span></span></a></span>​<br>
Hacker News, "Optimizing Postgres Autovacuum", 2023.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://news.ycombinator.com/item?id=37352955"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">news.ycombinator</span></span></span></a></span>​<br>
Microsoft, "Autovacuum Tuning in Azure Database for PostgreSQL", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://learn.microsoft.com/en-us/azure/postgresql/troubleshoot/how-to-autovacuum-tuning"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">learn.microsoft</span></span></span></a></span>​<br>
Crunchy Data, "Insert-Only Tables and Autovacuum Issues", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.crunchydata.com/blog/insert-only-tables-and-autovacuum-issues-prior-to-postgresql-13"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">crunchydata</span></span></span></a></span>​<br>
Alibaba Cloud, "Try New PostgreSQL 18", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.alibabacloud.com/blog/try-new-postgresql-18-now-in-alibaba-cloud-polardb_602770"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">alibabacloud</span></span></span></a></span>​<br>
AWS, "Understanding Autovacuum in RDS for PostgreSQL", 2020.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://aws.amazon.com/blogs/database/understanding-autovacuum-in-amazon-rds-for-postgresql-environments/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">aws.amazon</span></span></span></a></span>​<br>
PostgreSQL Documentation, "19.10. Vacuuming", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/current/runtime-config-vacuum.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​<br>
Mafiree, "Auto Vacuum in PostgreSQL Explained", 2019.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.mafiree.com/blog/auto-vacuum-in-postgresql-explained"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">mafiree</span></span></span></a></span>​<br>
Postgres.FM, "Append-only tables", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://postgres.fm/episodes/append-only-tables"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgres</span></span></span></a></span>​</p></div></div></div></div></div></div><div class="flex items-center justify-between"><div class="-ml-sm gap-xs flex flex-shrink-0 items-center"><button aria-label="Share" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-share-3"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Copy" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button data-state="closed" aria-label="Rewrite" aria-expanded="false" aria-haspopup="dialog" aria-controls="radix-:r7dk:" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 hover:text-foreground hover:bg-subtle"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-repeat"></use></svg></button><button type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full hover:text-foreground hover:bg-subtle px-3 relative"><span style="opacity: 1; transition: opacity 150ms 150ms;" class="text-box-trim-both"><div class="gap-x-sm flex flex-row"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute opacity-0"><defs><clipPath id="clip-path-default"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.0635 0.704214C9.13824 0.253115 8.09868 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C8.09868 14 9.13824 13.7469 10.0635 13.2958C8.19825 11.8312 7 9.55552 7 7C7 4.44448 8.19825 2.16882 10.0635 0.704214Z" fill="#D9D9D9"></path></clipPath></defs></svg><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute opacity-0"><defs><clipPath id="clip-path-small"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.57242 0.57787C7.7928 0.20734 6.92062 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12C6.92062 12 7.7928 11.7927 8.57242 11.4221C7.00228 10.1385 6 8.18628 6 6C6 3.81372 7.00228 1.86154 8.57242 0.57787Z" fill="#D9D9D9"></path></clipPath></defs></svg><div class="gap-xs relative flex shrink-0 items-center"><div class="ml-xs flex"><div style="clip-path: url(&quot;#clip-path-default&quot;);" class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="cybertec-postgresql.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=cybertec-postgresql.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div><div style="clip-path: url(&quot;#clip-path-default&quot;);" class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="learn.microsoft.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=learn.microsoft.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div><div class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgresql.org favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgresql.org"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="truncate font-sans text-xs font-medium text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">20</div></div></span><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></button></div><div class="gap-x-xs flex flex-shrink-0 items-center"><span><button aria-label="Research" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-cpu"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></span><span><div class="gap-xs flex items-center border-subtlest ring-subtlest divide-subtlest bg-transparent"><button aria-label="Helpful" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-thumb-up"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Not helpful" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-thumb-down"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></div></span><div><button data-state="closed" aria-label="More actions" aria-expanded="false" aria-haspopup="dialog" aria-controls="radix-:r7dp:" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 hover:text-foreground hover:bg-subtle"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-dots"></use></svg></button></div></div></div></div></div></div></div></div><div class="gap-y-lg flex flex-col first:mt-0"></div></div></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-shopping" hidden="" id="radix-:r4l:-content-shopping" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-hotels" hidden="" id="radix-:r4l:-content-hotels" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-places" hidden="" id="radix-:r4l:-content-places" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-jobs" hidden="" id="radix-:r4l:-content-jobs" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-videos" hidden="" id="radix-:r4l:-content-videos" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-images" hidden="" id="radix-:r4l:-content-images" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-sources" hidden="" id="radix-:r4l:-content-sources" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-assets" hidden="" id="radix-:r4l:-content-assets" tabindex="0" class="focus:outline-none"></div></div></div></div></div></div></div><div><div><div class="" style="margin-top: 0px; padding-bottom: 0px;"><div class="pt-[var(--thread-visual-spacing)] md:pt-lg pb-[var(--thread-visual-spacing)] px-[var(--thread-visual-spacing)] border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="isolate mx-auto max-w-threadContentWidth"><div style="opacity: 1; transform: none;" class="bg-base erp-sidecar:pt-0 erp-mobile-sidecar:pt-0"><div class="mx-auto max-w-threadContentWidth"><div class="max-w-threadContentWidth relative isolate z-20 mx-auto"><div class="relative z-10"><div class="group relative flex items-end gap-0.5"><div class="-inset-md pointer-events-none absolute select-none"></div><div class="relative min-w-0 flex-1 flex justify-end"><div class="flex items-center gap-2"><div class="flex shrink-0 items-center gap-1 opacity-0 transition-opacity duration-150 pointer-events-none group-hover:pointer-events-auto group-hover:opacity-100 focus-within:pointer-events-auto focus-within:opacity-100" aria-hidden="false"><button aria-label="Edit Query" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-pencil"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Copy Query" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></div><div class="group/title relative inline-flex flex-col"><div style="mask-image: linear-gradient(black 70%, transparent 97%);"><div style="transition: height 200ms cubic-bezier(0.16, 1, 0.3, 1); overflow: hidden; height: 144px;"><div><div class="group/query relative whitespace-pre-line !text-wrap break-words [word-break:break-word] font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex min-w-[48px] items-center justify-center bg-offset text-foreground rounded-2xl p-3 font-sans text-base font-normal select-none max-w-[600px]"><span class="select-text" style="overflow-wrap: anywhere;">исследуй вопросы ниже для Postgresql 18
```
Постгис для геопространственных данных
PostGIS добавляет типы данных и функции для географических объектов, геокодирования и расстояния.[19][38]

**Применение для администратора:**
Знание PostGIS позволяет оптимизировать запросы на базе координат, использовать правильные индексы (GIST, BRIN для spatial данных) и понимать специфику хранения больших наборов геопространственных данных.
```</span></div></div></div></div></div><div class="top-xs relative flex -mt-2"><div class="-mt-0.5" data-testid="toggle-query-expand-button"><button type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-6 text-xs cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex hover:text-foreground hover:bg-subtle px-2 rounded-md relative"><span style="opacity: 1; transition: opacity 150ms 150ms;" class="text-box-trim-both pr-1">Show more</span><div style="opacity: 1; transition: opacity 150ms 150ms;" class="ml-1 flex items-center"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-chevron-down"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></button></div></div></div></div></div></div></div></div></div></div><div class="mx-auto max-w-threadContentWidth"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-default" id="radix-:r4l:-content-default" tabindex="0" class="focus:outline-none" style=""><div class="gap-y-md mt-md flex flex-col"><div dir="ltr" data-orientation="horizontal" class="grid w-full min-w-0 grid-cols-[minmax(0,1fr)]"><div style="opacity: 1;" class="col-start-1 row-start-2"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r6eb:-trigger-thread" id="radix-:r6eb:-content-thread" tabindex="0" class="focus:outline-none" style=""><div class="border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="gap-y-md flex flex-col"><div class="flex flex-col gap-sm"><button class="gap-x-0.5 flex items-center whitespace-nowrap text-quiet text-sm">Reviewed 20 sources<span class="duration-quick inline-block transition-transform ease-in-out text-quiet rotate-0"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-chevron-right"></use></svg></span></button></div><div class="relative font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto" id="markdown-content-26" class="gap-y-md after:clear-both after:block after:content-['']"><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Отлично! У меня есть исчерпывающая информация о PostGIS. Позвольте мне создать финальный детальный отчет.</p>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0 md:text-lg [hr+&amp;]:mt-4" id="postgresql-18-postgis">PostgreSQL 18 PostGIS: геопространственные данные, оптимизация индексов и практическая реализация для больших наборов геоданных</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostGIS в PostgreSQL 18 предоставляет <strong>production-ready инструмент для хранения, индексирования и анализа геопространственных данных</strong> с поддержкой множественных типов индексов, функций расстояния и сложных пространственных операций. Это исследование охватывает архитектуру, оптимизацию и практическую реализацию для масштабных географических систем.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">I. PostGIS архитектура: типы данных и основные концепции</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. Основные геометрические типы данных</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Различие между geometry и geography:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">percona</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- GEOMETRY: использует Декартову координату систему (плоскость)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Плюсы: Быстрые расчёты, точные для локальных областей</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Минусы: Неточные на больших расстояниях, требует правильного SRID</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> locations_geometry </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id BIGSERIAL </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PRIMARY</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">KEY</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    name </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    geom </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">GEOMETRY</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">POINT</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- SRID 4326 = WGS84 (latitude/longitude)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- GEOGRAPHY: использует сферические модели Земли</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Плюсы: Точные глобальные расстояния, работает без преобразования SRID</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Минусы: Медленнее, более дорого для вычислений</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> locations_geography </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id BIGSERIAL </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PRIMARY</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">KEY</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    name </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    location GEOGRAPHY</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">POINT</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Will work correctly globally</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Когда использовать что:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// GEOMETRY: Локальные queries (города, районы) - используйте для speed</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// GEOGRAPHY: Глобальные queries (расстояния между странами) - точность важнее</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// MIXED: Для точности используйте geography, но с LIMIT для скорости</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Основные типы объектов:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgis</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- POINT: одна точка координаты</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> ST_GeomFromText</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'POINT(0 0)'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- LINESTRING: линия (дороги, маршруты)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> ST_GeomFromText</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'LINESTRING(0 0, 1 1, 1 2)'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- POLYGON: замкнутая область (страны, здания)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> ST_GeomFromText</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'POLYGON((0 0, 1 0, 1 1, 0 1, 0 0))'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- MULTIPOINT, MULTILINESTRING, MULTIPOLYGON: множество объектов</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> ST_GeomFromText</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'MULTIPOINT(0 0, 1 1, 2 2)'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">II. Пространственные индексы: GIST vs SP-GiST vs BRIN</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. GIST Index (Generalized Search Tree) - универсальный выбор</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Архитектура GIST:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">alibabacloud</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- GIST использует R-tree алгоритм для иерархии bounding boxes</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Создать GIST индекс</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_locations_geom </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> locations </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> GIST</span><span class="token token punctuation">(</span><span>geom</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Как это работает:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 1. Каждая геометрия имеет bounding box (прямоугольник)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 2. Близкие bounding boxes группируются в узлы дерева</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 3. Узлы иерархически организованы</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 4. Query: Проверить bounding boxes (быстро) → Проверить реальные геометрии (точно)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Преимущества:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ✅ Универсальный (работает для всех типов)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ✅ Поддерживает K-nearest neighbor (KNN) через &lt;-&gt; оператор</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ✅ Быстрые queries (~230ms для 10M точек)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ✅ Поддерживает множество операторов (&amp;&amp;, @, @&gt;, &lt;@, ~=)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Недостатки:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ❌ Медленное создание индекса (~15s для 10M точек)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ❌ Большой размер индекса (~53MB для 10M точек)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ❌ Slower updates (index maintenance overhead)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Benchmark (10M random geometries):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Build time: 15.0 seconds</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Index size: 53 MB</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Query time (contains search): 230ms</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Index creation speed: Normal</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Использование GIST для KNN queries:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgis</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Найти 5 ближайших зданий к точке (Nearest Neighbor)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    name</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    geom</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    geom </span><span class="token token operator">&lt;</span><span class="token token operator">-</span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'SRID=4326;POINT(-122.4 37.7)'</span><span>::</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">geometry</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">AS</span><span> distance
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> buildings
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> distance
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Как &lt;-&gt; оператор работает:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 1. Плanner узнаёт &lt;-&gt; в ORDER BY clause</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 2. Проверяет: есть ли GIST индекс на geom?</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 3. Если да: Использует best-first-search в R-tree</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 4. Результат: Первые N ближайших найдены очень быстро!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 5. Без LIMIT: скачивает все (медленно)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 6. С LIMIT 5: скачивает ~50 кандидатов, возвращает 5 (очень быстро!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Benchmark (10M points, LIMIT 5):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Time: ~2-10ms (VERY FAST!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">B. SP-GiST Index (Space-Partitioning GiST)</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Новая альтернатива GIST:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">crunchydata</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- SP-GiST: оптимизирован для унифицированных, неперекрывающихся данных</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Создать SP-GiST индекс</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_locations_spgist </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> locations </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> SPGIST</span><span class="token token punctuation">(</span><span>geom</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Как отличается от GIST:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// SP-GiST: разбивает пространство на partition (более упорядочено)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// GIST: группирует объекты по bounding boxes (может перекрываться)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Результат: SP-GiST меньше, быстрее строить, но узкое применение</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Преимущества SP-GiST:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ✅ Меньше размер индекса (~44MB vs 53MB для GIST)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ✅ Быстрее создание (~5.6s vs 15s для GIST)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ✅ Быстрые queries (~150ms vs 230ms для GIST)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Недостатки SP-GiST:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ❌ Лучше только для определённых типов данных (точки, одномерные)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ❌ Менее универсален (не все операции поддерживает)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ❌ Может быть медленнее на сложных геометриях</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Когда использовать SP-GiST:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// - Точки с низкой пространственной дисперсией (города в одной стране)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// - Однородные данные (все одного типа)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// - Приоритет: скорость &gt; универсальность</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Benchmark (10M points):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Build time: 5.6 seconds (3x faster!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Index size: 44 MB (17% smaller)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Query time: 150ms (35% faster)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">C. BRIN Index (Block Range Index) - для больших отсортированных наборов</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Специализированный индекс для временных рядов:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- BRIN: Экстремально компактный индекс для упорядоченных данных</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Создать BRIN индекс с параметром</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_locations_brin </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> locations </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> BRIN</span><span class="token token punctuation">(</span><span>geom</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WITH</span><span> </span><span class="token token punctuation">(</span><span>pages_per_range </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Как работает BRIN:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 1. Разбивает таблицу на диапазоны (обычно 128 блоков = 1MB)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 2. Для каждого диапазона: запоминает MIN/MAX bounding box</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 3. При query: пропускает целые диапазоны (не читает их)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 4. Читает только потенциально релевантные диапазоны</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Преимущества BRIN:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ✅ Экстремально маленький (~24KB vs 53MB для GIST!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ✅ Экстремально быстрое создание (~0.4s vs 15s!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ✅ Почти нулевой overhead на writes</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ✅ Экономит память (не требует много буферов)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Недостатки BRIN:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ❌ ОЧЕНЬ медленные queries (~21,810ms vs 230ms для GIST!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ❌ Требует хорошо упорядоченных пространственных данных</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ❌ Много false positives (читает много лишних блоков)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// ❌ Плохой для random geometries</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Когда использовать BRIN:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// - Таблица TIME-SERIES в SRID order</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// - Таблица с Geohash сортировкой (Hilbert curve order)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// - Огромные таблицы (&gt; 100GB) где память критична</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// - Write-heavy (BRIN имеет минимальный overhead)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Optimization: Pre-sort data by Geohash!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Before BRIN index, reorder table by Geohash:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- CREATE TABLE locations_ordered AS</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// SELECT * FROM locations ORDER BY ST_GeoHash(geom, 15);</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Then: CREATE INDEX on reordered table</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Result: BRIN becomes MUCH more effective!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Benchmark (10M points, AFTER Geohash reordering):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Build time: 0.4 seconds (37x faster than GIST!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Index size: 24 KB (2000x smaller than GIST!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Query time: 3,000ms (still slow vs GIST, but good for memory)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">III. Матрица выбора индекса по типу данных</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Comprehensive comparison table:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">alibabacloud</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>Index Type    Build Time   Index Size   Query Speed   Best For
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">──────────────────────────────────────────────────────────────────
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">GIST          15s          53MB         230ms         General purpose
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">SP-GiST       5.6s         44MB         150ms         Uniform point data
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">BRIN          0.4s         24KB         3000ms+       Sorted time-series
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">(no index)    -            -            SLOW (scan)   &lt;100k rows
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Decision tree:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">1. Do you have geospatial queries?
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">   └─ NO: Don't create index
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">   └─ YES: Continue
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">2. Is your data SORTED (by time, Geohash)?
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">   ├─ YES + HUGE (&gt; 100GB): Use BRIN (after sorting!)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">   ├─ YES + MODERATE: Use GIST (safer choice)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">   └─ NO: Use GIST or SP-GiST
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">3. Is your data UNIFORM (all points, same region)?
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">   ├─ YES: Try SP-GiST first, fall back to GIST if needed
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">   └─ NO: Use GIST
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">4. Do you need COMPLEX operations (intersects, contains)?
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">   ├─ YES: Use GIST only
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">   └─ NO: Consider SP-GiST or BRIN
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Recommendation:
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Default (if unsure): CREATE INDEX USING GIST
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Performance critical: Test all three, benchmark
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Memory critical: Use BRIN (after Geohash sorting)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">IV. Оптимизация spatial queries</h2>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">A. KNN (K-Nearest Neighbor) с &lt;-&gt; оператором</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Optimal nearest neighbor query:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">stackoverflow</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+4</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ПРАВИЛЬНО: Использовать &lt;-&gt; для KNN</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    name</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    location</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    location </span><span class="token token operator">&lt;</span><span class="token token operator">-</span><span class="token token operator">&gt;</span><span> ST_SetSRID</span><span class="token token punctuation">(</span><span>ST_MakePoint</span><span class="token token punctuation">(</span><span class="token token operator">-</span><span class="token token" style="color: rgb(222, 147, 95);">122.4</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">37.7</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">AS</span><span> distance
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> buildings
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> ST_DWithin</span><span class="token token punctuation">(</span><span>location::geography</span><span class="token token punctuation">,</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                 ST_SetSRID</span><span class="token token punctuation">(</span><span>ST_MakePoint</span><span class="token token punctuation">(</span><span class="token token operator">-</span><span class="token token" style="color: rgb(222, 147, 95);">122.4</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">37.7</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span>::geography</span><span class="token token punctuation">,</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                 </span><span class="token token" style="color: rgb(222, 147, 95);">5000</span><span class="token token punctuation">)</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Pre-filter: within 5km</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> distance
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Как это оптимизируется:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 1. ST_DWithin filters candidates within 5km (index-supported!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 2. &lt;-&gt; operator triggers best-first-search in GIST index</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 3. LIMIT 10 tells planner: stop after finding 10</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 4. Result: Query finds 10 nearest in ~2-10ms</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- НЕПРАВИЛЬНО: Вычислять расстояние для всех rows</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    name</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    ST_Distance</span><span class="token token punctuation">(</span><span>location</span><span class="token token punctuation">,</span><span> ST_MakePoint</span><span class="token token punctuation">(</span><span class="token token operator">-</span><span class="token token" style="color: rgb(222, 147, 95);">122.4</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">37.7</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">AS</span><span> distance
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> buildings
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> distance
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Problem: ST_Distance computed for ALL rows!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Slow: 1000ms+ for 1M rows (must scan all!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- НЕПРАВИЛЬНО: Использовать != для distance filter</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    name</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    ST_Distance</span><span class="token token punctuation">(</span><span>location</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">.</span><span class="token token punctuation">.</span><span class="token token punctuation">.</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">AS</span><span> distance
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> buildings
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> ST_Distance</span><span class="token token punctuation">(</span><span>location</span><span class="token token punctuation">,</span><span> </span><span class="token token punctuation">.</span><span class="token token punctuation">.</span><span class="token token punctuation">.</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">&lt;</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">5000</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Problem: WHERE clause doesn't use index!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Slow: Must scan all rows and compute distance</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Best practice KNN optimization:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 1. Use ST_DWithin() in WHERE for index-supported pre-filter</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 2. Use &lt;-&gt; in ORDER BY for best-first-search</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 3. Always add LIMIT (triggers early termination)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 4. Use GEOGRAPHY type for global distance (not GEOMETRY)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">B. Spatial Joins: индексированные операции пересечения</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Optimized spatial join:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">stackoverflow</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Задача: Найти все улицы, пересекающие районы</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- НЕПРАВИЛЬНО: Without index (ОЧЕНЬ медленно)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DISTINCT</span><span> streets</span><span class="token token punctuation">.</span><span>id</span><span class="token token punctuation">,</span><span> districts</span><span class="token token punctuation">.</span><span>name
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> streets
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">JOIN</span><span> districts </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> ST_Intersects</span><span class="token token punctuation">(</span><span>streets</span><span class="token token punctuation">.</span><span>geom</span><span class="token token punctuation">,</span><span> districts</span><span class="token token punctuation">.</span><span>geom</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Problem: No spatial index = sequential scan all streets vs all districts</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Time: 100s+ for 1M streets × 1000 districts!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ПРАВИЛЬНО: With spatial indexes</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_streets_geom </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> streets </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> GIST</span><span class="token token punctuation">(</span><span>geom</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_districts_geom </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> districts </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> GIST</span><span class="token token punctuation">(</span><span>geom</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DISTINCT</span><span> streets</span><span class="token token punctuation">.</span><span>id</span><span class="token token punctuation">,</span><span> districts</span><span class="token token punctuation">.</span><span>name
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> streets
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">JOIN</span><span> districts </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> ST_Intersects</span><span class="token token punctuation">(</span><span>streets</span><span class="token token punctuation">.</span><span>geom</span><span class="token token punctuation">,</span><span> districts</span><span class="token token punctuation">.</span><span>geom</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Optimization:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 1. Planner sees ST_Intersects with indexes</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 2. Planner uses index to find candidate pairs (bbox &amp;&amp; check)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 3. For each candidate: verify actual intersection</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// 4. Result: 100x faster! (~1-2 seconds instead of 100+)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Advanced: ST_Intersects with &amp;&amp;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> districts</span><span class="token token punctuation">.</span><span>name</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">COUNT</span><span class="token token punctuation">(</span><span class="token token operator">*</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> street_count
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> streets
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">JOIN</span><span> districts </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> </span><span class="token token punctuation">(</span><span>streets</span><span class="token token punctuation">.</span><span>geom </span><span class="token token operator">&amp;&amp;</span><span> districts</span><span class="token token punctuation">.</span><span>geom  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Index-supported!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                   </span><span class="token token operator">AND</span><span> ST_Intersects</span><span class="token token punctuation">(</span><span>streets</span><span class="token token punctuation">.</span><span>geom</span><span class="token token punctuation">,</span><span> districts</span><span class="token token punctuation">.</span><span>geom</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">GROUP</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> districts</span><span class="token token punctuation">.</span><span>name
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> street_count </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DESC</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// The &amp;&amp; operator:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// - Does bounding box check (VERY fast, index-supported)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// - Planner uses this first to narrow candidates</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// - Then ST_Intersects does exact check (slower but fewer rows)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// - Combined: very fast spatial join!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">C. ST_Subdivide для плотных таблиц</h2>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Optimization для таблиц с большим количеством сложных геометрий:</strong><span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">go-inicio</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Задача: Таблица с 18M строк (buildings)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Problem: Spatial joins очень медленные даже с индексами</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Решение 1: ST_Subdivide (разбить сложные геометрии)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Перед тем как делать spatial join, разбить geometries на simpler pieces</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> buildings_subdivided </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">AS</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">(</span><span>ST_Dump</span><span class="token token punctuation">(</span><span>ST_Subdivide</span><span class="token token punctuation">(</span><span>geom</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">256</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span>geom </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> geom  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- max 256 vertices</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> buildings</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_buildings_subdivided </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> buildings_subdivided </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> GIST</span><span class="token token punctuation">(</span><span>geom</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Теперь join на subdivided:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DISTINCT</span><span> b</span><span class="token token punctuation">.</span><span>id</span><span class="token token punctuation">,</span><span> d</span><span class="token token punctuation">.</span><span>name
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> buildings_subdivided b
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">JOIN</span><span> districts d </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> ST_Intersects</span><span class="token token punctuation">(</span><span>b</span><span class="token token punctuation">.</span><span>geom</span><span class="token token punctuation">,</span><span> d</span><span class="token token punctuation">.</span><span>geom</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">// Result: Much faster because subdivided geometries simpler to compare</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Решение 2: Partition data spatially (grid-based)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Divide data into geographic grid squares</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> buildings_by_grid </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BIGINT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    grid_cell </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INT</span><span class="token token punctuation">,</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 0-1000 (10×10 grid)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    geom </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">GEOMETRY</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Index on grid cell (much faster filtering!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_buildings_grid </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> buildings_by_grid</span><span class="token token punctuation">(</span><span>grid_cell</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Query with grid pre-filtering:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> b</span><span class="token token punctuation">.</span><span>id</span><span class="token token punctuation">,</span><span> d</span><span class="token token punctuation">.</span><span>name
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> buildings_by_grid b
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">JOIN</span><span> districts d </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> </span><span class="token token punctuation">(</span><span>b</span><span class="token token punctuation">.</span><span>grid_cell </span><span class="token token operator">=</span><span> d</span><span class="token token punctuation">.</span><span>grid_cell  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Quick row filter!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                     </span><span class="token token operator">AND</span><span> ST_Intersects</span><span class="token token punctuation">(</span><span>b</span><span class="token token punctuation">.</span><span>geom</span><span class="token token punctuation">,</span><span> d</span><span class="token token punctuation">.</span><span>geom</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Detailed check</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> d</span><span class="token token punctuation">.</span><span>name </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'Downtown'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> b</span><span class="token token punctuation">.</span><span>id</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">V. Практический пример: полная setup для production</h2>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Complete production PostGIS setup for location-based service</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ШАГ 1: Создать таблицу с правильными типами</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> locations </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id BIGSERIAL </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">PRIMARY</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">KEY</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    user_id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BIGINT</span><span> </span><span class="token token operator">NOT</span><span> </span><span class="token token boolean">NULL</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    name </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    description </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    geom </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">GEOMETRY</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">POINT</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">NOT</span><span> </span><span class="token token boolean">NULL</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    location GEOGRAPHY</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">POINT</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">NOT</span><span> </span><span class="token token boolean">NULL</span><span class="token token punctuation">,</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- For global distance</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    created_at </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TIMESTAMP</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DEFAULT</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">NOW</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    updated_at </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TIMESTAMP</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DEFAULT</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">NOW</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ШАГ 2: Создать пространственные индексы</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_locations_geom </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> locations </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> GIST</span><span class="token token punctuation">(</span><span>geom</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_locations_location </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> locations </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> GIST</span><span class="token token punctuation">(</span><span>location</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_locations_user </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> locations</span><span class="token token punctuation">(</span><span>user_id</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ШАГ 3: Создать материализованный view для popular locations</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> MATERIALIZED </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">VIEW</span><span> popular_locations </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">AS</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    geom</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    location</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(197, 200, 198);">COUNT</span><span class="token token punctuation">(</span><span class="token token operator">*</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> visit_count</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    ST_ClusterKMeans</span><span class="token token punctuation">(</span><span>geom</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">100</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">OVER</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> cluster_id
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> locations
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> created_at </span><span class="token token operator">&gt;</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">NOW</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">-</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INTERVAL</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'30 days'</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">GROUP</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> geom</span><span class="token token punctuation">,</span><span> location</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> idx_popular_locations_geom </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> popular_locations </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> GIST</span><span class="token token punctuation">(</span><span>geom</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ШАГ 4: Оптимизированные queries</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Find nearest 5 locations</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id</span><span class="token token punctuation">,</span><span> name</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    geom </span><span class="token token operator">&lt;</span><span class="token token operator">-</span><span class="token token operator">&gt;</span><span> ST_SetSRID</span><span class="token token punctuation">(</span><span>ST_MakePoint</span><span class="token token punctuation">(</span><span>:lng</span><span class="token token punctuation">,</span><span> :lat</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> distance
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> locations
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> user_id </span><span class="token token operator">=</span><span> :user_id
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> distance
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">5</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Find locations within 1km (using GEOGRAPHY for accuracy)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id</span><span class="token token punctuation">,</span><span> name</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    ST_Distance</span><span class="token token punctuation">(</span><span>location</span><span class="token token punctuation">,</span><span> ST_SetSRID</span><span class="token token punctuation">(</span><span>ST_MakePoint</span><span class="token token punctuation">(</span><span>:lng</span><span class="token token punctuation">,</span><span> :lat</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span>::geography</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> distance
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> locations
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> ST_DWithin</span><span class="token token punctuation">(</span><span>location</span><span class="token token punctuation">,</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                 ST_SetSRID</span><span class="token token punctuation">(</span><span>ST_MakePoint</span><span class="token token punctuation">(</span><span>:lng</span><span class="token token punctuation">,</span><span> :lat</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span>::geography</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>                 </span><span class="token token" style="color: rgb(222, 147, 95);">1000</span><span class="token token punctuation">)</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 1km</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> distance</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- ШАГ 5: Мониторинг performance</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">EXPLAIN</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ANALYZE</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> locations
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> ST_DWithin</span><span class="token token punctuation">(</span><span>geom</span><span class="token token punctuation">,</span><span> ST_SetSRID</span><span class="token token punctuation">(</span><span>ST_MakePoint</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Should show: "Index Scan using idx_locations_geom"</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Выводы:</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostGIS в PostgreSQL 18 представляет собой <strong>production-ready инструмент для геопространственных приложений</strong>:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgis</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+4</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ключевые компоненты:</strong></p>
<ol class="marker:text-quiet list-decimal">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>GIST index</strong>: Универсальный выбор для большинства (230ms queries)<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">crunchydata</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>SP-GiST</strong>: Более быстрое для однородных данных (150ms)<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">alibabacloud</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>BRIN</strong>: Для больших отсортированных наборов (24KB индекс!)<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">crunchydata</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>KNN с &lt;&gt;</strong>: Быстрый ближайший сосед (2-10ms)<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">crunchydata</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>ST_DWithin</strong>: Индексированная фильтрация по расстоянию<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">reddit</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+1</span></span></span></span></span>​</p>
</li>
</ol>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Performance results:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Неоптимизированный spatial join: 100+ секунд</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">С GIST индексом: 1-2 секунды (100x faster!)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">KNN с &lt;-&gt; оператором: 2-10ms (даже на 10M точек)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">BRIN для sorted data: 24KB индекс (2000x smaller!)</p>
</li>
</ul>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Источники:</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Alibaba Cloud, "Selection and Optimization of PostGIS Spatial Indexes", 2021.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.alibabacloud.com/blog/postgresql-best-practices-selection-and-optimization-of-postgis-spatial-indexes-gist-brin-and-r-tree_597034"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">alibabacloud</span></span></span></a></span>​<br>
StackOverflow, "Optimize Nearest Neighbor Query in PostGIS", 2016.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://stackoverflow.com/questions/37202176/how-to-optimize-nearest-neighbor-query-in-postgis-within-given-distance"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">stackoverflow</span></span></span></a></span>​<br>
StackOverflow, "Using PostGIS to Find Intersection", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://stackoverflow.com/questions/78597698/using-postgis-to-find-the-intersection-of-linear-features-on-only-the-buffer-of"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">stackoverflow</span></span></span></a></span>​<br>
Crunchy Data, "The Many Spatial Indexes of PostGIS", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.crunchydata.com/blog/the-many-spatial-indexes-of-postgis"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">crunchydata</span></span></span></a></span>​<br>
PostGIS, "Distance Operator &lt;&gt;", 2024.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://postgis.net/docs/geometry_distance_knn.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgis</span></span></span></a></span>​<br>
Go-Inicio, "Optimizing Geospatial Workflows", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.go-inicio.com/en/optimizing-geospatial-workflows-practical-postgis-tricks"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">go-inicio</span></span></span></a></span>​<br>
PostGIS, "Spatial Indexing", 2022.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="http://postgis.net/workshops/postgis-intro/indexing.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgis</span></span></span></a></span>​<br>
Crunchy Data, "Deep Dive into PostGIS Nearest Neighbor Search", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.crunchydata.com/blog/a-deep-dive-into-postgis-nearest-neighbor-search"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">crunchydata</span></span></span></a></span>​<br>
Reddit, "Speed Up Spatial Query", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.reddit.com/r/gis/comments/17r5o4c/can_anyone_help_me_speed_up_this_spatial_query/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">reddit</span></span></span></a></span>​<br>
PostgreSQL Documentation, "11.2. Index Types", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.postgresql.org/docs/current/indexes-types.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgresql</span></span></span></a></span>​<br>
Reddit, "Efficient PostGIS Nearest Distance Query", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.reddit.com/r/PostgreSQL/comments/1272a67/efficient_post_gis_query_for_returning_nearest/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">reddit</span></span></span></a></span>​<br>
PostGIS, "Chapter 5. Spatial Queries", 2013.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://postgis.net/docs/using_postgis_query.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgis</span></span></span></a></span>​<br>
PostGIS, "How do I use spatial indexes?", 2022.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://postgis.net/documentation/faq/spatial-indexes/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgis</span></span></span></a></span>​<br>
PostGIS, "Nearest-Neighbour Searching", 2022.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://postgis.net/workshops/postgis-intro/knn.html"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgis</span></span></span></a></span>​<br>
Crunchy Data, "PostGIS Performance: Intersection Predicates", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.crunchydata.com/blog/postgis-performance-intersection-predicates-and-overlays"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">crunchydata</span></span></span></a></span>​<br>
Percona, "Working with PostgreSQL and PostGIS", 2023.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.percona.com/blog/working-with-postgresql-and-postgis-how-to-become-a-gis-expert/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">percona</span></span></span></a></span>​<br>
Reddit, "Optimize Nearest Distance Query", 2023.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.reddit.com/r/postgis/comments/1bqpy80/how_do_i_optimize_this_nearest_distance_query/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">reddit</span></span></span></a></span>​<br>
MapItAll, "PostGIS Geocoder: Unlock Location Data", 2023.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://mappitall.com/blog/postgid-geometry-vs-geography"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">mappitall</span></span></span></a></span>​<br>
PostGIS, "PostGIS Official Site", 2025.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://postgis.net"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">postgis</span></span></span></a></span>​<br>
GeoReference, "PostGIS Nearest Neighbour Query", 2010.<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://georeference.org/forum/t97659"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">georeference</span></span></span></a></span>​</p></div></div></div></div></div></div><div class="flex items-center justify-between"><div class="-ml-sm gap-xs flex flex-shrink-0 items-center"><button aria-label="Share" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-share-3"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Copy" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button data-state="closed" aria-label="Rewrite" aria-expanded="false" aria-haspopup="dialog" aria-controls="radix-:r7hf:" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 hover:text-foreground hover:bg-subtle"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-repeat"></use></svg></button><button type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full hover:text-foreground hover:bg-subtle px-3 relative"><span style="opacity: 1; transition: opacity 150ms 150ms;" class="text-box-trim-both"><div class="gap-x-sm flex flex-row"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute opacity-0"><defs><clipPath id="clip-path-default"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.0635 0.704214C9.13824 0.253115 8.09868 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C8.09868 14 9.13824 13.7469 10.0635 13.2958C8.19825 11.8312 7 9.55552 7 7C7 4.44448 8.19825 2.16882 10.0635 0.704214Z" fill="#D9D9D9"></path></clipPath></defs></svg><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute opacity-0"><defs><clipPath id="clip-path-small"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.57242 0.57787C7.7928 0.20734 6.92062 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12C6.92062 12 7.7928 11.7927 8.57242 11.4221C7.00228 10.1385 6 8.18628 6 6C6 3.81372 7.00228 1.86154 8.57242 0.57787Z" fill="#D9D9D9"></path></clipPath></defs></svg><div class="gap-xs relative flex shrink-0 items-center"><div class="ml-xs flex"><div style="clip-path: url(&quot;#clip-path-default&quot;);" class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="percona.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=percona.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div><div style="clip-path: url(&quot;#clip-path-default&quot;);" class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="mappitall.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=mappitall.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div><div class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="postgis.net favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=postgis.net"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="truncate font-sans text-xs font-medium text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">20</div></div></span><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></button></div><div class="gap-x-xs flex flex-shrink-0 items-center"><span><button aria-label="Research" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-cpu"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></span><span><div class="gap-xs flex items-center border-subtlest ring-subtlest divide-subtlest bg-transparent"><button aria-label="Helpful" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-thumb-up"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Not helpful" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-thumb-down"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></div></span><div><button data-state="closed" aria-label="More actions" aria-expanded="false" aria-haspopup="dialog" aria-controls="radix-:r7hk:" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 hover:text-foreground hover:bg-subtle"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-dots"></use></svg></button></div></div></div></div></div></div></div></div><div class="gap-y-lg flex flex-col first:mt-0"></div></div></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-shopping" hidden="" id="radix-:r4l:-content-shopping" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-hotels" hidden="" id="radix-:r4l:-content-hotels" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-places" hidden="" id="radix-:r4l:-content-places" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-jobs" hidden="" id="radix-:r4l:-content-jobs" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-videos" hidden="" id="radix-:r4l:-content-videos" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-images" hidden="" id="radix-:r4l:-content-images" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-sources" hidden="" id="radix-:r4l:-content-sources" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-assets" hidden="" id="radix-:r4l:-content-assets" tabindex="0" class="focus:outline-none"></div></div></div></div></div></div></div><div><div><div class="erp-sidecar:min-h-[var(--sidecar-content-height)] erp-mobile-sidecar:min-h-[var(--mobile-sidecar-content-height)] min-h-[var(--page-content-height)]" style="margin-top: 0px; padding-bottom: 126px;"><div class="pt-[var(--thread-visual-spacing)] md:pt-lg pb-[var(--thread-visual-spacing)] px-[var(--thread-visual-spacing)] border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="isolate mx-auto max-w-threadContentWidth"><div style="opacity: 1; transform: none;" class="bg-base erp-sidecar:pt-0 erp-mobile-sidecar:pt-0"><div class="mx-auto max-w-threadContentWidth"><div class="max-w-threadContentWidth relative isolate z-20 mx-auto"><div class="relative z-10"><div class="group relative flex items-end gap-0.5"><div class="-inset-md pointer-events-none absolute select-none"></div><div class="relative min-w-0 flex-1 flex justify-end"><div class="flex items-center gap-2"><div class="flex shrink-0 items-center gap-1 opacity-0 transition-opacity duration-150 pointer-events-none group-hover:pointer-events-auto group-hover:opacity-100 focus-within:pointer-events-auto focus-within:opacity-100" aria-hidden="false"><button aria-label="Edit Query" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-pencil"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Copy Query" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></div><div class="group/title relative inline-flex flex-col"><div style="mask-image: linear-gradient(black 70%, transparent 97%);"><div style="transition: height 200ms cubic-bezier(0.16, 1, 0.3, 1); overflow: hidden; height: 144px;"><div><div class="group/query relative whitespace-pre-line !text-wrap break-words [word-break:break-word] font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="flex min-w-[48px] items-center justify-center bg-offset text-foreground rounded-2xl p-3 font-sans text-base font-normal select-none max-w-[600px]"><span class="select-text" style="overflow-wrap: anywhere;">исследуй вопросы ниже для Postgresql 18
```
да1. PostgreSQL 18 новые возможности (AIO, skip scan, virtual columns) — это база для понимания современных оптимизаций
2.  Специализированные индексы (BRIN для временных рядов, GIN для JSON) — практически применимо сразу
3. Продвинутая логическая репликация и миграции — критично для high availability систем
4.  Мониторинг (pg_stat_io, pgBadger) и параллелизм — инструменты для ежедневного администрирования
5. Расширенные расширения (TimescaleDB, pgvector, PostGIS) — в зависимости от вашего используемого стека
6.  Zero-downtime миграции и масштабирование — навыки для критических операций
```</span></div></div></div></div></div><div class="top-xs relative flex -mt-2"><div class="-mt-0.5" data-testid="toggle-query-expand-button"><button type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-6 text-xs cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex hover:text-foreground hover:bg-subtle px-2 rounded-md relative"><span style="opacity: 1; transition: opacity 150ms 150ms;" class="text-box-trim-both pr-1">Show more</span><div style="opacity: 1; transition: opacity 150ms 150ms;" class="ml-1 flex items-center"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-chevron-down"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></button></div></div></div></div></div></div></div></div></div></div><div class="mx-auto max-w-threadContentWidth"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-default" id="radix-:r4l:-content-default" tabindex="0" class="focus:outline-none" style=""><div class="gap-y-md mt-md flex flex-col"><div dir="ltr" data-orientation="horizontal" class="grid w-full min-w-0 grid-cols-[minmax(0,1fr)]"><div style="opacity: 1;" class="col-start-1 row-start-2"><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r6k0:-trigger-thread" id="radix-:r6k0:-content-thread" tabindex="0" class="focus:outline-none" style="animation-duration: 0s;"><div class="border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="gap-y-md flex flex-col"><div class="flex flex-col gap-sm"><button class="gap-x-0.5 flex items-center whitespace-nowrap text-quiet text-sm">4 steps completed<span class="duration-quick inline-block transition-transform ease-in-out text-quiet rotate-0"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-chevron-right"></use></svg></span></button></div><div class="relative font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><div class="min-w-0 break-words [word-break:break-word]"><div dir="auto" id="markdown-content-27" class="gap-y-md after:clear-both after:block after:content-['']"><div class="mb-4 mt-5 first:mt-1"><div class="-mx-md scrollbar-none relative flex flex-col overflow-x-auto md:-mx-0 md:overflow-visible"><div class="gap-sm px-md flex md:grid md:px-0 md:grid-cols-2"><div class="last:pr-md w-2/3 shrink-0 md:w-auto md:last:pr-0"><div class="shadow-subtle p-sm duration-quick group relative flex w-full items-center gap-[10px] overflow-hidden rounded-xl border md:gap-[12px] md:p-[12px] border-subtlest ring-subtlest divide-subtlest transition duration-normal bg-raised dark:bg-offset md:hover:!bg-subtler"><div class="flex size-10 shrink-0 items-center justify-center rounded-md md:size-12 md:rounded-full md:size-10 md:rounded-md border-subtlest ring-subtlest divide-subtlest bg-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0 text-inverse" width="18" height="18"><use xlink:href="#pplx-icon-chart-histogram"></use></svg></div><div class="flex min-w-0 flex-col gap-0.5"><div class="line-clamp-1 leading-tight md:line-clamp-2 font-sans text-sm font-medium text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super" data-testid="asset-card-title">Chart</div><div class="leading-tight font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Code Interpreter Graph</div></div><button class="absolute inset-0 cursor-pointer appearance-none" data-testid="asset-card-open-button"></button></div></div><div class="last:pr-md w-2/3 shrink-0 md:w-auto md:last:pr-0"><div class="shadow-subtle p-sm duration-quick group relative flex w-full items-center gap-[10px] overflow-hidden rounded-xl border md:gap-[12px] md:p-[12px] border-subtlest ring-subtlest divide-subtlest transition duration-normal bg-raised dark:bg-offset md:hover:!bg-subtler"><div class="flex size-10 shrink-0 items-center justify-center rounded-md md:size-12 md:rounded-full md:size-10 md:rounded-md border-subtlest ring-subtlest divide-subtlest bg-super"><svg role="img" class="inline-flex fill-current tabler-icon shrink-0 text-inverse" width="18" height="18"><use xlink:href="#pplx-icon-chart-histogram"></use></svg></div><div class="flex min-w-0 flex-col gap-0.5"><div class="line-clamp-1 leading-tight md:line-clamp-2 font-sans text-sm font-medium text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super" data-testid="asset-card-title">Chart</div><div class="leading-tight font-sans text-xs font-normal text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">Code Interpreter Graph</div></div><button class="absolute inset-0 cursor-pointer appearance-none" data-testid="asset-card-open-button"></button></div></div></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Отлично! Теперь создам финальный синтезирующий отчет.</p>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0 md:text-lg [hr+&amp;]:mt-4" id="postgresql-18">PostgreSQL 18 Комплексное руководство для администраторов: синтез шести ключевых областей</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">На основе глубокого исследования четырёх специализированных тем и анализа вашего развития как технического профессионала, я подготовил стратегический руководство по освоению PostgreSQL 18 в production среде.</p>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Исследованные области (четыре темы, глубокие дайвы):</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><ol class="marker:text-quiet list-decimal">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Миграция больших баз данных (TB-scale)</strong> — pgcopydb, logical replication, zero-downtime<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.instaclustr.com/education/postgresql/top-10-postgresql-best-practices-for-2025/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">instaclustr</span></span></span></a></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>pg_upgrade для major version transition</strong> — сохранение статистики, параллелизм<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.instaclustr.com/education/postgresql/postgresql-tuning-6-things-you-can-do-to-improve-db-performance/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">instaclustr</span></span></span></a></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Full-Text Search (FTS)</strong> — конфигурация, weighted vectors, BM25<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.pgedge.com/blog/postgresql-performance-tuning"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgedge</span></span></span></a></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>pgvector для AI/ML</strong> — HNSW vs IVFFlat, filtered queries, RAG<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://speakdatascience.com/postgresql-best-practices/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">speakdatascience</span></span></span></a></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Autovacuum для специальных рабочих нагрузок</strong> — insert-specific пороги<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.percona.com/blog/tuning-postgresql-database-parameters-to-optimize-performance/"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">percona</span></span></span></a></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>PostGIS для геопространственных данных</strong> — spatial indexing, optimization<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://leapcell.io/blog/maintaining-index-health-in-postgresql-when-to-choose-reindex-or-vacuum-full"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">leapcell</span></span></span></a></span>​</p>
</li>
</ol>
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Синтез: Шесть основных компетенций</h2></div></div></div><div class="first:-mt-sm mb-4 mt-5 overflow-hidden border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="relative rounded-xl group relative w-full overflow-hidden border-subtlest ring-subtlest divide-subtlest bg-raised dark:bg-offset" style="aspect-ratio: 1.14286 / 1;"><div class="rounded-inherit pointer-events-none absolute inset-0 z-[1] border border-[black]/5 dark:border-[white]/5"></div><div class="absolute right-4 top-4 z-10 opacity-0 transition-opacity duration-300 group-hover:opacity-100 !opacity-100"><span><button type="button" class="focus-visible:bg-subtle text-quiet  cursor-default bg-black/30 !text-white backdrop-blur-sm font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-xs h-6 aspect-square"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-3.5"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-dots"></use></svg></div></div></button></span></div><div class="size-full"><div class="bg-subtler group relative size-full overflow-hidden size-full [&amp;&gt;img]:max-h-[unset] !bg-underlay rounded-md"><img alt="PostgreSQL 18 DBA Competency Roadmap: Six Core Areas and Implementation Timeline" class="size-full object-cover transition-all ease-in-out max-h-[90vh] cursor-zoom-in hover:shadow-lg duration-200 " draggable="true" src="https://ppl-ai-code-interpreter-files.s3.amazonaws.com/web/direct-files/31a120310dd627e724fe345c012d64b6/12713324-633e-4209-855a-82ebca55ac2a/bf687c21.png?AWSAccessKeyId=ASIA2F3EMEYE7MOOT235&amp;Signature=XSwB9sTMmuq8S72tvHx6z3GdHfo%3D&amp;x-amz-security-token=IQoJb3JpZ2luX2VjELP%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLWVhc3QtMSJGMEQCIDl4O%2BHO6H88NEtQXbA%2F8r%2BE%2FI4kuqTFa6WWo8UF%2FGnYAiAXiv4qJSnYMU8%2Fu1lAe7e04K3a%2BVjL76umTKJttHVTeCrzBAh8EAEaDDY5OTc1MzMwOTcwNSIMj9CCP1VuFuo6NzJeKtAEnW4WL%2FEXhB7WfvnjYPplNs96rL0OewBfiD%2ByEoW62Z3QevocepAUY%2F3xZONAVuDoSnaOAghAREox3zhXXWlOeEHXatFkx3BWDF2PlSvv%2B39LQsIsDFzg1tQIR1V%2FMTnez2aGX5m0HoFckKewNX7rD%2B3CiXGxgAFx7wBWs4r%2BPK0PZbpKWIL0sC79eX0KMfgJPdcSX%2B7xk5TueAdDcCzDjJXarLOYcJbwCFzIPId0vMCyVIR08EzhqaZJ7A3dnY94YEUc4FmZSTt%2BZn8kU0%2Be7f8UZCg7wM4hBNgCG2zK3JoUQLvPmpYL8U7iXjoBT6IXypHyRfcoHiuJ2mLklFbIo%2FkO3whOc88Nl5O2JbmIF5Zw8B%2B18SzgYbMvds4d9ujvaqjmeLqivu3wkv5fbJ7AX7eagmurNlys9%2FGPjq6c2em846KQKy7ikYatuf%2FzTKkehHySAbVS6KfmOBCW5hzeWJikdU8uD%2BJdQMkhm7AE%2BNwx148F1BnN4gbpzUes0uBN5Lk4PyxrFNe1owiVuc5hfj%2BRSZpVG3Z7h%2FymsF%2FM8Ru4%2BdHNfX7IrouMYDa%2F9%2BPgODxCBsWjw%2FkqewOmGj6sYeVRelBjD7BI9rVhqQ4aWqkaplDHAeBo1uU3HZYWqkDS0F%2FMySDtEG5zWH3a8JCQoS7dNSqT%2F1T1cX184SL05pG4la1X7rryzmhDurX5I757ZQ%2B%2FSLA1PnoeYdcvzlhvKppa9ijms%2Fog8d0OW2c38JECObgvxOWgImfBSsZ8m3%2FepYW80FMjc4hZvXugwXBBTTD%2ByvrKBjqZAdPfjJd9jqAJuLN%2FqE2530f4QAcid0VI6MxwtPt9K8sS9nO73BpJ1ydZQzS1wYa69Bp6pzXO8TWKnZGjS9xIa5lnD%2FWkPV%2BxUPhWDtWnJjGWHSPFaG%2Bcy3T5u6vxr%2ByHVfoLBr6Dx9U4FkatNRi304IKfc50XG9bBisiLo18JBykOJ%2FCfYnQ0yuzR%2BoJErHLT6H33OBomLs2gA%3D%3D&amp;Expires=1767812973"></div></div></div><div class="pt-sm leading-tight"><span><span class="font-sans text-sm text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL 18 DBA Competency Roadmap: Six Core Areas and Implementation Timeline<span class="inline-block translate-y-px">&nbsp;<a rel="noopener" class="inline" target="_blank" href="https://ppl-ai-code-interpreter-files.s3.amazonaws.com/web/direct-files/31a120310dd627e724fe345c012d64b6/12713324-633e-4209-855a-82ebca55ac2a/bf687c21.png"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="-mt-px inline-block align-middle mr-xs"><img alt="" class="m-0 size-3 rounded-sm" src="https://www.google.com/s2/favicons?sz=32&amp;domain=perplexity.ai"></span><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">perplexity</span></span></span></a></span></span></span></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Область 1: Современные оптимизации (Фундамент PG18)</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostgreSQL 18 вводит <strong>революционные улучшения в основе системы</strong>:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">instaclustr</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Async I/O</strong>: 20-30% улучшение throughput на sequential scans</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Skip Scan</strong>: 7x ускорение на DISTINCT queries (автоматический)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Virtual Columns</strong>: GENERATED ALWAYS AS для tsvector/computed metrics без runtime overhead<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><a rel="noopener" class="inline" target="_blank" href="https://www.pgedge.com/blog/postgresql-performance-tuning"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgedge</span></span></span></a></span>​</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Statistics Preservation</strong>: 50-70x ускорение после pg_upgrade (самое большое улучшение!)<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">opensource-db</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Практическое применение:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Enable async I/O</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> SYSTEM </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SET</span><span> io_combine_limit </span><span class="token token operator">=</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">256</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Use virtual columns for FTS</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> documents </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ADD</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">COLUMN</span><span> ts_vector TSVECTOR 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>GENERATED ALWAYS </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">AS</span><span> </span><span class="token token punctuation">(</span><span>to_tsvector</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'english'</span><span class="token token punctuation">,</span><span> body</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span> STORED</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- After pg_upgrade PG18: NO ANALYZE NEEDED!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Statistics automatically preserved</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Область 2: Специализированные индексы (применить сразу)</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Выбор правильного индекса критичен для performance. Вы работали в HR-tech (recruitment) — это требует разных индексов для разных типов данных:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">speakdatascience</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p></div></div></div><div class="first:-mt-sm mb-4 mt-5 overflow-hidden border-subtlest ring-subtlest divide-subtlest bg-transparent"><div class="relative rounded-xl group relative w-full overflow-hidden border-subtlest ring-subtlest divide-subtlest bg-raised dark:bg-offset" style="aspect-ratio: 1.5 / 1;"><div class="rounded-inherit pointer-events-none absolute inset-0 z-[1] border border-[black]/5 dark:border-[white]/5"></div><div class="absolute right-4 top-4 z-10 opacity-0 transition-opacity duration-300 group-hover:opacity-100 !opacity-100"><span><button type="button" class="focus-visible:bg-subtle text-quiet  cursor-default bg-black/30 !text-white backdrop-blur-sm font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-xs h-6 aspect-square"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-3.5"><svg role="img" class="inline-flex fill-current" width="14" height="14"><use xlink:href="#pplx-icon-dots"></use></svg></div></div></button></span></div><div class="size-full"><div class="bg-subtler group relative size-full overflow-hidden size-full [&amp;&gt;img]:max-h-[unset] !bg-underlay rounded-md"><img alt="PostgreSQL 18 Feature Comparison Matrix: Implementation Priority and Performance Impact" class="size-full object-cover transition-all ease-in-out max-h-[90vh] cursor-zoom-in hover:shadow-lg duration-200 " draggable="true" src="https://ppl-ai-code-interpreter-files.s3.amazonaws.com/web/direct-files/31a120310dd627e724fe345c012d64b6/0e153eed-1679-4b1b-93ba-673e726bc94f/d855410c.png?AWSAccessKeyId=ASIA2F3EMEYE7MOOT235&amp;Signature=mzmcY7LmHZC32sP7aVDe3aDsXgs%3D&amp;x-amz-security-token=IQoJb3JpZ2luX2VjELP%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLWVhc3QtMSJGMEQCIDl4O%2BHO6H88NEtQXbA%2F8r%2BE%2FI4kuqTFa6WWo8UF%2FGnYAiAXiv4qJSnYMU8%2Fu1lAe7e04K3a%2BVjL76umTKJttHVTeCrzBAh8EAEaDDY5OTc1MzMwOTcwNSIMj9CCP1VuFuo6NzJeKtAEnW4WL%2FEXhB7WfvnjYPplNs96rL0OewBfiD%2ByEoW62Z3QevocepAUY%2F3xZONAVuDoSnaOAghAREox3zhXXWlOeEHXatFkx3BWDF2PlSvv%2B39LQsIsDFzg1tQIR1V%2FMTnez2aGX5m0HoFckKewNX7rD%2B3CiXGxgAFx7wBWs4r%2BPK0PZbpKWIL0sC79eX0KMfgJPdcSX%2B7xk5TueAdDcCzDjJXarLOYcJbwCFzIPId0vMCyVIR08EzhqaZJ7A3dnY94YEUc4FmZSTt%2BZn8kU0%2Be7f8UZCg7wM4hBNgCG2zK3JoUQLvPmpYL8U7iXjoBT6IXypHyRfcoHiuJ2mLklFbIo%2FkO3whOc88Nl5O2JbmIF5Zw8B%2B18SzgYbMvds4d9ujvaqjmeLqivu3wkv5fbJ7AX7eagmurNlys9%2FGPjq6c2em846KQKy7ikYatuf%2FzTKkehHySAbVS6KfmOBCW5hzeWJikdU8uD%2BJdQMkhm7AE%2BNwx148F1BnN4gbpzUes0uBN5Lk4PyxrFNe1owiVuc5hfj%2BRSZpVG3Z7h%2FymsF%2FM8Ru4%2BdHNfX7IrouMYDa%2F9%2BPgODxCBsWjw%2FkqewOmGj6sYeVRelBjD7BI9rVhqQ4aWqkaplDHAeBo1uU3HZYWqkDS0F%2FMySDtEG5zWH3a8JCQoS7dNSqT%2F1T1cX184SL05pG4la1X7rryzmhDurX5I757ZQ%2B%2FSLA1PnoeYdcvzlhvKppa9ijms%2Fog8d0OW2c38JECObgvxOWgImfBSsZ8m3%2FepYW80FMjc4hZvXugwXBBTTD%2ByvrKBjqZAdPfjJd9jqAJuLN%2FqE2530f4QAcid0VI6MxwtPt9K8sS9nO73BpJ1ydZQzS1wYa69Bp6pzXO8TWKnZGjS9xIa5lnD%2FWkPV%2BxUPhWDtWnJjGWHSPFaG%2Bcy3T5u6vxr%2ByHVfoLBr6Dx9U4FkatNRi304IKfc50XG9bBisiLo18JBykOJ%2FCfYnQ0yuzR%2BoJErHLT6H33OBomLs2gA%3D%3D&amp;Expires=1767812973"></div></div></div><div class="pt-sm leading-tight"><span><span class="font-sans text-sm text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">PostgreSQL 18 Feature Comparison Matrix: Implementation Priority and Performance Impact<span class="inline-block translate-y-px">&nbsp;<a rel="noopener" class="inline" target="_blank" href="https://ppl-ai-code-interpreter-files.s3.amazonaws.com/web/direct-files/31a120310dd627e724fe345c012d64b6/0e153eed-1679-4b1b-93ba-673e726bc94f/d855410c.png"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="-mt-px inline-block align-middle mr-xs"><img alt="" class="m-0 size-3 rounded-sm" src="https://www.google.com/s2/favicons?sz=32&amp;domain=perplexity.ai"></span><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">perplexity</span></span></span></a></span></span></span></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Матрица практического применения по вашим сценариям:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>Сценарий HR-tech                Index Type        Speed        Storage
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">──────────────────────────────────────────────────────────────────────
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Поиск кандидатов по навыкам     GIN (FTS)         50-100ms     5-10%
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Анализ резюме (semantic)        HNSW (pgvector)   &lt; 2ms        2-3%
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Локация соискателей             GIST (PostGIS)    230ms        2-5%
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">История событий (логирование)   BRIN              SLOW*        0.1%
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">* BRIN медлен но экономит память (важно для 100GB+ логов)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ключевой момент:</strong> Используйте разные индексы для разных колонок в ОДНОЙ таблице:</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Гибридный индекс для таблицы candidate_profiles</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> candidate_profiles </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    id BIGSERIAL</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    resume </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    resume_embedding vector</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">1536</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>      </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- pgvector для semantic search</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    location </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">GEOMETRY</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">POINT</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>     </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- PostGIS для location queries</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    ts_vector TSVECTOR</span><span class="token token punctuation">,</span><span>                 </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- FTS для keyword search</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    created_at </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TIMESTAMP</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Три разных индекса для трёх типов поиска</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> candidate_profiles </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> HNSW 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">(</span><span>resume_embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>           </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- AI similarity</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> candidate_profiles </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> GIST</span><span class="token token punctuation">(</span><span>location</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Nearest neighbor</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> candidate_profiles </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> GIN</span><span class="token token punctuation">(</span><span>ts_vector</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Full-text search</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Гибридный поиск: все три индекса работают вместе!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> id</span><span class="token token punctuation">,</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>       </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span> </span><span class="token token operator">-</span><span> </span><span class="token token punctuation">(</span><span>resume_embedding </span><span class="token token operator">&lt;=&gt;</span><span> query_embedding</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> semantic_score</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>       location </span><span class="token token operator">&lt;</span><span class="token token operator">-</span><span class="token token operator">&gt;</span><span> query_location </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> distance_score</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>       ts_rank</span><span class="token token punctuation">(</span><span>ts_vector</span><span class="token token punctuation">,</span><span> query_tsquery</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> fts_score
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> candidate_profiles
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> resume_embedding </span><span class="token token operator">&lt;=&gt;</span><span> query_embedding </span><span class="token token operator">&lt;</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.3</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token operator">AND</span><span> location </span><span class="token token operator">&lt;</span><span class="token token operator">-</span><span class="token token operator">&gt;</span><span> query_location </span><span class="token token operator">&lt;</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">50000</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 50km</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>  </span><span class="token token operator">AND</span><span> ts_vector @@ query_tsquery
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> </span><span class="token token punctuation">(</span><span>semantic_score </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.5</span><span> </span><span class="token token operator">+</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span class="token token operator">-</span><span>distance_score</span><span class="token token operator">/</span><span>max_dist</span><span class="token token punctuation">)</span><span class="token token operator">*</span><span class="token token" style="color: rgb(222, 147, 95);">0.25</span><span> </span><span class="token token operator">+</span><span> fts_score</span><span class="token token operator">*</span><span class="token token" style="color: rgb(222, 147, 95);">0.25</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">20</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Область 3: High Availability (критично для production)</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Ваш опыт в систем-архитектуре требует понимания replication stack. Исследование показало три уровня:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">instaclustr</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>Level                   Downtime    Complexity    Best For
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">─────────────────────────────────────────────────────────
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Streaming replication   5-10s       MEDIUM        HA standby (same version)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">Logical replication     &lt; 1 min     COMPLEX       Version upgrades
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">pgcopydb + logical      &lt; 1 min     VERY COMPLEX  TB-scale (10TB+)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Практический выбор:</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Streaming + Patroni</strong>: Рекомендуется для большинства (автоматический failover)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Logical replication</strong>: Когда нужна zero-downtime upgrade между версиями</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>pgcopydb</strong>: Только для TB-scale миграций (вашего use case из первого исследования)<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgcopydb.readthedocs</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Impact:</strong> Правильная HA архитектура может уменьшить downtime с часов на секунды.</p>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Область 4: Мониторинг и ежедневные операции (инструменты администратора)</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostgreSQL 18 добавляет <strong>pg_stat_io</strong> — революционный инструмент для понимания bottleneck'ов:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pganalyze</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+2</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Утренний чек (5 минут):</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">100.0</span><span> </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">sum</span><span class="token token punctuation">(</span><span>heap_blks_hit</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">/</span><span> </span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(197, 200, 198);">sum</span><span class="token token punctuation">(</span><span>heap_blks_hit</span><span class="token token punctuation">)</span><span> </span><span class="token token operator">+</span><span> </span><span class="token token" style="color: rgb(197, 200, 198);">sum</span><span class="token token punctuation">(</span><span>heap_blks_read</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_stat_io</span><span class="token token punctuation">;</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Should be &gt; 95%</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Еженедельный анализ:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>pgbadger </span><span class="token token operator">/</span><span>var</span><span class="token token operator">/</span><span>log</span><span class="token token operator">/</span><span>postgresql</span><span class="token token operator">/</span><span class="token token operator">*</span><span class="token token punctuation">.</span><span>log </span><span class="token token operator">&gt;</span><span> report</span><span class="token token punctuation">.</span><span>html
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Identify slow queries, autovacuum activity, locks</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Месячное планирование:</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> schemaname</span><span class="token token punctuation">,</span><span> tablename</span><span class="token token punctuation">,</span><span> pg_size_pretty</span><span class="token token punctuation">(</span><span>pg_total_relation_size</span><span class="token token punctuation">(</span><span class="token token punctuation">.</span><span class="token token punctuation">.</span><span class="token token punctuation">.</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span> 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> pg_tables </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> size </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">DESC</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">20</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Plan for capacity (10% growth/month? Plan expansion in 8-9 months)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Инструменты по приоритету:</strong></p>
<ol class="marker:text-quiet list-decimal">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>pg_stat_io</strong>: Обязателен (PG18) — точный cache hit ratio</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>pgBadger</strong>: Еженедельный анализ slow queries</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>pg_stat_statements</strong>: Профилирование query performance</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Prometheus + Grafana</strong>: Long-term trending (историческая аналитика)</p>
</li>
</ol>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Область 5: Специализированные расширения (в зависимости от стека)</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Ваш интерес к AI/ML (из истории) требует понимания трёх ключевых расширений:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">pgedge</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>1. TimescaleDB (для event/metrics, HR-tech analytics)</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Events таблица: 1M+ записей в день</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> events </span><span class="token token punctuation">(</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">time</span><span> TIMESTAMPTZ</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    user_id </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    event_type </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TEXT</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">data</span><span> JSONB
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> create_hypertable</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'events'</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">'time'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Result: Automatic partitioning by time, 100x faster aggregates</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>2. pgvector (для resume semantic search, job recommendations)</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Resume embeddings (OpenAI API или similar)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> candidate_profiles </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ADD</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">COLUMN</span><span> resume_embedding vector</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(222, 147, 95);">1536</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> candidate_profiles </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> hnsw 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token punctuation">(</span><span>resume_embedding vector_cosine_ops</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Query: Find semantically similar resumes &lt; 2ms</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>3. PostGIS (для location-based recruiting, geo-analysis)</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Candidate locations with geographic queries</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> candidate_profiles </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ADD</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">COLUMN</span><span> location </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">GEOMETRY</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">POINT</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">4326</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CREATE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">INDEX</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ON</span><span> candidate_profiles </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">USING</span><span> GIST</span><span class="token token punctuation">(</span><span>location</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Find candidates within 50km: &lt; 100ms on 1M candidates</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>4. pg_textsearch (для resume keyword search, job matching)</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Full-text search with ranking</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ALTER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">TABLE</span><span> job_postings </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ADD</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">COLUMN</span><span> ts_vector TSVECTOR 
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>GENERATED ALWAYS </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">AS</span><span> </span><span class="token token punctuation">(</span><span>to_tsvector</span><span class="token token punctuation">(</span><span class="token token" style="color: rgb(181, 189, 104);">'english'</span><span class="token token punctuation">,</span><span> title </span><span class="token token operator">||</span><span> </span><span class="token token" style="color: rgb(181, 189, 104);">' '</span><span> </span><span class="token token operator">||</span><span> description</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span> STORED</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Query: Find jobs matching "machine learning" with ranking</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Stack integration для HR-tech:</strong></p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">sql</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Single query finding 10 best matching jobs for a candidate</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">SELECT</span><span> job_id</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Semantic match (resume vs job description)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(222, 147, 95);">1</span><span> </span><span class="token token operator">-</span><span> </span><span class="token token punctuation">(</span><span>resume_embedding </span><span class="token token operator">&lt;=&gt;</span><span> job_embedding</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> semantic_score</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Location match (candidate vs job)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">CASE</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHEN</span><span> ST_DWithin</span><span class="token token punctuation">(</span><span>candidate_location::geography</span><span class="token token punctuation">,</span><span> job_location::geography</span><span class="token token punctuation">,</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">50000</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>         </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">THEN</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.5</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ELSE</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">END</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> location_score</span><span class="token token punctuation">,</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- Keyword match (skills match)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>    ts_rank</span><span class="token token punctuation">(</span><span>job_ts_vector</span><span class="token token punctuation">,</span><span> candidate_skills_tsquery</span><span class="token token punctuation">)</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">as</span><span> keyword_score
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">FROM</span><span> jobs
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">WHERE</span><span> resume_embedding </span><span class="token token operator">&lt;=&gt;</span><span> job_embedding </span><span class="token token operator">&lt;</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.4</span><span>  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;">-- 60%+ semantic match</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">ORDER</span><span> </span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">BY</span><span> </span><span class="token token punctuation">(</span><span>semantic_score </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.5</span><span> </span><span class="token token operator">+</span><span> location_score </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.2</span><span> </span><span class="token token operator">+</span><span> keyword_score </span><span class="token token operator">*</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">0.3</span><span class="token token punctuation">)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(178, 148, 187); font-weight: bolder;">LIMIT</span><span> </span><span class="token token" style="color: rgb(222, 147, 95);">10</span><span class="token token punctuation">;</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Область 6: Критические операции (навыки для экстренных ситуаций)</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Ваш опыт в миграции и scaling требует освоения трёх критических операций:</p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>1. Major Version Upgrade (pg_upgrade)</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostgreSQL 18 <strong>революционизирует</strong> этот процесс:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">instaclustr</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+4</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Старый способ (PG17 и ранее): 4-6 часов downtime</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>pg_upgrade </span><span class="token token punctuation">..</span><span>.  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># 5 мин</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># После upgrade VACUUM ANALYZE # 4-6 часов (пересчёт статистики!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Результат: База медленная на 4+ часа</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Новый способ (PG18): 5-15 минут downtime</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>pg_upgrade --jobs </span><span class="token token" style="color: rgb(222, 147, 95);">8</span><span> --swap  </span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># 10 минут (параллельно!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># После upgrade: статистика СОХРАНЕНА! (никакого ANALYZE)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Результат: База быстрая сразу!</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span></span><span class="token token" style="color: rgb(150, 152, 150); font-family: inherit; font-style: italic;"># Impact: 24x улучшение (24-48 часов → 5-15 минут!)</span><span>
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>2. TB-Scale Migration (pgcopydb + logical replication)</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Ваше первое исследование показало:<span class="citation-nbsp"></span><span class="citation inline" rel="nofollow noopener"><span class="relative -mt-px select-none whitespace-nowrap -top-px font-sans text-base text-foreground selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"><span class="text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums py-[0.1875rem] leading-snug px-[0.3rem] [@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white border-subtlest ring-subtlest divide-subtlest bg-subtle"><span class="relative -mt-px inline-block align-middle max-w-[25ch] overflow-hidden">neon</span><span class="ml-xs -mt-px mr-px inline-block align-middle"><span class="opacity-50">+3</span></span></span></span></span>​</p>
<div class="w-full md:max-w-[90vw]"><pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end sm:sticky sm:top-xs"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span style="font-size: inherit; font-family: inherit; background: transparent; color: rgb(197, 200, 198); border-radius: 3px; display: flex; line-height: 1.42857; overflow-x: auto; white-space: pre; --scrollbar-thumb: oklch(var(--foreground-color) / 0.15); --scrollbar-track: transparent; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);"><code style="white-space: pre-wrap; font-size: inherit; font-family: inherit; line-height: 1.66667; padding: 8px;"><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"><span>Duration: 1TB database
</span></span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ pgcopydb clone: 6-12 hours (3-5x faster than pg_dump!)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Logical replication: Captures changes during copy
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">├─ Switchover: &lt; 1 minute downtime (just final sync)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;">└─ Total downtime: &lt; 1 minute (vs 12-24 hours with pg_dump!)
</span><span style="opacity: 1; font-size: inherit; line-height: 1.42857; color: rgb(197, 200, 198); background-color: transparent; flex-shrink: 0; padding: 8px; text-align: right; user-select: none;"></span></code></span></div></div></div></pre></div>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>3. Zero-Downtime Operations</strong></p>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Три техники:</p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>pgroll</strong>: Expand-contract orchestration (автоматизация)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Logical replication</strong>: Manual control (гибкость)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Feature flags</strong>: Application-level (экономит операции)</p>
</li>
</ul>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Практическая дорожная карта для вас</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Фаза 1 (Неделя 1-2): Фундамент</strong></p>
<ul class="contains-task-list">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Установить PostgreSQL 18</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Включить pg_stat_io, настроить параметры (shared_buffers, etc.)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Настроить pgBadger для анализа логов</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Понять текущие slow queries</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Фаза 2 (Неделя 3-4): Индексирование</strong></p>
<ul class="contains-task-list">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Добавить GIN индексы для FTS (если есть текстовый поиск)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Добавить BRIN для append-only таблиц (логирование)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Протестировать HNSW для vector search (если используете embeddings)</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Фаза 3 (Неделя 5-6): High Availability</strong></p>
<ul class="contains-task-list">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Настроить streaming replication на отдельном сервере</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Протестировать failover</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Подготовить logical replication для версионного upgrade</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Фаза 4 (Неделя 7-8): Специализированные расширения</strong></p>
<ul class="contains-task-list">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> TimescaleDB (если нужна оптимизация metrics/events)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> pgvector (если используете AI embeddings)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> PostGIS (если есть location-based queries)</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Фаза 5 (Неделя 9-10): Мониторинг и Аналитика</strong></p>
<ul class="contains-task-list">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Настроить Prometheus + Grafana</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Автоматизировать pgBadger отчёты</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Настроить alerting для критических метрик</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Фаза 6 (Неделя 11-12): Критические операции</strong></p>
<ul class="contains-task-list">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Протестировать pg_upgrade на тестовой базе</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Протестировать pgcopydb на smaller dataset</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0 task-list-item">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><input disabled="" type="checkbox"> Подготовить playbook для failover</p>
</li>
</ul>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Ключевые takeaway'и</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><ol class="marker:text-quiet list-decimal">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>PostgreSQL 18 — это качественный скачок</strong>, особенно для:</p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Statistics preservation (50-70x faster post-upgrade)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">pg_stat_io (наконец, правильный cache hit ratio!)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Insert-specific autovacuum thresholds (perfect для append-only)</p>
</li>
</ul>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Специализированные индексы == performance</strong>:</p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">GIN для FTS/JSON: 100x faster</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">HNSW для vectors: 1000x faster</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">GIST для spatial: 100x faster</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Выбираете ОДИН индекс? Вероятно, неправильно.</p>
</li>
</ul>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>High Availability — это не luxury</strong>:</p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Streaming replication: &lt; $0 (open source)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Failover &lt; 30 seconds: Patroni + etcd</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Zero-downtime: pgcopydb или logical replication</p>
</li>
</ul>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Мониторинг — это differentiator</strong>:</p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">pg_stat_io (PG18): Наконец-то видна правда</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">pgBadger: Еженедельный скрининг</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Prometheus: Long-term health tracking</p>
</li>
</ul>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Ваш стек (AI/ML + recruiting)</strong> идеально совпадает с современным PostgreSQL:</p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">pgvector для semantic matching</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">FTS для keyword search</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">PostGIS для location-based recruiting</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">TimescaleDB для event analytics</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Все в одной базе данных! (vs Elasticsearch + Pinecone + PostGIS отдельно)</p>
</li>
</ul>
</li>
</ol>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<h2 class="mb-2 mt-4 font-display font-semimedium text-base first:mt-0">Документация и ресурсы</h2></div></div></div><div class="my-2 first:mt-0 [&amp;:has([data-inline-type=image])+&amp;:has([data-inline-type=image])_[data-inline-type=image]]:hidden [&amp;:has(table)_[data-inline-type=image]]:hidden [&amp;_h1:first-of-type]:mt-8 [&amp;_h2:first-of-type]:mt-6"><div class="relative"><div class="prose dark:prose-invert inline leading-relaxed break-words min-w-0 [word-break:break-word] prose-strong:font-medium [&amp;_&gt;*:first-child]:mt-0"><p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Я создал для вас <strong>comprehensive guide</strong> (файл: postgresql_18_comprehensive_guide.md) с:</p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">529 строк практического руководства</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Архитектурные decision matrices</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Чек-листы для greenfield setup и optimization</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Baseline performance expectations</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">References к всем источникам</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Скачайте и используйте как operational playbook!</strong></p>
<hr class="bg-subtle h-px border-0" node="[object Object]">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Итоговые цифры (impact PostgreSQL 18):</strong></p>
<ul class="marker:text-quiet list-disc">
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Upgrade downtime: 4-6h → 5-15min (50-70x)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Major migration: 24+ hours → &lt; 1 minute (1400x)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">TB-scale copy: pg_dump 24h → pgcopydb 6-12h (2-4x)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">FTS queries: 1000ms → 50-100ms (10-20x)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Vector search: 1000ms → 1-2ms (500-1000x)</p>
</li>
<li class="py-0 my-0 prose-p:pt-0 prose-p:mb-2 prose-p:my-0 [&amp;&gt;p]:pt-0 [&amp;&gt;p]:mb-2 [&amp;&gt;p]:my-0">
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2">Cache visibility: Unreliable → Accurate (pg_stat_io)</p>
</li>
</ul>
<p class="my-2 [&amp;+p]:mt-4 [&amp;_strong:has(+br)]:inline-block [&amp;_strong:has(+br)]:pb-2"><strong>Это не incremental improvements — это transformation.</strong></p></div></div></div></div></div></div><div class="flex items-center justify-between"><div class="-ml-sm gap-xs flex flex-shrink-0 items-center"><button aria-label="Share" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-share-3"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Copy" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button data-state="closed" aria-label="Rewrite" aria-expanded="false" aria-haspopup="dialog" aria-controls="radix-:r7je:" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 hover:text-foreground hover:bg-subtle"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-repeat"></use></svg></button><button type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full hover:text-foreground hover:bg-subtle px-3 relative"><span style="opacity: 1; transition: opacity 150ms 150ms;" class="text-box-trim-both"><div class="gap-x-sm flex flex-row"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute opacity-0"><defs><clipPath id="clip-path-default"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.0635 0.704214C9.13824 0.253115 8.09868 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C8.09868 14 9.13824 13.7469 10.0635 13.2958C8.19825 11.8312 7 9.55552 7 7C7 4.44448 8.19825 2.16882 10.0635 0.704214Z" fill="#D9D9D9"></path></clipPath></defs></svg><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute opacity-0"><defs><clipPath id="clip-path-small"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.57242 0.57787C7.7928 0.20734 6.92062 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12C6.92062 12 7.7928 11.7927 8.57242 11.4221C7.00228 10.1385 6 8.18628 6 6C6 3.81372 7.00228 1.86154 8.57242 0.57787Z" fill="#D9D9D9"></path></clipPath></defs></svg><div class="gap-xs relative flex shrink-0 items-center"><div class="ml-xs flex"><div style="clip-path: url(&quot;#clip-path-default&quot;);" class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="instaclustr.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=instaclustr.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div><div style="clip-path: url(&quot;#clip-path-default&quot;);" class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="pgedge.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=pgedge.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div><div class="relative shrink-0 overflow-hidden rounded-full bg-subtle relative z-0 inline-flex shrink-0 -ml-[5px]"><div class="rounded-inherit absolute inset-0 bg-white"></div><img class="relative block" alt="speakdatascience.com favicon" width="14" height="14" style="width: 14px; height: 14px;" src="https://www.google.com/s2/favicons?sz=128&amp;domain=speakdatascience.com"><div class="rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"></div></div></div></div><div class="truncate font-sans text-xs font-medium text-quiet  selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super">19</div></div></span><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></button></div><div class="gap-x-xs flex flex-shrink-0 items-center"><span><button aria-label="Research" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-cpu"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></span><span><div class="gap-xs flex items-center border-subtlest ring-subtlest divide-subtlest bg-transparent"><button aria-label="Helpful" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-thumb-up"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><button aria-label="Not helpful" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 aspect-[9/8] hover:text-foreground hover:bg-subtle"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-thumb-down"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></div></span><div><button data-state="closed" aria-label="More actions" aria-expanded="false" aria-haspopup="dialog" aria-controls="radix-:r7jj:" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex rounded-full aspect-square p-0 hover:text-foreground hover:bg-subtle"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-dots"></use></svg></button></div></div></div></div></div></div></div></div><div class="gap-y-lg flex flex-col first:mt-0"></div></div></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-shopping" hidden="" id="radix-:r4l:-content-shopping" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-hotels" hidden="" id="radix-:r4l:-content-hotels" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-places" hidden="" id="radix-:r4l:-content-places" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-jobs" hidden="" id="radix-:r4l:-content-jobs" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-videos" hidden="" id="radix-:r4l:-content-videos" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-images" hidden="" id="radix-:r4l:-content-images" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-sources" hidden="" id="radix-:r4l:-content-sources" tabindex="0" class="focus:outline-none"></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:r4l:-trigger-assets" hidden="" id="radix-:r4l:-content-assets" tabindex="0" class="focus:outline-none"></div></div></div></div></div></div></div></div></div></div><div class="erp-sidecar:fixed erp-sidecar:w-full bottom-safeAreaInsetBottom p-md pointer-events-none z-10 absolute border-subtlest ring-subtlest divide-subtlest bg-transparent" style="width: calc(100% - 0px);"><div class="max-w-threadContentWidth mx-auto"><div class="pointer-events-auto"><div class="pointer-events-none h-0"><div class="flex justify-center" style="opacity: 1; transform: translateY(-100%);"><button aria-label="Scroll to latest" type="button" class="border border-subtler text-quiet md:hover:border-subtle md:hover:text-quiet hover:bg-subtler bg-base !bg-base shadow-subtle mb-2 pointer-events-auto font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-arrow-down"></use></svg></div></div></button></div></div><div><div class="w-full"><div class="relative"><div class="bg-base shadow-[0_1px_8px_2px_oklch(var(--foreground-color)/0.1),0_36px_16px_36px_oklch(var(--background-base-color))] dark:shadow-[0_4px_12px_rgba(0,0,0,0.12),0_32px_16px_36px_oklch(var(--dark-background-base-color))] relative rounded-2xl border-subtlest ring-subtlest divide-subtlest bg-subtler"><div class=""><span class="grow block"><div class="relative rounded-2xl"><div class="bg-raised w-full outline-none flex items-center border rounded-2xl dark:bg-offset duration-75 transition-all border-subtler shadow-sm dark:shadow-md shadow-super/10 dark:shadow-black/10 px-0 pt-3 pb-3 gap-y-md grid items-center"><div class="px-3.5 grid-rows-1fr-auto grid grid-cols-3"><div class="overflow-hidden relative flex h-full w-full col-start-1 col-end-4 pb-3"><div class="w-full" style="min-height: 1.5em;"><div class="overflow-auto max-h-[45vh] lg:max-h-[40vh] sm:max-h-[25vh] outline-none font-sans resize-none caret-super selection:bg-super/30 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super text-foreground bg-transparent placeholder-quieter placeholder:select-none scrollbar-subtle size-full" contenteditable="true" id="ask-input" role="textbox" spellcheck="true" aria-placeholder="Ask a follow-up" style="user-select: text; white-space: pre-wrap; word-break: break-word;" data-lexical-editor="true"></div><div aria-hidden="true"><div class="absolute inset-0 pointer-events-none select-none text-quieter">Ask a follow-up</div></div></div></div><div class="gap-sm flex col-start-1 row-start-2 -ml-two"><div class="gap-xs flex items-center"><span><button type="button" class="border border-super/20 bg-super/10 hover:bg-super/20 hover:border-super/30 text-super font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-lg cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 px-2.5"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" color="currentColor" class="tabler-icon shrink-0" fill="currentColor" fill-rule="evenodd"><path d="M8.175 13.976a.876.876 0 0 1 1.172-.04l.065.061.582.59c.196.194.395.388.596.576l.39.358c1.942 1.753 3.844 2.937 5.357 3.477.81.29 1.444.369 1.884.31.404-.055.61-.216.731-.446.135-.256.209-.678.116-1.31-.08-.546-.275-1.191-.59-1.91l-.141-.313-.034-.083a.875.875 0 0 1 1.575-.741l.042.079.161.353c.36.823.61 1.623.719 2.362.122.836.071 1.675-.3 2.38-.431.818-1.186 1.247-2.044 1.363-.823.111-1.756-.056-2.707-.396-1.912-.681-4.17-2.154-6.357-4.207a30.378 30.378 0 0 1-.63-.61l-.608-.615-.058-.068a.875.875 0 0 1 .079-1.17Zm.624-5.822a.876.876 0 0 1 1.216 1.258c-.396.383-.788.775-1.165 1.178-1.95 2.077-3.26 4.133-3.835 5.747-.29.81-.37 1.444-.31 1.884.055.404.215.61.444.731l.104.048c.261.103.654.149 1.207.068.623-.09 1.378-.333 2.224-.731a.875.875 0 0 1 .745 1.583c-.948.446-1.871.756-2.716.88-.784.114-1.57.078-2.246-.234l-.134-.066c-.817-.431-1.246-1.186-1.362-2.044-.112-.823.056-1.756.395-2.707.64-1.792 1.973-3.889 3.83-5.945l.377-.411c.402-.43.816-.843 1.226-1.239Zm8.5-4.954c.832-.122 1.67-.073 2.372.302h-.001c.814.432 1.243 1.185 1.36 2.042.11.823-.057 1.756-.396 2.707-.682 1.911-2.154 4.17-4.207 6.356h-.001c-.403.429-.818.846-1.236 1.236l-.068.057a.875.875 0 0 1-1.127-1.336l.582-.562c.193-.193.385-.39.573-.592l.359-.39c1.752-1.942 2.937-3.844 3.476-5.357.29-.811.37-1.444.31-1.884-.055-.404-.216-.61-.446-.731l-.003-.002c-.248-.132-.663-.207-1.293-.114-.62.09-1.37.332-2.208.73l-.083.034a.876.876 0 0 1-.667-1.615l.351-.161c.819-.36 1.616-.612 2.353-.72Zm-5.292 7.507a1.3 1.3 0 1 1 0 2.6 1.3 1.3 0 0 1 0-2.6ZM5.544 2.971c.823-.112 1.756.056 2.707.395 1.911.682 4.17 2.154 6.356 4.207.214.201.426.406.632.612l.604.625.057.068a.875.875 0 0 1-1.271 1.19l-.065-.063-.562-.582c-.193-.193-.39-.385-.592-.573-2.077-1.95-4.133-3.26-5.747-3.835-.811-.29-1.444-.37-1.884-.31-.404.055-.61.215-.731.444l-.002.004c-.132.248-.207.664-.114 1.294.08.543.275 1.184.588 1.898l.142.31.034.083a.875.875 0 0 1-1.572.746l-.043-.079-.161-.352c-.36-.819-.612-1.615-.72-2.352-.122-.832-.073-1.67.302-2.372.431-.814 1.185-1.242 2.042-1.358Z"></path></svg></div><div class="relative truncate text-center px-1 leading-loose -mb-px">​</div><svg role="img" class="inline-flex fill-current tabler-icon shrink-0 -mx-xs -mb-two opacity-50 -ml-sm" width="14" height="14"><use xlink:href="#pplx-icon-chevron-down"></use></svg></div></button></span></div></div><div class="flex items-center justify-self-end col-start-3 row-start-2"><div class="flex items-center"><button aria-label="Attach files" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex aspect-[9/8] hover:text-foreground hover:bg-subtle rounded-lg"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-paperclip"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button><input multiple="" data-testid="file-upload-input" accept=".bash,.bat,.c,.coffee,.conf,.config,.cpp,.cs,.css,.csv,.cxx,.dart,.diff,.doc,.docx,.fish,.go,.h,.hpp,.htm,.html,.in,.ini,.ipynb,.java,.js,.json,.jsx,.ksh,.kt,.kts,.latex,.less,.log,.lua,.m,.markdown,.md,.pdf,.php,.pl,.pm,.pptx,.py,.r,.R,.rb,.rmd,.rs,.scala,.sh,.sql,.swift,.t,.tex,.text,.toml,.ts,.tsx,.txt,.xlsx,.xml,.yaml,.yml,.zsh,.jpeg,.jpg,.jpe,.jp2,.png,.gif,.bmp,.tiff,.tif,.svg,.webp,.ico,.avif,.heic,.heif,.mp3,.wav,.aiff,.ogg,.flac,.mp4,.mpeg,.mov,.avi,.flv,.mpg,.webm,.wmv,.3gp" style="display: none;" type="file"></div><div class="relative"><button aria-label="Dictation" data-state="closed" type="button" class="reset interactable select-none [-webkit-user-drag:none] outline-none font-semimedium duration-300 ease-out font-sans text-center items-center justify-center leading-loose whitespace-nowrap data-[state=open]:text-foreground data-[state=open]:bg-subtle text-quiet h-8 text-sm cursor-pointer origin-center active:scale-[0.97] active:duration-150 active:ease-outExpo inline-flex aspect-[9/8] hover:text-foreground hover:bg-subtle rounded-lg"><div class="relative flex items-center justify-center"><div style="opacity: 1; transition: opacity 150ms 150ms;" class="inline-flex"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-microphone"></use></svg></div><div style="opacity: 0; transition: opacity 150ms;" class="absolute inset-0 flex items-center justify-center"></div></div></button></div><div class="ml-2"><button aria-label="Submit" type="button" disabled="" class="bg-subtle text-quiet !duration-100 font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-lg cursor-default opacity-50 whitespace-nowrap inline-flex text-sm h-8 aspect-[9/8]"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-arrow-up"></use></svg></div></div></button></div></div></div></div><div data-type="portal"></div></div></span></div></div></div></div></div></div></div></div></div></div></div></div><div class="rounded-inherit pointer-events-none absolute inset-0 z-20 hidden md:dark:block md:!border-y-0 md:!border-r-0 border-subtlest ring-subtlest divide-subtlest bg-transparent"></div></div></div></div></div></div><div class="bottom-md right-md m-sm fixed hidden lg:block"><div class="gap-sm flex items-center"><div class="group relative"><span><button aria-label="Language" type="button" class="border border-subtler text-quiet md:hover:border-subtle md:hover:text-quiet hover:bg-subtler bg-base shadow-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r7jt:" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-language"></use></svg></div></div></button></span></div><span><button aria-label="Help menu" type="button" class="border border-subtler text-quiet md:hover:border-subtle md:hover:text-quiet hover:bg-subtler bg-base shadow-subtle  font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-question-mark"></use></svg></div></div></button></span></div></div></main><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ba3be873c68b90f',t:'MTc2Nzc5MTkzOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: medium; visibility: hidden;"></iframe><script defer="" src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon="{&quot;rayId&quot;:&quot;9ba3be873c68b90f&quot;,&quot;serverTiming&quot;:{&quot;name&quot;:{&quot;cfExtPri&quot;:true,&quot;cfEdge&quot;:true,&quot;cfOrigin&quot;:true,&quot;cfL4&quot;:true,&quot;cfSpeedBrain&quot;:true,&quot;cfCacheStatus&quot;:true}},&quot;version&quot;:&quot;2025.9.1&quot;,&quot;token&quot;:&quot;92730c73a9e747fbb6a25e1d6657122d&quot;}" crossorigin="anonymous"></script>
<div id="pplx-icon-sprites" style="display: none;"><svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
<symbol id="pplx-icon-abacus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 3v18 M19 21v-18 M5 7h14 M5 15h14 M8 13v4 M11 13v4 M16 13v4 M14 5v4 M11 5v4 M8 5v4 M3 21h18"></path></symbol>
<symbol id="pplx-icon-access-point" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12l0 .01 M14.828 9.172a4 4 0 0 1 0 5.656 M17.657 6.343a8 8 0 0 1 0 11.314 M9.168 14.828a4 4 0 0 1 0 -5.656 M6.337 17.657a8 8 0 0 1 0 -11.314"></path></symbol>
<symbol id="pplx-icon-activity" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12h4l3 8l4 -16l3 8h4"></path></symbol>
<symbol id="pplx-icon-address-book" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6v12a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2z M10 16h6 M13 11m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M4 8h3 M4 12h3 M4 16h3"></path></symbol>
<symbol id="pplx-icon-address-book-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 4h10a2 2 0 0 1 2 2v10m-.57 3.399c-.363 .37 -.87 .601 -1.43 .601h-10a2 2 0 0 1 -2 -2v-12 M10 16h6 M11 11a2 2 0 0 0 2 2m2 -2a2 2 0 0 0 -2 -2 M4 8h3 M4 12h3 M4 16h3 M3 3l18 18"></path></symbol>
<symbol id="pplx-icon-adjustments" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 10a2 2 0 1 0 4 0a2 2 0 0 0 -4 0 M6 4v4 M6 12v8 M10 16a2 2 0 1 0 4 0a2 2 0 0 0 -4 0 M12 4v10 M12 18v2 M16 7a2 2 0 1 0 4 0a2 2 0 0 0 -4 0 M18 4v1 M18 9v11"></path></symbol>
<symbol id="pplx-icon-adjustments-horizontal" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M4 6l8 0 M16 6l4 0 M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M4 12l2 0 M10 12l10 0 M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M4 18l11 0 M19 18l1 0"></path></symbol>
<symbol id="pplx-icon-affiliate" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5.931 6.936l1.275 4.249m5.607 5.609l4.251 1.275 M11.683 12.317l5.759 -5.759 M5.5 5.5m-1.5 0a1.5 1.5 0 1 0 3 0a1.5 1.5 0 1 0 -3 0 M18.5 5.5m-1.5 0a1.5 1.5 0 1 0 3 0a1.5 1.5 0 1 0 -3 0 M18.5 18.5m-1.5 0a1.5 1.5 0 1 0 3 0a1.5 1.5 0 1 0 -3 0 M8.5 15.5m-4.5 0a4.5 4.5 0 1 0 9 0a4.5 4.5 0 1 0 -9 0"></path></symbol>
<symbol id="pplx-icon-alert-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0 M12 8v4 M12 16h.01"></path></symbol>
<symbol id="pplx-icon-alert-triangle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 9v4 M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z M12 16h.01"></path></symbol>
<symbol id="pplx-icon-alert-triangle-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M12 1.67c.955 0 1.845 .467 2.39 1.247l.105 .16l8.114 13.548a2.914 2.914 0 0 1 -2.307 4.363l-.195 .008h-16.225a2.914 2.914 0 0 1 -2.582 -4.2l.099 -.185l8.11 -13.538a2.914 2.914 0 0 1 2.491 -1.403zm.01 13.33l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007zm-.01 -7a1 1 0 0 0 -.993 .883l-.007 .117v4l.007 .117a1 1 0 0 0 1.986 0l.007 -.117v-4l-.007 -.117a1 1 0 0 0 -.993 -.883z"></path></symbol>
<symbol id="pplx-icon-alien" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M11 17a2.5 2.5 0 0 0 2 0 M12 3c-4.664 0 -7.396 2.331 -7.862 5.595a11.816 11.816 0 0 0 2 8.592a10.777 10.777 0 0 0 3.199 3.064c1.666 1 3.664 1 5.33 0a10.777 10.777 0 0 0 3.199 -3.064a11.89 11.89 0 0 0 2 -8.592c-.466 -3.265 -3.198 -5.595 -7.862 -5.595z M8 11l2 2 M16 11l-2 2"></path></symbol>
<symbol id="pplx-icon-align-justified" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6l16 0 M4 12l16 0 M4 18l12 0"></path></symbol>
<symbol id="pplx-icon-align-left" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6l16 0 M4 12l10 0 M4 18l14 0"></path></symbol>
<symbol id="pplx-icon-apps" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z M14 7l6 0 M17 4l0 6"></path></symbol>
<symbol id="pplx-icon-arrow-bar-left" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12l10 0 M4 12l4 4 M4 12l4 -4 M20 4l0 16"></path></symbol>
<symbol id="pplx-icon-arrow-bar-right" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M20 12l-10 0 M20 12l-4 4 M20 12l-4 -4 M4 4l0 16"></path></symbol>
<symbol id="pplx-icon-arrow-bar-to-down" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 20l16 0 M12 14l0 -10 M12 14l4 -4 M12 14l-4 -4"></path></symbol>
<symbol id="pplx-icon-arrow-down" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5l0 14 M18 13l-6 6 M6 13l6 6"></path></symbol>
<symbol id="pplx-icon-arrow-left" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12l14 0 M5 12l6 6 M5 12l6 -6"></path></symbol>
<symbol id="pplx-icon-arrow-right" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12l14 0 M13 18l6 -6 M13 6l6 6"></path></symbol>
<symbol id="pplx-icon-arrow-up" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5l0 14 M18 11l-6 -6 M6 11l6 -6"></path></symbol>
<symbol id="pplx-icon-arrow-up-right" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M17 7l-10 10 M8 7l9 0l0 9"></path></symbol>
<symbol id="pplx-icon-arrows-diagonal" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4l4 0l0 4 M14 10l6 -6 M8 20l-4 0l0 -4 M4 20l6 -6"></path></symbol>
<symbol id="pplx-icon-arrows-shuffle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M18 4l3 3l-3 3 M18 20l3 -3l-3 -3 M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5 M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3"></path></symbol>
<symbol id="pplx-icon-arrows-vertical" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 7l4 -4l4 4 M8 17l4 4l4 -4 M12 3l0 18"></path></symbol>
<symbol id="pplx-icon-article" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z M7 8h10 M7 12h10 M7 16h10"></path></symbol>
<symbol id="pplx-icon-article-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 4h11a2 2 0 0 1 2 2v11m-1.172 2.821a1.993 1.993 0 0 1 -.828 .179h-14a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 1.156 -1.814 M7 8h1m4 0h5 M7 12h5m4 0h1 M7 16h9 M3 3l18 18"></path></symbol>
<symbol id="pplx-icon-atom" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12v.01 M19.071 4.929c-1.562 -1.562 -6 .337 -9.9 4.243c-3.905 3.905 -5.804 8.337 -4.242 9.9c1.562 1.561 6 -.338 9.9 -4.244c3.905 -3.905 5.804 -8.337 4.242 -9.9 M4.929 4.929c-1.562 1.562 .337 6 4.243 9.9c3.905 3.905 8.337 5.804 9.9 4.242c1.561 -1.562 -.338 -6 -4.244 -9.9c-3.905 -3.905 -8.337 -5.804 -9.9 -4.242"></path></symbol>
<symbol id="pplx-icon-baby-carriage" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M18 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M2 5h2.5l1.632 4.897a6 6 0 0 0 5.693 4.103h2.675a5.5 5.5 0 0 0 0 -11h-.5v6 M6 9h14 M9 17l1 -3 M16 14l1 3"></path></symbol>
<symbol id="pplx-icon-ball-american-football" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15 9l-6 6 M10 12l2 2 M12 10l2 2 M8 21a5 5 0 0 0 -5 -5 M16 3c-7.18 0 -13 5.82 -13 13a5 5 0 0 0 5 5c7.18 0 13 -5.82 13 -13a5 5 0 0 0 -5 -5 M16 3a5 5 0 0 0 5 5"></path></symbol>
<symbol id="pplx-icon-ball-baseball" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5.636 18.364a9 9 0 1 0 12.728 -12.728a9 9 0 0 0 -12.728 12.728z M12.495 3.02a9 9 0 0 1 -9.475 9.475 M20.98 11.505a9 9 0 0 0 -9.475 9.475 M9 9l2 2 M13 13l2 2 M11 7l2 1 M7 11l1 2 M16 11l1 2 M11 16l2 1"></path></symbol>
<symbol id="pplx-icon-ball-basketball" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0 M5.65 5.65l12.7 12.7 M5.65 18.35l12.7 -12.7 M12 3a9 9 0 0 0 9 9 M3 12a9 9 0 0 1 9 9"></path></symbol>
<symbol id="pplx-icon-ball-football" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0 M12 7l4.76 3.45l-1.76 5.55h-6l-1.76 -5.55z M12 7v-4m3 13l2.5 3m-.74 -8.55l3.74 -1.45m-11.44 7.05l-2.56 2.95m.74 -8.55l-3.74 -1.45"></path></symbol>
<symbol id="pplx-icon-ball-tennis" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0 M6 5.3a9 9 0 0 1 0 13.4 M18 5.3a9 9 0 0 0 0 13.4"></path></symbol>
<symbol id="pplx-icon-bed" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 9m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M22 17v-3h-20 M2 8v9 M12 14h10v-2a3 3 0 0 0 -3 -3h-7v5z"></path></symbol>
<symbol id="pplx-icon-bell" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M10 5a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6 M9 17v1a3 3 0 0 0 6 0v-1"></path></symbol>
<symbol id="pplx-icon-bell-bolt" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M13.5 17h-9.5a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6a2 2 0 1 1 4 0a7 7 0 0 1 4 6v1 M9 17v1a3 3 0 0 0 4.368 2.67 M19 16l-2 3h4l-2 3"></path></symbol>
<symbol id="pplx-icon-bell-check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M11.5 17h-7.5a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3c.016 .129 .037 .256 .065 .382 M9 17v1a3 3 0 0 0 2.502 2.959 M15 19l2 2l4 -4"></path></symbol>
<symbol id="pplx-icon-bell-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9.346 5.353c.21 -.129 .428 -.246 .654 -.353a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3m-1 3h-13a4 4 0 0 0 2 -3v-3a6.996 6.996 0 0 1 1.273 -3.707 M9 17v1a3 3 0 0 0 6 0v-1 M3 3l18 18"></path></symbol>
<symbol id="pplx-icon-bolt" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"></path></symbol>
<symbol id="pplx-icon-bolt-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3l18 18 M15.212 15.21l-4.212 5.79v-7h-6l3.79 -5.21m1.685 -2.32l2.525 -3.47v6m1 1h5l-2.104 2.893"></path></symbol>
<symbol id="pplx-icon-book" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0 M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0 M3 6l0 13 M12 6l0 13 M21 6l0 13"></path></symbol>
<symbol id="pplx-icon-bookmark" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M18 7v14l-6 -4l-6 4v-14a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4z"></path></symbol>
<symbol id="pplx-icon-bookmark-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M14 2a5 5 0 0 1 5 5v14a1 1 0 0 1 -1.555 .832l-5.445 -3.63l-5.444 3.63a1 1 0 0 1 -1.55 -.72l-.006 -.112v-14a5 5 0 0 1 5 -5h4z"></path></symbol>
<symbol id="pplx-icon-bookmark-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7.708 3.721a3.982 3.982 0 0 1 2.292 -.721h4a4 4 0 0 1 4 4v7m0 4v3l-6 -4l-6 4v-14c0 -.308 .035 -.609 .1 -.897 M3 3l18 18"></path></symbol>
<symbol id="pplx-icon-books" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 4m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z M9 4m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z M5 8h4 M9 16h4 M13.803 4.56l2.184 -.53c.562 -.135 1.133 .19 1.282 .732l3.695 13.418a1.02 1.02 0 0 1 -.634 1.219l-.133 .041l-2.184 .53c-.562 .135 -1.133 -.19 -1.282 -.732l-3.695 -13.418a1.02 1.02 0 0 1 .634 -1.219l.133 -.041z M14 9l4 -1 M16 16l3.923 -.98"></path></symbol>
<symbol id="pplx-icon-box" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3l8 4.5l0 9l-8 4.5l-8 -4.5l0 -9l8 -4.5 M12 12l8 -4.5 M12 12l0 9 M12 12l-8 -4.5"></path></symbol>
<symbol id="pplx-icon-box-multiple" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z M17 17v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2"></path></symbol>
<symbol id="pplx-icon-brain" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8 M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8 M17.5 16a3.5 3.5 0 0 0 0 -7h-.5 M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0 M6.5 16a3.5 3.5 0 0 1 0 -7h.5 M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"></path></symbol>
<symbol id="pplx-icon-brand-android" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 10l0 6 M20 10l0 6 M7 9h10v8a1 1 0 0 1 -1 1h-8a1 1 0 0 1 -1 -1v-8a5 5 0 0 1 10 0 M8 3l1 2 M16 3l-1 2 M9 18l0 3 M15 18l0 3"></path></symbol>
<symbol id="pplx-icon-brand-apple-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M15.079 5.999l.239 .012c1.43 .097 3.434 1.013 4.508 2.586a1 1 0 0 1 -.344 1.44c-.05 .028 -.372 .158 -.497 .217a4.15 4.15 0 0 0 -.722 .431c-.614 .461 -.948 1.009 -.942 1.694c.01 .885 .339 1.454 .907 1.846c.208 .143 .436 .253 .666 .33c.126 .043 .426 .116 .444 .122a1 1 0 0 1 .662 .942c0 2.621 -3.04 6.381 -5.286 6.381c-.79 0 -1.272 -.091 -1.983 -.315l-.098 -.031c-.463 -.146 -.702 -.192 -1.133 -.192c-.52 0 -.863 .06 -1.518 .237l-.197 .053c-.575 .153 -.964 .226 -1.5 .248c-2.749 0 -5.285 -5.093 -5.285 -9.072c0 -3.87 1.786 -6.92 5.286 -6.92c.297 0 .598 .045 .909 .128c.403 .107 .774 .26 1.296 .508c.787 .374 .948 .44 1.009 .44h.016c.03 -.003 .128 -.047 1.056 -.457c1.061 -.467 1.864 -.685 2.746 -.616l-.24 -.012z M14 1a1 1 0 0 1 1 1a3 3 0 0 1 -3 3a1 1 0 0 1 -1 -1a3 3 0 0 1 3 -3z"></path></symbol>
<symbol id="pplx-icon-brand-booking" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 18v-9.5a4.5 4.5 0 0 1 4.5 -4.5h7a4.5 4.5 0 0 1 4.5 4.5v7a4.5 4.5 0 0 1 -4.5 4.5h-9.5a2 2 0 0 1 -2 -2z M8 12h3.5a2 2 0 1 1 0 4h-3.5v-7a1 1 0 0 1 1 -1h1.5a2 2 0 1 1 0 4h-1.5 M16 16l.01 0"></path></symbol>
<symbol id="pplx-icon-brand-chrome" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0 M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0 M12 9h8.4 M14.598 13.5l-4.2 7.275 M9.402 13.5l-4.2 -7.275"></path></symbol>
<symbol id="pplx-icon-brand-discord" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 12a1 1 0 1 0 2 0a1 1 0 0 0 -2 0 M14 12a1 1 0 1 0 2 0a1 1 0 0 0 -2 0 M15.5 17c0 1 1.5 3 2 3c1.5 0 2.833 -1.667 3.5 -3c.667 -1.667 .5 -5.833 -1.5 -11.5c-1.457 -1.015 -3 -1.34 -4.5 -1.5l-.972 1.923a11.913 11.913 0 0 0 -4.053 0l-.975 -1.923c-1.5 .16 -3.043 .485 -4.5 1.5c-2 5.667 -2.167 9.833 -1.5 11.5c.667 1.333 2 3 3.5 3c.5 0 2 -2 2 -3 M7 16.5c3.5 1 6.5 1 10 0"></path></symbol>
<symbol id="pplx-icon-brand-dribbble" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0 M9 3.6c5 6 7 10.5 7.5 16.2 M6.4 19c3.5 -3.5 6 -6.5 14.5 -6.4 M3.1 10.75c5 0 9.814 -.38 15.314 -5"></path></symbol>
<symbol id="pplx-icon-brand-facebook" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3"></path></symbol>
<symbol id="pplx-icon-brand-google-drive" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 10l-6 10l-3 -5l6 -10z M9 15h12l-3 5h-12 M15 15l-6 -10h6l6 10z"></path></symbol>
<symbol id="pplx-icon-brand-google-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z"></path></symbol>
<symbol id="pplx-icon-brand-google-play" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 3.71v16.58a.7 .7 0 0 0 1.05 .606l14.622 -8.42a.55 .55 0 0 0 0 -.953l-14.622 -8.419a.7 .7 0 0 0 -1.05 .607z M15 9l-10.5 11.5 M4.5 3.5l10.5 11.5"></path></symbol>
<symbol id="pplx-icon-brand-instagram" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 8a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0 M16.5 7.5v.01"></path></symbol>
<symbol id="pplx-icon-brand-linkedin-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M17 2a5 5 0 0 1 5 5v10a5 5 0 0 1 -5 5h-10a5 5 0 0 1 -5 -5v-10a5 5 0 0 1 5 -5zm-9 8a1 1 0 0 0 -1 1v5a1 1 0 0 0 2 0v-5a1 1 0 0 0 -1 -1m6 0a3 3 0 0 0 -1.168 .236l-.125 .057a1 1 0 0 0 -1.707 .707v5a1 1 0 0 0 2 0v-3a1 1 0 0 1 2 0v3a1 1 0 0 0 2 0v-3a3 3 0 0 0 -3 -3m-6 -3a1 1 0 0 0 -.993 .883l-.007 .127a1 1 0 0 0 1.993 .117l.007 -.127a1 1 0 0 0 -1 -1"></path></symbol>
<symbol id="pplx-icon-brand-onedrive" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M18.456 10.45a6.45 6.45 0 0 0 -12 -2.151a4.857 4.857 0 0 0 -4.44 5.241a4.856 4.856 0 0 0 5.236 4.444h10.751a3.771 3.771 0 0 0 3.99 -3.54a3.772 3.772 0 0 0 -3.538 -3.992z"></path></symbol>
<symbol id="pplx-icon-brand-stackshare" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M19 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M19 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M5 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M7 12h3l3.5 6h3.5 M17 6h-3.5l-3.5 6"></path></symbol>
<symbol id="pplx-icon-brand-tiktok" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M21 7.917v4.034a9.948 9.948 0 0 1 -5 -1.951v4.5a6.5 6.5 0 1 1 -8 -6.326v4.326a2.5 2.5 0 1 0 4 2v-11.5h4.083a6.005 6.005 0 0 0 4.917 4.917z"></path></symbol>
<symbol id="pplx-icon-brand-wikipedia" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 4.984h2 M8 4.984h2.5 M14.5 4.984h2.5 M22 4.984h-2 M4 4.984l5.455 14.516l6.545 -14.516 M9 4.984l6 14.516l6 -14.516"></path></symbol>
<symbol id="pplx-icon-brand-windows" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M17.8 20l-12 -1.5c-1 -.1 -1.8 -.9 -1.8 -1.9v-9.2c0 -1 .8 -1.8 1.8 -1.9l12 -1.5c1.2 -.1 2.2 .8 2.2 1.9v12.1c0 1.2 -1.1 2.1 -2.2 1.9z M12 5l0 14 M4 12l16 0"></path></symbol>
<symbol id="pplx-icon-brand-x" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4l11.733 16h4.267l-11.733 -16z M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"></path></symbol>
<symbol id="pplx-icon-brand-youtube" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z M10 9l5 3l-5 3z"></path></symbol>
<symbol id="pplx-icon-briefcase" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 7m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z M8 7v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2 M12 12l0 .01 M3 13a20 20 0 0 0 18 0"></path></symbol>
<symbol id="pplx-icon-briefcase-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9z M8 7v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2"></path></symbol>
<symbol id="pplx-icon-broadcast" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M18.364 19.364a9 9 0 1 0 -12.728 0 M15.536 16.536a5 5 0 1 0 -7.072 0 M12 13m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></symbol>
<symbol id="pplx-icon-browser" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 8h16 M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z M8 4v4"></path></symbol>
<symbol id="pplx-icon-browser-minus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 8h16 M12 20h-6a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v9 M8 4v4 M16 19h6"></path></symbol>
<symbol id="pplx-icon-browser-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 8h16 M12 20h-6a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v6 M8 4v4 M16 19h6 M19 16v6"></path></symbol>
<symbol id="pplx-icon-brush" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 21v-4a4 4 0 1 1 4 4h-4 M21 3a16 16 0 0 0 -12.8 10.2 M21 3a16 16 0 0 1 -10.2 12.8 M10.6 9a9 9 0 0 1 4.4 4.4"></path></symbol>
<symbol id="pplx-icon-bubble-text" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 10h10 M9 14h5 M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16"></path></symbol>
<symbol id="pplx-icon-bug" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 9v-1a3 3 0 0 1 6 0v1 M8 9h8a6 6 0 0 1 1 3v3a5 5 0 0 1 -10 0v-3a6 6 0 0 1 1 -3 M3 13l4 0 M17 13l4 0 M12 20l0 -6 M4 19l3.35 -2 M20 19l-3.35 -2 M4 7l3.75 2.4 M20 7l-3.75 2.4"></path></symbol>
<symbol id="pplx-icon-building" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 21l18 0 M9 8l1 0 M9 12l1 0 M9 16l1 0 M14 8l1 0 M14 12l1 0 M14 16l1 0 M5 21v-16a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v16"></path></symbol>
<symbol id="pplx-icon-building-bank" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 21l18 0 M3 10l18 0 M5 6l7 -3l7 3 M4 10l0 11 M20 10l0 11 M8 14l0 3 M12 14l0 3 M16 14l0 3"></path></symbol>
<symbol id="pplx-icon-building-cog" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 21h9 M9 8h1 M9 12h1 M9 16h1 M14 8h1 M14 12h1 M5 21v-16c0 -.53 .211 -1.039 .586 -1.414c.375 -.375 .884 -.586 1.414 -.586h10c.53 0 1.039 .211 1.414 .586c.375 .375 .586 .884 .586 1.414v7 M16 18c0 .53 .211 1.039 .586 1.414c.375 .375 .884 .586 1.414 .586c.53 0 1.039 -.211 1.414 -.586c.375 -.375 .586 -.884 .586 -1.414c0 -.53 -.211 -1.039 -.586 -1.414c-.375 -.375 -.884 -.586 -1.414 -.586c-.53 0 -1.039 .211 -1.414 .586c-.375 .375 -.586 .884 -.586 1.414z M18 14.5v1.5 M18 20v1.5 M21.032 16.25l-1.299 .75 M16.27 19l-1.3 .75 M14.97 16.25l1.3 .75 M19.733 19l1.3 .75"></path></symbol>
<symbol id="pplx-icon-bulb" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12h1m8 -9v1m8 8h1m-15.4 -6.4l.7 .7m12.1 -.7l-.7 .7 M9 16a5 5 0 1 1 6 0a3.5 3.5 0 0 0 -1 3a2 2 0 0 1 -4 0a3.5 3.5 0 0 0 -1 -3 M9.7 17l4.6 0"></path></symbol>
<symbol id="pplx-icon-calculator" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 3m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z M8 7m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v1a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z M8 14l0 .01 M12 14l0 .01 M16 14l0 .01 M8 17l0 .01 M12 17l0 .01 M16 17l0 .01"></path></symbol>
<symbol id="pplx-icon-calendar" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z M16 3v4 M8 3v4 M4 11h16 M11 15h1 M12 15v3"></path></symbol>
<symbol id="pplx-icon-calendar-bolt" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M13.5 21h-7.5a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v5 M16 3v4 M8 3v4 M4 11h16 M19 16l-2 3h4l-2 3"></path></symbol>
<symbol id="pplx-icon-calendar-event" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 5m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z M16 3l0 4 M8 3l0 4 M4 11l16 0 M8 15h2v2h-2z"></path></symbol>
<symbol id="pplx-icon-calendar-month" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z M16 3v4 M8 3v4 M4 11h16 M8 14v4 M12 14v4 M16 14v4"></path></symbol>
<symbol id="pplx-icon-calendar-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5h9a2 2 0 0 1 2 2v9m-.184 3.839a2 2 0 0 1 -1.816 1.161h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 1.158 -1.815 M16 3v4 M8 3v1 M4 11h7m4 0h5 M3 3l18 18"></path></symbol>
<symbol id="pplx-icon-calendar-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12.5 21h-6.5a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v5 M16 3v4 M8 3v4 M4 11h16 M16 19h6 M19 16v6"></path></symbol>
<symbol id="pplx-icon-calendar-repeat" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12.5 21h-6.5a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v3 M16 3v4 M8 3v4 M4 11h12 M20 14l2 2h-3 M20 18l2 -2 M19 16a3 3 0 1 0 2 5.236"></path></symbol>
<symbol id="pplx-icon-calendar-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M11.5 21h-5.5a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4.5 M16 3v4 M8 3v4 M4 11h16 M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0 M20.2 20.2l1.8 1.8"></path></symbol>
<symbol id="pplx-icon-calendar-time" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4 M18 18m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0 M15 3v4 M7 3v4 M3 11h16 M18 16.496v1.504l1 1"></path></symbol>
<symbol id="pplx-icon-calendar-week" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z M16 3v4 M8 3v4 M4 11h16 M7 14h.013 M10.01 14h.005 M13.01 14h.005 M16.015 14h.005 M13.015 17h.005 M7.01 17h.005 M10.01 17h.005"></path></symbol>
<symbol id="pplx-icon-calendar-x" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M13 21h-7a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v6.5 M16 3v4 M8 3v4 M4 11h16 M22 22l-5 -5 M17 22l5 -5"></path></symbol>
<symbol id="pplx-icon-camera" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2 M9 13a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"></path></symbol>
<symbol id="pplx-icon-camera-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h-7a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v3.5 M16 19h6 M19 16v6 M9 13a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"></path></symbol>
<symbol id="pplx-icon-cancel" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 18 0a9 9 0 1 0 -18 0 M18.364 5.636l-12.728 12.728"></path></symbol>
<symbol id="pplx-icon-capture" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 8v-2a2 2 0 0 1 2 -2h2 M4 16v2a2 2 0 0 0 2 2h2 M16 4h2a2 2 0 0 1 2 2v2 M16 20h2a2 2 0 0 0 2 -2v-2 M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path></symbol>
<symbol id="pplx-icon-car" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M5 17h-2v-6l2 -5h9l4 5h1a2 2 0 0 1 2 2v4h-2m-4 0h-6m-6 -6h15m-6 0v-5"></path></symbol>
<symbol id="pplx-icon-cards" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3.604 7.197l7.138 -3.109a.96 .96 0 0 1 1.27 .527l4.924 11.902a1 1 0 0 1 -.514 1.304l-7.137 3.109a.96 .96 0 0 1 -1.271 -.527l-4.924 -11.903a1 1 0 0 1 .514 -1.304z M15 4h1a1 1 0 0 1 1 1v3.5 M20 6c.264 .112 .52 .217 .768 .315a1 1 0 0 1 .53 1.311l-2.298 5.374"></path></symbol>
<symbol id="pplx-icon-caret-down-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M18 9c.852 0 1.297 .986 .783 1.623l-.076 .084l-6 6a1 1 0 0 1 -1.32 .083l-.094 -.083l-6 -6l-.083 -.094l-.054 -.077l-.054 -.096l-.017 -.036l-.027 -.067l-.032 -.108l-.01 -.053l-.01 -.06l-.004 -.057v-.118l.005 -.058l.009 -.06l.01 -.052l.032 -.108l.027 -.067l.07 -.132l.065 -.09l.073 -.081l.094 -.083l.077 -.054l.096 -.054l.036 -.017l.067 -.027l.108 -.032l.053 -.01l.06 -.01l.057 -.004l12.059 -.002z"></path></symbol>
<symbol id="pplx-icon-caret-up-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M11.293 7.293a1 1 0 0 1 1.32 -.083l.094 .083l6 6l.083 .094l.054 .077l.054 .096l.017 .036l.027 .067l.032 .108l.01 .053l.01 .06l.004 .057l.002 .059l-.002 .059l-.005 .058l-.009 .06l-.01 .052l-.032 .108l-.027 .067l-.07 .132l-.065 .09l-.073 .081l-.094 .083l-.077 .054l-.096 .054l-.036 .017l-.067 .027l-.108 .032l-.053 .01l-.06 .01l-.057 .004l-.059 .002h-12c-.852 0 -1.297 -.986 -.783 -1.623l.076 -.084l6 -6z"></path></symbol>
<symbol id="pplx-icon-cash-banknote" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0 M3 8a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z M18 12h.01 M6 12h.01"></path></symbol>
<symbol id="pplx-icon-cat" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M20 3v10a8 8 0 1 1 -16 0v-10l3.432 3.432a7.963 7.963 0 0 1 4.568 -1.432c1.769 0 3.403 .574 4.728 1.546l3.272 -3.546z M2 16h5l-4 4 M22 16h-5l4 4 M12 16m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M9 11v.01 M15 11v.01"></path></symbol>
<symbol id="pplx-icon-chart-bar" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z M4 20h14"></path></symbol>
<symbol id="pplx-icon-chart-candle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v3a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z M6 4l0 2 M6 11l0 9 M10 14m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v3a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z M12 4l0 10 M12 19l0 1 M16 5m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z M18 4l0 1 M18 11l0 9"></path></symbol>
<symbol id="pplx-icon-chart-dots-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 7m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M16 15m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0 M6 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0 M9 17l5 -1.5 M6.5 8.5l7.81 5.37 M7 7l8 -1"></path></symbol>
<symbol id="pplx-icon-chart-histogram" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18 M20 18v3 M16 16v5 M12 13v8 M8 16v5 M3 11c6 0 5 -5 9 -5s3 5 9 5"></path></symbol>
<symbol id="pplx-icon-chart-infographic" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0 M7 3v4h4 M9 17l0 4 M17 14l0 7 M13 13l0 8 M21 12l0 9"></path></symbol>
<symbol id="pplx-icon-chart-line" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19l16 0 M4 15l4 -6l4 2l4 -5l4 4"></path></symbol>
<symbol id="pplx-icon-chart-sankey" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18 M3 6h18 M3 8c10 0 8 9 18 9"></path></symbol>
<symbol id="pplx-icon-check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12l5 5l10 -10"></path></symbol>
<symbol id="pplx-icon-checklist" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9.615 20h-2.615a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8 M14 19l2 2l4 -4 M9 8h4 M9 12h2"></path></symbol>
<symbol id="pplx-icon-chevron-down" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6l6 -6"></path></symbol>
<symbol id="pplx-icon-chevron-left" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15 6l-6 6l6 6"></path></symbol>
<symbol id="pplx-icon-chevron-right" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 6l6 6l-6 6"></path></symbol>
<symbol id="pplx-icon-chevron-up" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6 15l6 -6l6 6"></path></symbol>
<symbol id="pplx-icon-chevrons-left" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M11 7l-5 5l5 5 M17 7l-5 5l5 5"></path></symbol>
<symbol id="pplx-icon-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path></symbol>
<symbol id="pplx-icon-circle-arrow-right" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a9 9 0 1 0 0 18a9 9 0 0 0 0 -18 M16 12l-4 -4 M16 12h-8 M12 16l4 -4"></path></symbol>
<symbol id="pplx-icon-circle-arrow-up" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0 M12 8l-4 4 M12 8v8 M16 12l-4 -4"></path></symbol>
<symbol id="pplx-icon-circle-check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0 M9 12l2 2l4 -4"></path></symbol>
<symbol id="pplx-icon-circle-check-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z"></path></symbol>
<symbol id="pplx-icon-circle-dot" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path></symbol>
<symbol id="pplx-icon-circle-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M7 3.34a10 10 0 1 1 -4.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 4.995 -8.336z"></path></symbol>
<symbol id="pplx-icon-circle-half-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0 M12 3v18 M12 14l7 -7 M12 19l8.5 -8.5 M12 9l4.5 -4.5"></path></symbol>
<symbol id="pplx-icon-circle-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0 M9 12h6 M12 9v6"></path></symbol>
<symbol id="pplx-icon-click" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12l3 0 M12 3l0 3 M7.8 7.8l-2.2 -2.2 M16.2 7.8l2.2 -2.2 M7.8 16.2l-2.2 2.2 M12 12l9 3l-4 2l-2 4l-3 -9"></path></symbol>
<symbol id="pplx-icon-clipboard-check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2 M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z M9 14l2 2l4 -4"></path></symbol>
<symbol id="pplx-icon-clipboard-heart" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2 M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z M11.993 16.75l2.747 -2.815a1.9 1.9 0 0 0 0 -2.632a1.775 1.775 0 0 0 -2.56 0l-.183 .188l-.183 -.189a1.775 1.775 0 0 0 -2.56 0a1.899 1.899 0 0 0 0 2.632l2.738 2.825z"></path></symbol>
<symbol id="pplx-icon-clock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0 M12 7v5l3 3"></path></symbol>
<symbol id="pplx-icon-clock-check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M20.942 13.021a9 9 0 1 0 -9.407 7.967 M12 7v5l3 3 M15 19l2 2l4 -4"></path></symbol>
<symbol id="pplx-icon-clock-hour-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0 M12 12l2 3 M12 7v5"></path></symbol>
<symbol id="pplx-icon-clock-pause" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M20.942 13.018a9 9 0 1 0 -7.909 7.922 M12 7v5l2 2 M17 17v5 M21 17v5"></path></symbol>
<symbol id="pplx-icon-clock-x" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M20.926 13.15a9 9 0 1 0 -7.835 7.784 M12 7v5l2 2 M22 22l-5 -5 M17 22l5 -5"></path></symbol>
<symbol id="pplx-icon-cloud-computing" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6.657 16c-2.572 0 -4.657 -2.007 -4.657 -4.483c0 -2.475 2.085 -4.482 4.657 -4.482c.393 -1.762 1.794 -3.2 3.675 -3.773c1.88 -.572 3.956 -.193 5.444 1c1.488 1.19 2.162 3.007 1.77 4.769h.99c1.913 0 3.464 1.56 3.464 3.486c0 1.927 -1.551 3.487 -3.465 3.487h-11.878 M12 16v5 M16 16v4a1 1 0 0 0 1 1h4 M8 16v4a1 1 0 0 1 -1 1h-4"></path></symbol>
<symbol id="pplx-icon-cloud-data-connection" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 9.897c0 -1.714 1.46 -3.104 3.26 -3.104c.275 -1.22 1.255 -2.215 2.572 -2.611c1.317 -.397 2.77 -.134 3.811 .69c1.042 .822 1.514 2.08 1.239 3.3h.693a2.42 2.42 0 0 1 2.425 2.414a2.42 2.42 0 0 1 -2.425 2.414h-8.315c-1.8 0 -3.26 -1.39 -3.26 -3.103z M12 13v3 M12 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M14 18h7 M3 18h7"></path></symbol>
<symbol id="pplx-icon-cloud-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9.58 5.548c.24 -.11 .492 -.207 .752 -.286c1.88 -.572 3.956 -.193 5.444 1c1.488 1.19 2.162 3.007 1.77 4.769h.99c1.913 0 3.464 1.56 3.464 3.486c0 .957 -.383 1.824 -1.003 2.454m-2.997 1.033h-11.343c-2.572 -.004 -4.657 -2.011 -4.657 -4.487c0 -2.475 2.085 -4.482 4.657 -4.482c.13 -.582 .37 -1.128 .7 -1.62 M3 3l18 18"></path></symbol>
<symbol id="pplx-icon-cloud-upload" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 18a4.6 4.4 0 0 1 0 -9a5 4.5 0 0 1 11 2h1a3.5 3.5 0 0 1 0 7h-1 M9 15l3 -3l3 3 M12 12l0 9"></path></symbol>
<symbol id="pplx-icon-code" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 8l-4 4l4 4 M17 8l4 4l-4 4 M14 4l-4 16"></path></symbol>
<symbol id="pplx-icon-coin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0 M14.8 9a2 2 0 0 0 -1.8 -1h-2a2 2 0 1 0 0 4h2a2 2 0 1 1 0 4h-2a2 2 0 0 1 -1.8 -1 M12 7v10"></path></symbol>
<symbol id="pplx-icon-coins" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 14c0 1.657 2.686 3 6 3s6 -1.343 6 -3s-2.686 -3 -6 -3s-6 1.343 -6 3z M9 14v4c0 1.656 2.686 3 6 3s6 -1.344 6 -3v-4 M3 6c0 1.072 1.144 2.062 3 2.598s4.144 .536 6 0c1.856 -.536 3 -1.526 3 -2.598c0 -1.072 -1.144 -2.062 -3 -2.598s-4.144 -.536 -6 0c-1.856 .536 -3 1.526 -3 2.598z M3 6v10c0 .888 .772 1.45 2 2 M3 11c0 .888 .772 1.45 2 2"></path></symbol>
<symbol id="pplx-icon-confetti" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 5h2 M5 4v2 M11.5 4l-.5 2 M18 5h2 M19 4v2 M15 9l-1 1 M18 13l2 -.5 M18 19h2 M19 18v2 M14 16.518l-6.518 -6.518l-4.39 9.58a1 1 0 0 0 1.329 1.329l9.579 -4.39z"></path></symbol>
<symbol id="pplx-icon-cookie" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"></path><path d="M8 13v.01 M12 17v.01 M12 12v.01 M16 14v.01 M11 8v.01 M13.148 3.476l2.667 1.104a4 4 0 0 0 4.656 6.14l.053 .132a3 3 0 0 1 0 2.296q -.745 1.18 -1.024 1.852q -.283 .684 -.66 2.216a3 3 0 0 1 -1.624 1.623q -1.572 .394 -2.216 .661q -.712 .295 -1.852 1.024a3 3 0 0 1 -2.296 0q -1.203 -.754 -1.852 -1.024q -.707 -.292 -2.216 -.66a3 3 0 0 1 -1.623 -1.624q -.397 -1.577 -.661 -2.216q -.298 -.718 -1.024 -1.852a3 3 0 0 1 0 -2.296q .719 -1.116 1.024 -1.852q .257 -.62 .66 -2.216a3 3 0 0 1 1.624 -1.623q 1.547 -.384 2.216 -.661q .687 -.285 1.852 -1.024a3 3 0 0 1 2.296 0"></path></symbol>
<symbol id="pplx-icon-copy" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1"></path></symbol>
<symbol id="pplx-icon-corner-down-right" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6 6v6a3 3 0 0 0 3 3h10l-4 -4m0 8l4 -4"></path></symbol>
<symbol id="pplx-icon-corner-right-up" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6 18h6a3 3 0 0 0 3 -3v-10l-4 4m8 0l-4 -4"></path></symbol>
<symbol id="pplx-icon-cpu" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 5m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v12a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z M9 9h6v6h-6z M3 10h2 M3 14h2 M10 3v2 M14 3v2 M21 10h-2 M21 14h-2 M14 21v-2 M10 21v-2"></path></symbol>
<symbol id="pplx-icon-cpu-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 5m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v12a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z M8 10v-2h2m6 6v2h-2m-4 0h-2v-2m8 -4v-2h-2 M3 10h2 M3 14h2 M10 3v2 M14 3v2 M21 10h-2 M21 14h-2 M14 21v-2 M10 21v-2"></path></symbol>
<symbol id="pplx-icon-credit-card" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 5m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z M3 10l18 0 M7 15l.01 0 M11 15l2 0"></path></symbol>
<symbol id="pplx-icon-cricket" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M11.105 18.79l-1 .992a4.159 4.159 0 0 1 -6.038 -5.715l.157 -.166l8.282 -8.401l1.5 1.5l3.45 -3.391a2.08 2.08 0 0 1 3.057 2.815l-.116 .126l-3.391 3.45l1.5 1.5l-3.668 3.617 M10.5 7.5l6 6 M14 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path></symbol>
<symbol id="pplx-icon-currency-bitcoin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6 6h8a3 3 0 0 1 0 6a3 3 0 0 1 0 6h-8 M8 6l0 12 M8 12l6 0 M9 3l0 3 M13 3l0 3 M9 18l0 3 M13 18l0 3"></path></symbol>
<symbol id="pplx-icon-currency-dollar" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M16.7 8a3 3 0 0 0 -2.7 -2h-4a3 3 0 0 0 0 6h4a3 3 0 0 1 0 6h-4a3 3 0 0 1 -2.7 -2 M12 3v3m0 12v3"></path></symbol>
<symbol id="pplx-icon-current-location" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0 M12 12m-8 0a8 8 0 1 0 16 0a8 8 0 1 0 -16 0 M12 2l0 2 M12 20l0 2 M20 12l2 0 M2 12l2 0"></path></symbol>
<symbol id="pplx-icon-device-floppy" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2 M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M14 4l0 4l-6 0l0 -4"></path></symbol>
<symbol id="pplx-icon-device-imac" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 4a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v12a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-12z M3 13h18 M8 21h8 M10 17l-.5 4 M14 17l.5 4"></path></symbol>
<symbol id="pplx-icon-device-laptop" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 19l18 0 M5 6m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v8a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z"></path></symbol>
<symbol id="pplx-icon-device-mobile" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6 5a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2v-14z M11 4h2 M12 17v.01"></path></symbol>
<symbol id="pplx-icon-device-tv" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 7m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z M16 3l-4 4l-4 -4"></path></symbol>
<symbol id="pplx-icon-dog" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M11 5h2 M19 12c-.667 5.333 -2.333 8 -5 8h-4c-2.667 0 -4.333 -2.667 -5 -8 M11 16c0 .667 .333 1 1 1s1 -.333 1 -1h-2z M12 18v2 M10 11v.01 M14 11v.01 M5 4l6 .97l-6.238 6.688a1.021 1.021 0 0 1 -1.41 .111a.953 .953 0 0 1 -.327 -.954l1.975 -6.815z M19 4l-6 .97l6.238 6.688c.358 .408 .989 .458 1.41 .111a.953 .953 0 0 0 .327 -.954l-1.975 -6.815z"></path></symbol>
<symbol id="pplx-icon-dots" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></symbol>
<symbol id="pplx-icon-dots-vertical" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></symbol>
<symbol id="pplx-icon-download" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2 M7 11l5 5l5 -5 M12 4l0 12"></path></symbol>
<symbol id="pplx-icon-edit" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1 M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z M16 5l3 3"></path></symbol>
<symbol id="pplx-icon-egg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14.083c0 4.154 -2.966 6.74 -7 6.917c-4.2 0 -7 -2.763 -7 -6.917c0 -5.538 3.5 -11.09 7 -11.083c3.5 .007 7 5.545 7 11.083z"></path></symbol>
<symbol id="pplx-icon-exclamation-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0 M12 9v4 M12 16v.01"></path></symbol>
<symbol id="pplx-icon-exclamation-circle-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M17 3.34a10 10 0 1 1 -15 8.66l.005 -.324a10 10 0 0 1 14.995 -8.336m-5 11.66a1 1 0 0 0 -1 1v.01a1 1 0 0 0 2 0v-.01a1 1 0 0 0 -1 -1m0 -7a1 1 0 0 0 -1 1v4a1 1 0 0 0 2 0v-4a1 1 0 0 0 -1 -1"></path></symbol>
<symbol id="pplx-icon-external-link" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6 M11 13l9 -9 M15 4h5v5"></path></symbol>
<symbol id="pplx-icon-eye" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0 M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"></path></symbol>
<symbol id="pplx-icon-file" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path></symbol>
<symbol id="pplx-icon-file-broken" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M5 7v-2a2 2 0 0 1 2 -2h7l5 5v2 M19 19a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2 M5 16h.01 M5 13h.01 M5 10h.01 M19 13h.01 M19 16h.01"></path></symbol>
<symbol id="pplx-icon-file-excel" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2 M10 12l4 5 M10 17l4 -5"></path></symbol>
<symbol id="pplx-icon-file-export" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M11.5 21h-4.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v5m-5 6h7m-3 -3l3 3l-3 3"></path></symbol>
<symbol id="pplx-icon-file-import" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3"></path></symbol>
<symbol id="pplx-icon-file-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M12 21h-5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v4.5 M16.5 17.5m-2.5 0a2.5 2.5 0 1 0 5 0a2.5 2.5 0 1 0 -5 0 M18.5 19.5l2.5 2.5"></path></symbol>
<symbol id="pplx-icon-file-spark" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M19 22.5a4.75 4.75 0 0 1 3.5 -3.5a4.75 4.75 0 0 1 -3.5 -3.5a4.75 4.75 0 0 1 -3.5 3.5a4.75 4.75 0 0 1 3.5 3.5 M14 3v4a1 1 0 0 0 1 1h4 M12 21h-5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v3.5"></path></symbol>
<symbol id="pplx-icon-file-spreadsheet" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z M8 11h8v7h-8z M8 15h8 M11 11v7"></path></symbol>
<symbol id="pplx-icon-file-stack" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4 M5 21h14 M5 18h14 M5 15h14"></path></symbol>
<symbol id="pplx-icon-file-text" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z M9 9l1 0 M9 13l6 0 M9 17l6 0"></path></symbol>
<symbol id="pplx-icon-file-type-csv" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4 M7 16.5a1.5 1.5 0 0 0 -3 0v3a1.5 1.5 0 0 0 3 0 M10 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75 M16 15l2 6l2 -6"></path></symbol>
<symbol id="pplx-icon-file-type-doc" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4 M5 15v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z M20 16.5a1.5 1.5 0 0 0 -3 0v3a1.5 1.5 0 0 0 3 0 M12.5 15a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1 -3 0v-3a1.5 1.5 0 0 1 1.5 -1.5z"></path></symbol>
<symbol id="pplx-icon-file-type-docx" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4 M2 15v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z M17 16.5a1.5 1.5 0 0 0 -3 0v3a1.5 1.5 0 0 0 3 0 M9.5 15a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1 -3 0v-3a1.5 1.5 0 0 1 1.5 -1.5z M19.5 15l3 6 M19.5 21l3 -6"></path></symbol>
<symbol id="pplx-icon-file-type-pdf" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4 M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6 M17 18h2 M20 15h-3v6 M11 15v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z"></path></symbol>
<symbol id="pplx-icon-file-type-ppt" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M14 3v4a1 1 0 0 0 1 1h4 M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6 M11 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6 M16.5 15h3 M18 15v6 M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path></symbol>
<symbol id="pplx-icon-file-type-xls" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4 M4 15l4 6 M4 21l4 -6 M17 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75 M11 15v6h3"></path></symbol>
<symbol id="pplx-icon-file-type-zip" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4 M16 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6 M12 15v6 M5 15h3l-3 6h3"></path></symbol>
<symbol id="pplx-icon-file-upload" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z M12 11v6 M9.5 13.5l2.5 -2.5l2.5 2.5"></path></symbol>
<symbol id="pplx-icon-file-word" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4 M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2 M9 12l1.333 5l1.667 -4l1.667 4l1.333 -5"></path></symbol>
<symbol id="pplx-icon-files" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3v4a1 1 0 0 0 1 1h4 M18 17h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h4l5 5v7a2 2 0 0 1 -2 2z M16 17v2a2 2 0 0 1 -2 2h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2"></path></symbol>
<symbol id="pplx-icon-filter" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z"></path></symbol>
<symbol id="pplx-icon-flag" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 5a5 5 0 0 1 7 0a5 5 0 0 0 7 0v9a5 5 0 0 1 -7 0a5 5 0 0 0 -7 0v-9z M5 21v-7"></path></symbol>
<symbol id="pplx-icon-flask" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 3l6 0 M10 9l4 0 M10 3v6l-4 11a.7 .7 0 0 0 .5 1h11a.7 .7 0 0 0 .5 -1l-4 -11v-6"></path></symbol>
<symbol id="pplx-icon-flask-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6.1 15h11.8 M14 3v7.342a6 6 0 0 1 1.318 10.658h-6.635a6 6 0 0 1 1.317 -10.66v-7.34h4z M9 3h6"></path></symbol>
<symbol id="pplx-icon-flower" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0 M12 2a3 3 0 0 1 3 3c0 .562 -.259 1.442 -.776 2.64l-.724 1.36l1.76 -1.893c.499 -.6 .922 -1 1.27 -1.205a2.968 2.968 0 0 1 4.07 1.099a3.011 3.011 0 0 1 -1.09 4.098c-.374 .217 -.99 .396 -1.846 .535l-2.664 .366l2.4 .326c1 .145 1.698 .337 2.11 .576a3.011 3.011 0 0 1 1.09 4.098a2.968 2.968 0 0 1 -4.07 1.098c-.348 -.202 -.771 -.604 -1.27 -1.205l-1.76 -1.893l.724 1.36c.516 1.199 .776 2.079 .776 2.64a3 3 0 0 1 -6 0c0 -.562 .259 -1.442 .776 -2.64l.724 -1.36l-1.76 1.893c-.499 .601 -.922 1 -1.27 1.205a2.968 2.968 0 0 1 -4.07 -1.098a3.011 3.011 0 0 1 1.09 -4.098c.374 -.218 .99 -.396 1.846 -.536l2.664 -.366l-2.4 -.325c-1 -.145 -1.698 -.337 -2.11 -.576a3.011 3.011 0 0 1 -1.09 -4.099a2.968 2.968 0 0 1 4.07 -1.099c.348 .203 .771 .604 1.27 1.205l1.76 1.894c-1 -2.292 -1.5 -3.625 -1.5 -4a3 3 0 0 1 3 -3z"></path></symbol>
<symbol id="pplx-icon-folder-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M9 3a1 1 0 0 1 .608 .206l.1 .087l2.706 2.707h6.586a3 3 0 0 1 2.995 2.824l.005 .176v8a3 3 0 0 1 -2.824 2.995l-.176 .005h-14a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-11a3 3 0 0 1 2.824 -2.995l.176 -.005h4z"></path></symbol>
<symbol id="pplx-icon-folders" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 3h3l2 2h5a2 2 0 0 1 2 2v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2 M17 16v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2h2"></path></symbol>
<symbol id="pplx-icon-forms" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a3 3 0 0 0 -3 3v12a3 3 0 0 0 3 3 M6 3a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3 M13 7h7a1 1 0 0 1 1 1v8a1 1 0 0 1 -1 1h-7 M5 7h-1a1 1 0 0 0 -1 1v8a1 1 0 0 0 1 1h1 M17 12h.01 M13 12h.01"></path></symbol>
<symbol id="pplx-icon-geometry" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 21l4 -12m2 0l1.48 4.439m.949 2.847l1.571 4.714 M12 7m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M4 12c1.526 2.955 4.588 5 8 5c3.41 0 6.473 -2.048 8 -5 M12 5v-2"></path></symbol>
<symbol id="pplx-icon-ghost-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M10 9h.01 M14 9h.01 M12 3a7 7 0 0 1 7 7v1l1 0a2 2 0 1 1 0 4l-1 0v3l2 3h-10a6 6 0 0 1 -6 -5.775l0 -.226l-1 0a2 2 0 0 1 0 -4l1 0v-1a7 7 0 0 1 7 -7z M11 14h2a1 1 0 0 0 -2 0z"></path></symbol>
<symbol id="pplx-icon-gift" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 8m0 1a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1z M12 8l0 13 M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7 M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"></path></symbol>
<symbol id="pplx-icon-git-fork" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M7 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M17 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M7 8v2a2 2 0 0 0 2 2h6a2 2 0 0 0 2 -2v-2 M12 12l0 4"></path></symbol>
<symbol id="pplx-icon-globe" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 9a4 4 0 1 0 8 0a4 4 0 0 0 -8 0 M5.75 15a8.015 8.015 0 1 0 9.25 -13 M11 17v4 M7 21h8"></path></symbol>
<symbol id="pplx-icon-golf" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 18v-15l7 4l-7 4 M9 17.67c-.62 .36 -1 .82 -1 1.33c0 1.1 1.8 2 4 2s4 -.9 4 -2c0 -.5 -.38 -.97 -1 -1.33"></path></symbol>
<symbol id="pplx-icon-graph" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 18v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z M7 14l3 -3l2 2l3 -3l2 2"></path></symbol>
<symbol id="pplx-icon-grid-dots" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M19 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M5 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M19 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></symbol>
<symbol id="pplx-icon-grip-vertical" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M9 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M9 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M15 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M15 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M15 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></symbol>
<symbol id="pplx-icon-hanger" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 6a2 2 0 1 0 -4 0c0 1.667 .67 3 2 4h-.008l7.971 4.428a2 2 0 0 1 1.029 1.749v.823a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-.823a2 2 0 0 1 1.029 -1.749l7.971 -4.428"></path></symbol>
<symbol id="pplx-icon-headset" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 14v-3a8 8 0 1 1 16 0v3 M18 19c0 1.657 -2.686 3 -6 3 M4 14a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v3a2 2 0 0 1 -2 2h-1a2 2 0 0 1 -2 -2v-3z M15 14a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v3a2 2 0 0 1 -2 2h-1a2 2 0 0 1 -2 -2v-3z"></path></symbol>
<symbol id="pplx-icon-heart" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"></path></symbol>
<symbol id="pplx-icon-heart-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z"></path></symbol>
<symbol id="pplx-icon-heart-handshake" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572 M12 6l-3.293 3.293a1 1 0 0 0 0 1.414l.543 .543c.69 .69 1.81 .69 2.5 0l1 -1a3.182 3.182 0 0 1 4.5 0l2.25 2.25 M12.5 15.5l2 2 M15 13l2 2"></path></symbol>
<symbol id="pplx-icon-help" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0 M12 17l0 .01 M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"></path></symbol>
<symbol id="pplx-icon-history" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8l0 4l2 2 M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5"></path></symbol>
<symbol id="pplx-icon-horse-toy" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3.5 17.5c5.667 4.667 11.333 4.667 17 0 M19 18.5l-2 -8.5l1 -2l2 1l1.5 -1.5l-2.5 -4.5c-5.052 .218 -5.99 3.133 -7 6h-6a3 3 0 0 0 -3 3 M5 18.5l2 -9.5 M8 20l2 -5h4l2 5"></path></symbol>
<symbol id="pplx-icon-hourglass" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 7h11 M6.5 17h11 M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z"></path></symbol>
<symbol id="pplx-icon-hourglass-high" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 7h11 M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z"></path></symbol>
<symbol id="pplx-icon-id-badge-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 12h3v4h-3z M10 6h-6a1 1 0 0 0 -1 1v12a1 1 0 0 0 1 1h16a1 1 0 0 0 1 -1v-12a1 1 0 0 0 -1 -1h-6 M10 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v3a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z M14 16h2 M14 12h4"></path></symbol>
<symbol id="pplx-icon-image-in-picture" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M13 15c-2 0 -5 1 -5 5 M4 11m0 2a2 2 0 0 1 2 -2h5a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-5a2 2 0 0 1 -2 -2z M4 7v-2a1 1 0 0 1 1 -1h2 M11 4h2 M17 4h2a1 1 0 0 1 1 1v2 M20 11v2 M20 17v2a1 1 0 0 1 -1 1h-2"></path></symbol>
<symbol id="pplx-icon-inbox" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z M4 13h3l3 3h4l3 -3h3"></path></symbol>
<symbol id="pplx-icon-info-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0 M12 9h.01 M11 12h1v4h1"></path></symbol>
<symbol id="pplx-icon-info-triangle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z M12 9h.01 M11 12h1v4h1"></path></symbol>
<symbol id="pplx-icon-input-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M20 11v-2a2 2 0 0 0 -2 -2h-12a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h5 M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0 M20.2 20.2l1.8 1.8"></path></symbol>
<symbol id="pplx-icon-key" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M16.555 3.843l3.602 3.602a2.877 2.877 0 0 1 0 4.069l-2.643 2.643a2.877 2.877 0 0 1 -4.069 0l-.301 -.301l-6.558 6.558a2 2 0 0 1 -1.239 .578l-.175 .008h-1.172a1 1 0 0 1 -.993 -.883l-.007 -.117v-1.172a2 2 0 0 1 .467 -1.284l.119 -.13l.414 -.414h2v-2h2v-2l2.144 -2.144l-.301 -.301a2.877 2.877 0 0 1 0 -4.069l2.643 -2.643a2.877 2.877 0 0 1 4.069 0z M15 9h.01"></path></symbol>
<symbol id="pplx-icon-keyboard" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M2 6m0 2a2 2 0 0 1 2 -2h16a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-16a2 2 0 0 1 -2 -2z M6 10l0 .01 M10 10l0 .01 M14 10l0 .01 M18 10l0 .01 M6 14l0 .01 M18 14l0 .01 M10 14l4 .01"></path></symbol>
<symbol id="pplx-icon-language" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 6.371c0 4.418 -2.239 6.629 -5 6.629 M4 6.371h7 M5 9c0 2.144 2.252 3.908 6 4 M12 20l4 -9l4 9 M19.1 18h-6.2 M6.694 3l.793 .582"></path></symbol>
<symbol id="pplx-icon-layout-collage" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z M10 4l4 16 M12 12l-8 2"></path></symbol>
<symbol id="pplx-icon-layout-grid-add" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z M14 17h6m-3 -3v6"></path></symbol>
<symbol id="pplx-icon-library-photo" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 3m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z M4.012 7.26a2.005 2.005 0 0 0 -1.012 1.737v10c0 1.1 .9 2 2 2h10c.75 0 1.158 -.385 1.5 -1 M17 7h.01 M7 13l3.644 -3.644a1.21 1.21 0 0 1 1.712 0l3.644 3.644 M15 12l1.644 -1.644a1.21 1.21 0 0 1 1.712 0l2.644 2.644"></path></symbol>
<symbol id="pplx-icon-license" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15 21h-9a3 3 0 0 1 -3 -3v-1h10v2a2 2 0 0 0 4 0v-14a2 2 0 1 1 2 2h-2m2 -4h-11a3 3 0 0 0 -3 3v11 M9 7l4 0 M9 11l4 0"></path></symbol>
<symbol id="pplx-icon-link" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 15l6 -6 M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464 M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"></path></symbol>
<symbol id="pplx-icon-list-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15 15m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0 M18.5 18.5l2.5 2.5 M4 6h16 M4 12h4 M4 18h4"></path></symbol>
<symbol id="pplx-icon-loader" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 6l0 -3 M16.25 7.75l2.15 -2.15 M18 12l3 0 M16.25 16.25l2.15 2.15 M12 18l0 3 M7.75 16.25l-2.15 2.15 M6 12l-3 0 M7.75 7.75l-2.15 -2.15"></path></symbol>
<symbol id="pplx-icon-loader-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a9 9 0 1 0 9 9"></path></symbol>
<symbol id="pplx-icon-location" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5"></path></symbol>
<symbol id="pplx-icon-lock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0 M8 11v-4a4 4 0 1 1 8 0v4"></path></symbol>
<symbol id="pplx-icon-lock-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a5 5 0 0 1 5 5v3a3 3 0 0 1 3 3v6a3 3 0 0 1 -3 3h-10a3 3 0 0 1 -3 -3v-6a3 3 0 0 1 3 -3v-3a5 5 0 0 1 5 -5m0 12a2 2 0 0 0 -1.995 1.85l-.005 .15a2 2 0 1 0 2 -2m0 -10a3 3 0 0 0 -3 3v3h6v-3a3 3 0 0 0 -3 -3"></path></symbol>
<symbol id="pplx-icon-logout" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2 M9 12h12l-3 -3 M18 15l3 -3"></path></symbol>
<symbol id="pplx-icon-mail" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z M3 7l9 6l9 -6"></path></symbol>
<symbol id="pplx-icon-mail-forward" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 18h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5 M3 6l9 6l9 -6 M15 18h6 M18 15l3 3l-3 3"></path></symbol>
<symbol id="pplx-icon-mail-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M11 19h-6a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v4.5 M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0 M20.2 20.2l1.8 1.8 M3 7l9 6l9 -6"></path></symbol>
<symbol id="pplx-icon-map" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 7l6 -3l6 3l6 -3v13l-6 3l-6 -3l-6 3v-13 M9 4v13 M15 7v13"></path></symbol>
<symbol id="pplx-icon-map-pin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11a3 3 0 1 0 6 0a3 3 0 0 0 -6 0 M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.827 0l-4.244 -4.243a8 8 0 1 1 11.314 0z"></path></symbol>
<symbol id="pplx-icon-markdown" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 5m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z M7 15v-6l2 2l2 -2v6 M14 13l2 2l2 -2m-2 2v-6"></path></symbol>
<symbol id="pplx-icon-masks-theater" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M13.192 9h6.616a2 2 0 0 1 1.992 2.183l-.567 6.182a4 4 0 0 1 -3.983 3.635h-1.5a4 4 0 0 1 -3.983 -3.635l-.567 -6.182a2 2 0 0 1 1.992 -2.183z M15 13h.01 M18 13h.01 M15 16.5c1 .667 2 .667 3 0 M8.632 15.982a4.037 4.037 0 0 1 -.382 .018h-1.5a4 4 0 0 1 -3.983 -3.635l-.567 -6.182a2 2 0 0 1 1.992 -2.183h6.616a2 2 0 0 1 2 2 M6 8h.01 M9 8h.01 M6 12c.764 -.51 1.528 -.63 2.291 -.36"></path></symbol>
<symbol id="pplx-icon-maximize" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 8v-2a2 2 0 0 1 2 -2h2 M4 16v2a2 2 0 0 0 2 2h2 M16 4h2a2 2 0 0 1 2 2v2 M16 20h2a2 2 0 0 0 2 -2v-2"></path></symbol>
<symbol id="pplx-icon-medicine-syrup" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 21h8a1 1 0 0 0 1 -1v-10a3 3 0 0 0 -3 -3h-4a3 3 0 0 0 -3 3v10a1 1 0 0 0 1 1z M10 14h4 M12 12v4 M10 7v-3a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v3"></path></symbol>
<symbol id="pplx-icon-menu-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6l16 0 M4 12l16 0 M4 18l16 0"></path></symbol>
<symbol id="pplx-icon-message" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 9h8 M8 13h6 M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z"></path></symbol>
<symbol id="pplx-icon-message-chatbot" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z M9.5 9h.01 M14.5 9h.01 M9.5 13a3.5 3.5 0 0 0 5 0"></path></symbol>
<symbol id="pplx-icon-message-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 20l1.3 -3.9c-2.324 -3.437 -1.426 -7.872 2.1 -10.374c3.526 -2.501 8.59 -2.296 11.845 .48c3.255 2.777 3.695 7.266 1.029 10.501c-2.666 3.235 -7.615 4.215 -11.574 2.293l-4.7 1"></path></symbol>
<symbol id="pplx-icon-message-circle-code" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M11.036 19.933a9.798 9.798 0 0 1 -3.336 -.933l-4.7 1l1.3 -3.9c-2.324 -3.437 -1.426 -7.872 2.1 -10.374c3.526 -2.501 8.59 -2.296 11.845 .48c2.128 1.815 3.053 4.361 2.694 6.81 M20 21l2 -2l-2 -2 M17 17l-2 2l2 2"></path></symbol>
<symbol id="pplx-icon-message-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 9h8 M8 13h6 M12.01 18.594l-4.01 2.406v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v5.5 M16 19h6 M19 16v6"></path></symbol>
<symbol id="pplx-icon-microphone" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z M5 10a7 7 0 0 0 14 0 M8 21l8 0 M12 17l0 4"></path></symbol>
<symbol id="pplx-icon-microphone-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3l18 18 M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1 M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85 M8 21l8 0 M12 17l0 4"></path></symbol>
<symbol id="pplx-icon-minus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12l14 0"></path></symbol>
<symbol id="pplx-icon-moneybag" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9.5 3h5a1.5 1.5 0 0 1 1.5 1.5a3.5 3.5 0 0 1 -3.5 3.5h-1a3.5 3.5 0 0 1 -3.5 -3.5a1.5 1.5 0 0 1 1.5 -1.5 M4 17v-1a8 8 0 1 1 16 0v1a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4"></path></symbol>
<symbol id="pplx-icon-mood-sad-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0 M14.5 16.05a3.5 3.5 0 0 0 -5 0 M10 9.25c-.5 1 -2.5 1 -3 0 M17 9.25c-.5 1 -2.5 1 -3 0"></path></symbol>
<symbol id="pplx-icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path></symbol>
<symbol id="pplx-icon-movie" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z M8 4l0 16 M16 4l0 16 M4 8l4 0 M4 16l4 0 M4 12l16 0 M16 8l4 0 M16 16l4 0"></path></symbol>
<symbol id="pplx-icon-music" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0 M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0 M9 17v-13h10v13 M9 8h10"></path></symbol>
<symbol id="pplx-icon-navigation" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 18.5l7.265 2.463c.196 .077 .42 .032 .57 -.116a.548 .548 0 0 0 .134 -.572l-7.969 -17.275l-7.97 17.275c-.07 .2 -.017 .424 .135 .572c.15 .148 .374 .193 .57 .116l7.265 -2.463"></path></symbol>
<symbol id="pplx-icon-news" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M16 6h3a1 1 0 0 1 1 1v11a2 2 0 0 1 -4 0v-13a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1v12a3 3 0 0 0 3 3h11 M8 8l4 0 M8 12l4 0 M8 16l4 0"></path></symbol>
<symbol id="pplx-icon-paint" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2 M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"></path></symbol>
<symbol id="pplx-icon-palette" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25 M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></symbol>
<symbol id="pplx-icon-paperclip" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7l-6.5 6.5a1.5 1.5 0 0 0 3 3l6.5 -6.5a3 3 0 0 0 -6 -6l-6.5 6.5a4.5 4.5 0 0 0 9 9l6.5 -6.5"></path></symbol>
<symbol id="pplx-icon-paw" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 13.5c-1.1 -2 -1.441 -2.5 -2.7 -2.5c-1.259 0 -1.736 .755 -2.836 2.747c-.942 1.703 -2.846 1.845 -3.321 3.291c-.097 .265 -.145 .677 -.143 .962c0 1.176 .787 2 1.8 2c1.259 0 3 -1 4.5 -1s3.241 1 4.5 1c1.013 0 1.8 -.823 1.8 -2c0 -.285 -.049 -.697 -.146 -.962c-.475 -1.451 -2.512 -1.835 -3.454 -3.538z M20.188 8.082a1.039 1.039 0 0 0 -.406 -.082h-.015c-.735 .012 -1.56 .75 -1.993 1.866c-.519 1.335 -.28 2.7 .538 3.052c.129 .055 .267 .082 .406 .082c.739 0 1.575 -.742 2.011 -1.866c.516 -1.335 .273 -2.7 -.54 -3.052z M9.474 9c.055 0 .109 0 .163 -.011c.944 -.128 1.533 -1.346 1.32 -2.722c-.203 -1.297 -1.047 -2.267 -1.932 -2.267c-.055 0 -.109 0 -.163 .011c-.944 .128 -1.533 1.346 -1.32 2.722c.204 1.293 1.048 2.267 1.933 2.267z M16.456 6.733c.214 -1.376 -.375 -2.594 -1.32 -2.722a1.164 1.164 0 0 0 -.162 -.011c-.885 0 -1.728 .97 -1.93 2.267c-.214 1.376 .375 2.594 1.32 2.722c.054 .007 .108 .011 .162 .011c.885 0 1.73 -.974 1.93 -2.267z M5.69 12.918c.816 -.352 1.054 -1.719 .536 -3.052c-.436 -1.124 -1.271 -1.866 -2.009 -1.866c-.14 0 -.277 .027 -.407 .082c-.816 .352 -1.054 1.719 -.536 3.052c.436 1.124 1.271 1.866 2.009 1.866c.14 0 .277 -.027 .407 -.082z"></path></symbol>
<symbol id="pplx-icon-pdf" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M10 8v8h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-2z M3 12h2a2 2 0 1 0 0 -4h-2v8 M17 12h3 M21 8h-4v8"></path></symbol>
<symbol id="pplx-icon-pencil" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4 M13.5 6.5l4 4"></path></symbol>
<symbol id="pplx-icon-percentage" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M17 17m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M7 7m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M6 18l12 -12"></path></symbol>
<symbol id="pplx-icon-phone" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2"></path></symbol>
<symbol id="pplx-icon-photo" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15 8h.01 M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5 M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3"></path></symbol>
<symbol id="pplx-icon-photo-bolt" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15 8h.01 M13.5 21h-7.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5 M3 16l5 -5c.928 -.893 2.072 -.893 3 0l4 4 M14 14l1 -1c.669 -.643 1.45 -.823 2.18 -.54 M19 16l-2 3h4l-2 3"></path></symbol>
<symbol id="pplx-icon-pig-money" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15 11v.01 M5.173 8.378a3 3 0 1 1 4.656 -1.377 M16 4v3.803a6.019 6.019 0 0 1 2.658 3.197h1.341a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-1.342c-.336 .95 -.907 1.8 -1.658 2.473v2.027a1.5 1.5 0 0 1 -3 0v-.583a6.04 6.04 0 0 1 -1 .083h-4a6.04 6.04 0 0 1 -1 -.083v.583a1.5 1.5 0 0 1 -3 0v-2l0 -.027a6 6 0 0 1 4 -10.473h2.5l4.5 -3h0z"></path></symbol>
<symbol id="pplx-icon-pin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15 4.5l-4 4l-4 1.5l-1.5 1.5l7 7l1.5 -1.5l1.5 -4l4 -4 M9 15l-4.5 4.5 M14.5 4l5.5 5.5"></path></symbol>
<symbol id="pplx-icon-pinned-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M16 3a1 1 0 0 1 .117 1.993l-.117 .007v4.764l1.894 3.789a1 1 0 0 1 .1 .331l.006 .116v2a1 1 0 0 1 -.883 .993l-.117 .007h-4v4a1 1 0 0 1 -1.993 .117l-.007 -.117v-4h-4a1 1 0 0 1 -.993 -.883l-.007 -.117v-2a1 1 0 0 1 .06 -.34l.046 -.107l1.894 -3.791v-4.762a1 1 0 0 1 -.117 -1.993l.117 -.007h8z"></path></symbol>
<symbol id="pplx-icon-pizza" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 21.5c-3.04 0 -5.952 -.714 -8.5 -1.983l8.5 -16.517l8.5 16.517a19.09 19.09 0 0 1 -8.5 1.983z M5.38 15.866a14.94 14.94 0 0 0 6.815 1.634a14.944 14.944 0 0 0 6.502 -1.479 M13 11.01v-.01 M11 14v-.01"></path></symbol>
<symbol id="pplx-icon-plane" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M16 10h4a2 2 0 0 1 0 4h-4l-4 7h-3l2 -7h-4l-2 2h-3l2 -4l-2 -4h3l2 2h4l-2 -7h3z"></path></symbol>
<symbol id="pplx-icon-plane-departure" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14.639 10.258l4.83 -1.294a2 2 0 1 1 1.035 3.863l-14.489 3.883l-4.45 -5.02l2.897 -.776l2.45 1.414l2.897 -.776l-3.743 -6.244l2.898 -.777l5.675 5.727z M3 21h18"></path></symbol>
<symbol id="pplx-icon-plane-inflight" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15 11.085h5a2 2 0 1 1 0 4h-15l-3 -6h3l2 2h3l-2 -7h3l4 7z M3 21h18"></path></symbol>
<symbol id="pplx-icon-plane-tilt" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 6.5l3 -2.9a2.05 2.05 0 0 1 2.9 2.9l-2.9 3l2.5 7.5l-2.5 2.55l-3.5 -6.55l-3 3v3l-2 2l-1.5 -4.5l-4.5 -1.5l2 -2h3l3 -3l-6.5 -3.5l2.5 -2.5l7.5 2.5z"></path></symbol>
<symbol id="pplx-icon-plant" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 15h10v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2v-4z M12 9a6 6 0 0 0 -6 -6h-3v2a6 6 0 0 0 6 6h3 M12 11a6 6 0 0 1 6 -6h3v1a6 6 0 0 1 -6 6h-3 M12 15l0 -6"></path></symbol>
<symbol id="pplx-icon-player-pause-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z"></path></symbol>
<symbol id="pplx-icon-player-play" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 4v16l13 -8z"></path></symbol>
<symbol id="pplx-icon-player-play-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z"></path></symbol>
<symbol id="pplx-icon-player-stop" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 5m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"></path></symbol>
<symbol id="pplx-icon-player-stop-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z"></path></symbol>
<symbol id="pplx-icon-player-track-next" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 5v14l8 -7z M14 5v14l8 -7z"></path></symbol>
<symbol id="pplx-icon-plug-connected" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 12l5 5l-1.5 1.5a3.536 3.536 0 1 1 -5 -5l1.5 -1.5z M17 12l-5 -5l1.5 -1.5a3.536 3.536 0 1 1 5 5l-1.5 1.5z M3 21l2.5 -2.5 M18.5 5.5l2.5 -2.5 M10 11l-2 2 M13 14l-2 2"></path></symbol>
<symbol id="pplx-icon-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5l0 14 M5 12l14 0"></path></symbol>
<symbol id="pplx-icon-point-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M12 7a5 5 0 1 1 -4.995 5.217l-.005 -.217l.005 -.217a5 5 0 0 1 4.995 -4.783z"></path></symbol>
<symbol id="pplx-icon-pointer-pause" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15.72 13.163l-.942 -.941l3.113 -2.09a1.2 1.2 0 0 0 -.309 -2.228l-13.582 -3.904l3.904 13.563a1.2 1.2 0 0 0 2.228 .308l2.09 -3.093l.969 .969 M17 17v5 M21 17v5"></path></symbol>
<symbol id="pplx-icon-presentation" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 4l18 0 M4 4v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-10 M12 16l0 4 M9 20l6 0 M8 12l3 -3l2 2l3 -3"></path></symbol>
<symbol id="pplx-icon-question-mark" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 8a3.5 3 0 0 1 3.5 -3h1a3.5 3 0 0 1 3.5 3a3 3 0 0 1 -2 3a3 4 0 0 0 -2 4 M12 19l0 .01"></path></symbol>
<symbol id="pplx-icon-quote" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M10 11h-4a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1h3a1 1 0 0 1 1 1v6c0 2.667 -1.333 4.333 -4 5 M19 11h-4a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1h3a1 1 0 0 1 1 1v6c0 2.667 -1.333 4.333 -4 5"></path></symbol>
<symbol id="pplx-icon-quote-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M9 5a2 2 0 0 1 2 2v6c0 3.13 -1.65 5.193 -4.757 5.97a1 1 0 1 1 -.486 -1.94c2.227 -.557 3.243 -1.827 3.243 -4.03v-1h-3a2 2 0 0 1 -1.995 -1.85l-.005 -.15v-3a2 2 0 0 1 2 -2z M18 5a2 2 0 0 1 2 2v6c0 3.13 -1.65 5.193 -4.757 5.97a1 1 0 1 1 -.486 -1.94c2.227 -.557 3.243 -1.827 3.243 -4.03v-1h-3a2 2 0 0 1 -1.995 -1.85l-.005 -.15v-3a2 2 0 0 1 2 -2z"></path></symbol>
<symbol id="pplx-icon-refresh" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4 M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"></path></symbol>
<symbol id="pplx-icon-repeat" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3 M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3"></path></symbol>
<symbol id="pplx-icon-report-money" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2 M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z M14 11h-2.5a1.5 1.5 0 0 0 0 3h1a1.5 1.5 0 0 1 0 3h-2.5 M12 17v1m0 -8v1"></path></symbol>
<symbol id="pplx-icon-report-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h5.697 M18 12v-5a2 2 0 0 0 -2 -2h-2 M8 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z M8 11h4 M8 15h3 M16.5 17.5m-2.5 0a2.5 2.5 0 1 0 5 0a2.5 2.5 0 1 0 -5 0 M18.5 19.5l2.5 2.5"></path></symbol>
<symbol id="pplx-icon-rewind-backward-15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 20h2a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-2v-3h3 M15 18a6 6 0 1 0 0 -12h-11 M5 14v6 M7 9l-3 -3l3 -3"></path></symbol>
<symbol id="pplx-icon-rewind-forward-15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M17 9l3 -3l-3 -3 M9 18a6 6 0 1 1 0 -12h11 M16 20h2a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-2v-3h3 M13 14v6"></path></symbol>
<symbol id="pplx-icon-rocket" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 13a8 8 0 0 1 7 7a6 6 0 0 0 3 -5a9 9 0 0 0 6 -8a3 3 0 0 0 -3 -3a9 9 0 0 0 -8 6a6 6 0 0 0 -5 3 M7 14a6 6 0 0 0 -3 6a6 6 0 0 0 6 -3 M15 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></symbol>
<symbol id="pplx-icon-rosette-discount-check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M5 7.2a2.2 2.2 0 0 1 2.2 -2.2h1a2.2 2.2 0 0 0 1.55 -.64l.7 -.7a2.2 2.2 0 0 1 3.12 0l.7 .7c.412 .41 .97 .64 1.55 .64h1a2.2 2.2 0 0 1 2.2 2.2v1c0 .58 .23 1.138 .64 1.55l.7 .7a2.2 2.2 0 0 1 0 3.12l-.7 .7a2.2 2.2 0 0 0 -.64 1.55v1a2.2 2.2 0 0 1 -2.2 2.2h-1a2.2 2.2 0 0 0 -1.55 .64l-.7 .7a2.2 2.2 0 0 1 -3.12 0l-.7 -.7a2.2 2.2 0 0 0 -1.55 -.64h-1a2.2 2.2 0 0 1 -2.2 -2.2v-1a2.2 2.2 0 0 0 -.64 -1.55l-.7 -.7a2.2 2.2 0 0 1 0 -3.12l.7 -.7a2.2 2.2 0 0 0 .64 -1.55v-1 M9 12l2 2l4 -4"></path></symbol>
<symbol id="pplx-icon-rotate-clockwise" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4.05 11a8 8 0 1 1 .5 4m-.5 5v-5h5"></path></symbol>
<symbol id="pplx-icon-scale" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 20l10 0 M6 6l6 -1l6 1 M12 3l0 17 M9 12l-3 -6l-3 6a3 3 0 0 0 6 0 M21 12l-3 -6l-3 6a3 3 0 0 0 6 0"></path></symbol>
<symbol id="pplx-icon-scan-eye" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 8v-2a2 2 0 0 1 2 -2h2 M4 16v2a2 2 0 0 0 2 2h2 M16 4h2a2 2 0 0 1 2 2v2 M16 20h2a2 2 0 0 0 2 -2v-2 M7 12c3.333 -4.667 6.667 -4.667 10 0 M7 12c3.333 4.667 6.667 4.667 10 0 M12 12h-.01"></path></symbol>
<symbol id="pplx-icon-school" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M22 9l-10 -4l-10 4l10 4l10 -4v6 M6 10.6v5.4a6 3 0 0 0 12 0v-5.4"></path></symbol>
<symbol id="pplx-icon-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0 M21 21l-6 -6"></path></symbol>
<symbol id="pplx-icon-selector" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 9l4 -4l4 4 M16 15l-4 4l-4 -4"></path></symbol>
<symbol id="pplx-icon-send" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M10 14l11 -11 M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5"></path></symbol>
<symbol id="pplx-icon-send-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4.698 4.034l16.302 7.966l-16.302 7.966a.503 .503 0 0 1 -.546 -.124a.555 .555 0 0 1 -.12 -.568l2.468 -7.274l-2.468 -7.274a.555 .555 0 0 1 .12 -.568a.503 .503 0 0 1 .546 -.124z M6.5 12h14.5"></path></symbol>
<symbol id="pplx-icon-server-bolt" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z M15 20h-9a3 3 0 0 1 -3 -3v-2a3 3 0 0 1 3 -3h12 M7 8v.01 M7 16v.01 M20 15l-2 3h3l-2 3"></path></symbol>
<symbol id="pplx-icon-server-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12h-6a3 3 0 0 1 -3 -3v-2c0 -1.083 .574 -2.033 1.435 -2.56m3.565 -.44h10a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-2 M16 12h2a3 3 0 0 1 3 3v2m-1.448 2.568a2.986 2.986 0 0 1 -1.552 .432h-12a3 3 0 0 1 -3 -3v-2a3 3 0 0 1 3 -3h6 M7 8v.01 M7 16v.01 M3 3l18 18"></path></symbol>
<symbol id="pplx-icon-settings" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"></path></symbol>
<symbol id="pplx-icon-settings-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M19.875 6.27a2.225 2.225 0 0 1 1.125 1.948v7.284c0 .809 -.443 1.555 -1.158 1.948l-6.75 4.27a2.269 2.269 0 0 1 -2.184 0l-6.75 -4.27a2.225 2.225 0 0 1 -1.158 -1.948v-7.285c0 -.809 .443 -1.554 1.158 -1.947l6.75 -3.98a2.33 2.33 0 0 1 2.25 0l6.75 3.98h-.033z M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path></symbol>
<symbol id="pplx-icon-shadow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0 M13 12h5 M13 15h4 M13 18h1 M13 9h4 M13 6h1"></path></symbol>
<symbol id="pplx-icon-share" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0 M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0 M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0 M8.7 10.7l6.6 -3.4 M8.7 13.3l6.6 3.4"></path></symbol>
<symbol id="pplx-icon-share-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1 M12 14v-11 M9 6l3 -3l3 3"></path></symbol>
<symbol id="pplx-icon-share-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M13 4v4c-6.575 1.028 -9.02 6.788 -10 12c-.037 .206 5.384 -5.962 10 -6v4l8 -7l-8 -7z"></path></symbol>
<symbol id="pplx-icon-shield" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3"></path></symbol>
<symbol id="pplx-icon-shield-check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M11.46 20.846a12 12 0 0 1 -7.96 -14.846a12 12 0 0 0 8.5 -3a12 12 0 0 0 8.5 3a12 12 0 0 1 -.09 7.06 M15 19l2 2l4 -4"></path></symbol>
<symbol id="pplx-icon-shield-check-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M11.998 2l.118 .007l.059 .008l.061 .013l.111 .034a.993 .993 0 0 1 .217 .112l.104 .082l.255 .218a11 11 0 0 0 7.189 2.537l.342 -.01a1 1 0 0 1 1.005 .717a13 13 0 0 1 -9.208 16.25a1 1 0 0 1 -.502 0a13 13 0 0 1 -9.209 -16.25a1 1 0 0 1 1.005 -.717a11 11 0 0 0 7.531 -2.527l.263 -.225l.096 -.075a.993 .993 0 0 1 .217 -.112l.112 -.034a.97 .97 0 0 1 .119 -.021l.115 -.007zm3.71 7.293a1 1 0 0 0 -1.415 0l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.32 1.497l2 2l.094 .083a1 1 0 0 0 1.32 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z"></path></symbol>
<symbol id="pplx-icon-shopping-bag" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6.331 8h11.339a2 2 0 0 1 1.977 2.304l-1.255 8.152a3 3 0 0 1 -2.966 2.544h-6.852a3 3 0 0 1 -2.965 -2.544l-1.255 -8.152a2 2 0 0 1 1.977 -2.304z M9 11v-5a3 3 0 0 1 6 0v5"></path></symbol>
<symbol id="pplx-icon-shopping-cart" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M17 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M17 17h-11v-14h-2 M6 5l14 1l-1 7h-13"></path></symbol>
<symbol id="pplx-icon-slash" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M17 5l-10 14"></path></symbol>
<symbol id="pplx-icon-slideshow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15 6l.01 0 M3 3m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z M3 13l4 -4a3 5 0 0 1 3 0l4 4 M13 12l2 -2a3 5 0 0 1 3 0l3 3 M8 21l.01 0 M12 21l.01 0 M16 21l.01 0"></path></symbol>
<symbol id="pplx-icon-social" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M12 14m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0 M12 7l0 4 M6.7 17.8l2.8 -2 M17.3 17.8l-2.8 -2"></path></symbol>
<symbol id="pplx-icon-source-code" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 4h2.5a3 3 0 0 1 3 3v10a3 3 0 0 1 -3 3h-10a3 3 0 0 1 -3 -3v-5 M6 5l-2 2l2 2 M10 9l2 -2l-2 -2"></path></symbol>
<symbol id="pplx-icon-spaces" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6.045 9.777a6 6 0 1 0 5.951 .023 M11.997 20.196a6 6 0 1 0 -2.948 -5.97 M17.95 9.785q .05 -.386 .05 -.785a6 6 0 1 0 -3.056 5.23"></path></symbol>
<symbol id="pplx-icon-sparkles" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M16 18a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm0 -12a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm-7 12a6 6 0 0 1 6 -6a6 6 0 0 1 -6 -6a6 6 0 0 1 -6 6a6 6 0 0 1 6 6z"></path></symbol>
<symbol id="pplx-icon-square" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"></path></symbol>
<symbol id="pplx-icon-square-check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z M9 12l2 2l4 -4"></path></symbol>
<symbol id="pplx-icon-square-forbid-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z M9 15l6 -6"></path></symbol>
<symbol id="pplx-icon-square-rounded-arrow-down" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 12l4 4l4 -4 M12 8v8 M12 3c7.2 0 9 1.8 9 9s-1.8 9 -9 9s-9 -1.8 -9 -9s1.8 -9 9 -9z"></path></symbol>
<symbol id="pplx-icon-square-rounded-check-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2c-.218 0 -.432 .002 -.642 .005l-.616 .017l-.299 .013l-.579 .034l-.553 .046c-4.785 .464 -6.732 2.411 -7.196 7.196l-.046 .553l-.034 .579c-.005 .098 -.01 .198 -.013 .299l-.017 .616l-.004 .318l-.001 .324c0 .218 .002 .432 .005 .642l.017 .616l.013 .299l.034 .579l.046 .553c.464 4.785 2.411 6.732 7.196 7.196l.553 .046l.579 .034c.098 .005 .198 .01 .299 .013l.616 .017l.642 .005l.642 -.005l.616 -.017l.299 -.013l.579 -.034l.553 -.046c4.785 -.464 6.732 -2.411 7.196 -7.196l.046 -.553l.034 -.579c.005 -.098 .01 -.198 .013 -.299l.017 -.616l.005 -.642l-.005 -.642l-.017 -.616l-.013 -.299l-.034 -.579l-.046 -.553c-.464 -4.785 -2.411 -6.732 -7.196 -7.196l-.553 -.046l-.579 -.034a28.058 28.058 0 0 0 -.299 -.013l-.616 -.017l-.318 -.004l-.324 -.001zm2.293 7.293a1 1 0 0 1 1.497 1.32l-.083 .094l-4 4a1 1 0 0 1 -1.32 .083l-.094 -.083l-2 -2a1 1 0 0 1 1.32 -1.497l.094 .083l1.293 1.292l3.293 -3.292z"></path></symbol>
<symbol id="pplx-icon-square-rounded-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2c-.218 0 -.432 .002 -.642 .005l-.616 .017l-.299 .013l-.579 .034l-.553 .046c-4.785 .464 -6.732 2.411 -7.196 7.196l-.046 .553l-.034 .579c-.005 .098 -.01 .198 -.013 .299l-.017 .616l-.004 .318l-.001 .324c0 .218 .002 .432 .005 .642l.017 .616l.013 .299l.034 .579l.046 .553c.464 4.785 2.411 6.732 7.196 7.196l.553 .046l.579 .034c.098 .005 .198 .01 .299 .013l.616 .017l.642 .005l.642 -.005l.616 -.017l.299 -.013l.579 -.034l.553 -.046c4.785 -.464 6.732 -2.411 7.196 -7.196l.046 -.553l.034 -.579c.005 -.098 .01 -.198 .013 -.299l.017 -.616l.005 -.642l-.005 -.642l-.017 -.616l-.013 -.299l-.034 -.579l-.046 -.553c-.464 -4.785 -2.411 -6.732 -7.196 -7.196l-.553 -.046l-.579 -.034a28.058 28.058 0 0 0 -.299 -.013l-.616 -.017l-.318 -.004l-.324 -.001z"></path></symbol>
<symbol id="pplx-icon-stack-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 4l-8 4l8 4l8 -4l-8 -4 M4 12l8 4l8 -4 M4 16l8 4l8 -4"></path></symbol>
<symbol id="pplx-icon-star" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"></path></symbol>
<symbol id="pplx-icon-star-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M8.243 7.34l-6.38 .925l-.113 .023a1 1 0 0 0 -.44 1.684l4.622 4.499l-1.09 6.355l-.013 .11a1 1 0 0 0 1.464 .944l5.706 -3l5.693 3l.1 .046a1 1 0 0 0 1.352 -1.1l-1.091 -6.355l4.624 -4.5l.078 -.085a1 1 0 0 0 -.633 -1.62l-6.38 -.926l-2.852 -5.78a1 1 0 0 0 -1.794 0l-2.853 5.78z"></path></symbol>
<symbol id="pplx-icon-star-half" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253z"></path></symbol>
<symbol id="pplx-icon-star-half-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M12 1a.993 .993 0 0 1 .823 .443l.067 .116l2.852 5.781l6.38 .925c.741 .108 1.08 .94 .703 1.526l-.07 .095l-.078 .086l-4.624 4.499l1.09 6.355a1.001 1.001 0 0 1 -1.249 1.135l-.101 -.035l-.101 -.046l-5.693 -3l-5.706 3c-.105 .055 -.212 .09 -.32 .106l-.106 .01a1.003 1.003 0 0 1 -1.038 -1.06l.013 -.11l1.09 -6.355l-4.623 -4.5a1.001 1.001 0 0 1 .328 -1.647l.113 -.036l.114 -.023l6.379 -.925l2.853 -5.78a.968 .968 0 0 1 .904 -.56zm0 3.274v12.476a1 1 0 0 1 .239 .029l.115 .036l.112 .05l4.363 2.299l-.836 -4.873a1 1 0 0 1 .136 -.696l.07 -.099l.082 -.09l3.546 -3.453l-4.891 -.708a1 1 0 0 1 -.62 -.344l-.073 -.097l-.06 -.106l-2.183 -4.424z"></path></symbol>
<symbol id="pplx-icon-star-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3l18 18 M10.012 6.016l1.981 -4.014l3.086 6.253l6.9 1l-4.421 4.304m.012 4.01l.588 3.426l-6.158 -3.245l-6.172 3.245l1.179 -6.873l-5 -4.867l6.327 -.917"></path></symbol>
<symbol id="pplx-icon-stethoscope" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6 4h-1a2 2 0 0 0 -2 2v3.5h0a5.5 5.5 0 0 0 11 0v-3.5a2 2 0 0 0 -2 -2h-1 M8 15a6 6 0 1 0 12 0v-3 M11 3v2 M6 3v2 M20 10m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path></symbol>
<symbol id="pplx-icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0 M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path></symbol>
<symbol id="pplx-icon-sunglasses-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M8 3a1 1 0 1 1 0 2h-1.257l-2.4 8h5.657a1 1 0 0 1 1 1v1h2v-1a1 1 0 0 1 1 -1h5.656l-2.4 -8h-1.256a1 1 0 0 1 -.993 -.883l-.007 -.117a1 1 0 0 1 1 -1h2a1 1 0 0 1 .958 .713l3.01 10.036l.022 .112l.008 .08l.002 2.559a4.5 4.5 0 0 1 -8.972 .5h-2.056a4.5 4.5 0 0 1 -8.972 -.5v-2.518l.004 -.071l.014 -.103l.018 -.076l3.006 -10.02a1 1 0 0 1 .958 -.712z"></path></symbol>
<symbol id="pplx-icon-table" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z M3 10h18 M10 3v18"></path></symbol>
<symbol id="pplx-icon-tag" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0 M3 6v5.172a2 2 0 0 0 .586 1.414l7.71 7.71a2.41 2.41 0 0 0 3.408 0l5.592 -5.592a2.41 2.41 0 0 0 0 -3.408l-7.71 -7.71a2 2 0 0 0 -1.414 -.586h-5.172a3 3 0 0 0 -3 3z"></path></symbol>
<symbol id="pplx-icon-terminal-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 9l3 3l-3 3 M13 15l3 0 M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"></path></symbol>
<symbol id="pplx-icon-test-pipe" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M20 8.04l-12.122 12.124a2.857 2.857 0 1 1 -4.041 -4.04l12.122 -12.124 M7 13h8 M19 15l1.5 1.6a2 2 0 1 1 -3 0l1.5 -1.6z M15 3l6 6"></path></symbol>
<symbol id="pplx-icon-thumb-down" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 13v-8a1 1 0 0 0 -1 -1h-2a1 1 0 0 0 -1 1v7a1 1 0 0 0 1 1h3a4 4 0 0 1 4 4v1a2 2 0 0 0 4 0v-5h3a2 2 0 0 0 2 -2l-1 -5a2 3 0 0 0 -2 -2h-7a3 3 0 0 0 -3 3"></path></symbol>
<symbol id="pplx-icon-thumb-down-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M13 21.008a3 3 0 0 0 2.995 -2.823l.005 -.177v-4h2a3 3 0 0 0 2.98 -2.65l.015 -.173l.005 -.177l-.02 -.196l-1.006 -5.032c-.381 -1.625 -1.502 -2.796 -2.81 -2.78l-.164 .008h-8a1 1 0 0 0 -.993 .884l-.007 .116l.001 9.536a1 1 0 0 0 .5 .866a2.998 2.998 0 0 1 1.492 2.396l.007 .202v1a3 3 0 0 0 3 3z M5 14.008a1 1 0 0 0 .993 -.883l.007 -.117v-9a1 1 0 0 0 -.883 -.993l-.117 -.007h-1a2 2 0 0 0 -1.995 1.852l-.005 .15v7a2 2 0 0 0 1.85 1.994l.15 .005h1z"></path></symbol>
<symbol id="pplx-icon-thumb-up" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 11v8a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-7a1 1 0 0 1 1 -1h3a4 4 0 0 0 4 -4v-1a2 2 0 0 1 4 0v5h3a2 2 0 0 1 2 2l-1 5a2 3 0 0 1 -2 2h-7a3 3 0 0 1 -3 -3"></path></symbol>
<symbol id="pplx-icon-thumb-up-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M13 3a3 3 0 0 1 2.995 2.824l.005 .176v4h2a3 3 0 0 1 2.98 2.65l.015 .174l.005 .176l-.02 .196l-1.006 5.032c-.381 1.626 -1.502 2.796 -2.81 2.78l-.164 -.008h-8a1 1 0 0 1 -.993 -.883l-.007 -.117l.001 -9.536a1 1 0 0 1 .5 -.865a2.998 2.998 0 0 0 1.492 -2.397l.007 -.202v-1a3 3 0 0 1 3 -3z M5 10a1 1 0 0 1 .993 .883l.007 .117v9a1 1 0 0 1 -.883 .993l-.117 .007h-1a2 2 0 0 1 -1.995 -1.85l-.005 -.15v-7a2 2 0 0 1 1.85 -1.995l.15 -.005h1z"></path></symbol>
<symbol id="pplx-icon-toggle-left" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M2 6m0 6a6 6 0 0 1 6 -6h8a6 6 0 0 1 6 6v0a6 6 0 0 1 -6 6h-8a6 6 0 0 1 -6 -6z"></path></symbol>
<symbol id="pplx-icon-toggle-right" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M16 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M2 6m0 6a6 6 0 0 1 6 -6h8a6 6 0 0 1 6 6v0a6 6 0 0 1 -6 6h-8a6 6 0 0 1 -6 -6z"></path></symbol>
<symbol id="pplx-icon-tool" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 10h3v-3l-3.5 -3.5a6 6 0 0 1 8 8l6 6a2 2 0 0 1 -3 3l-6 -6a6 6 0 0 1 -8 -8l3.5 3.5"></path></symbol>
<symbol id="pplx-icon-tools" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4 M14.5 5.5l4 4 M12 8l-5 -5l-4 4l5 5 M7 8l-1.5 1.5 M16 12l5 5l-4 4l-5 -5 M16 17l-1.5 1.5"></path></symbol>
<symbol id="pplx-icon-trash" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7l16 0 M10 11l0 6 M14 11l0 6 M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12 M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></symbol>
<symbol id="pplx-icon-trending-down" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 7l6 6l4 -4l8 8 M21 10l0 7l-7 0"></path></symbol>
<symbol id="pplx-icon-trending-up" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 17l6 -6l4 4l8 -8 M14 7l7 0l0 7"></path></symbol>
<symbol id="pplx-icon-triangle-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M12 1.67a2.914 2.914 0 0 0 -2.492 1.403l-8.11 13.537a2.914 2.914 0 0 0 2.484 4.385h16.225a2.914 2.914 0 0 0 2.503 -4.371l-8.116 -13.546a2.917 2.917 0 0 0 -2.494 -1.408z"></path></symbol>
<symbol id="pplx-icon-trophy" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 21l8 0 M12 17l0 4 M7 4l10 0 M17 4v8a5 5 0 0 1 -10 0v-8 M5 9m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M19 9m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path></symbol>
<symbol id="pplx-icon-truck" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0 M5 17h-2v-11a1 1 0 0 1 1 -1h9v12m-4 0h6m4 0h2v-6h-8m0 -5h5l3 5"></path></symbol>
<symbol id="pplx-icon-ufo" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M16.95 9.01c3.02 .739 5.05 2.123 5.05 3.714c0 2.367 -4.48 4.276 -10 4.276s-10 -1.909 -10 -4.276c0 -1.59 2.04 -2.985 5.07 -3.724 M7 9c0 1.105 2.239 2 5 2s5 -.895 5 -2v-.035c0 -2.742 -2.239 -4.965 -5 -4.965s-5 2.223 -5 4.965v.035 M15 17l2 3 M8.5 17l-1.5 3 M12 14h.01 M7 13h.01 M17 13h.01"></path></symbol>
<symbol id="pplx-icon-upload" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2 M7 9l5 -5l5 5 M12 4l0 12"></path></symbol>
<symbol id="pplx-icon-user" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0 M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path></symbol>
<symbol id="pplx-icon-user-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0 M12 10m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0 M6.168 18.849a4 4 0 0 1 3.832 -2.849h4a4 4 0 0 1 3.834 2.855"></path></symbol>
<symbol id="pplx-icon-user-filled" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a5 5 0 1 1 -5 5l.005 -.217a5 5 0 0 1 4.995 -4.783z M14 14a5 5 0 0 1 5 5v1a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-1a5 5 0 0 1 5 -5h4z"></path></symbol>
<symbol id="pplx-icon-user-heart" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0 M6 21v-2a4 4 0 0 1 4 -4h.5 M18 22l3.35 -3.284a2.143 2.143 0 0 0 .005 -3.071a2.242 2.242 0 0 0 -3.129 -.006l-.224 .22l-.223 -.22a2.242 2.242 0 0 0 -3.128 -.006a2.143 2.143 0 0 0 -.006 3.071l3.355 3.296z"></path></symbol>
<symbol id="pplx-icon-user-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0 M16 19h6 M19 16v6 M6 21v-2a4 4 0 0 1 4 -4h4"></path></symbol>
<symbol id="pplx-icon-user-scan" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M10 9a2 2 0 1 0 4 0a2 2 0 0 0 -4 0 M4 8v-2a2 2 0 0 1 2 -2h2 M4 16v2a2 2 0 0 0 2 2h2 M16 4h2a2 2 0 0 1 2 2v2 M16 20h2a2 2 0 0 0 2 -2v-2 M8 16a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2"></path></symbol>
<symbol id="pplx-icon-user-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0 M6 21v-2a4 4 0 0 1 4 -4h1.5 M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0 M20.2 20.2l1.8 1.8"></path></symbol>
<symbol id="pplx-icon-user-shield" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6 21v-2a4 4 0 0 1 4 -4h2 M22 16c0 4 -2.5 6 -3.5 6s-3.5 -2 -3.5 -6c1 0 2.5 -.5 3.5 -1.5c1 1 2.5 1.5 3.5 1.5z M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"></path></symbol>
<symbol id="pplx-icon-users" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0 M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2 M16 3.13a4 4 0 0 1 0 7.75 M21 21v-2a4 4 0 0 0 -3 -3.85"></path></symbol>
<symbol id="pplx-icon-users-group" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a2 2 0 1 0 4 0a2 2 0 0 0 -4 0 M8 21v-1a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v1 M15 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0 M17 10h2a2 2 0 0 1 2 2v1 M5 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0 M3 13v-1a2 2 0 0 1 2 -2h2"></path></symbol>
<symbol id="pplx-icon-video" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z M3 6m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"></path></symbol>
<symbol id="pplx-icon-wand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M6 21l15 -15l-3 -3l-15 15l3 3 M15 6l3 3 M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2 M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"></path></symbol>
<symbol id="pplx-icon-world" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0 M3.6 9h16.8 M3.6 15h16.8 M11.5 3a17 17 0 0 0 0 18 M12.5 3a17 17 0 0 1 0 18"></path></symbol>
<symbol id="pplx-icon-world-exclamation" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M20.986 12.51a9 9 0 1 0 -5.71 7.873 M3.6 9h16.8 M3.6 15h10.9 M11.5 3a17 17 0 0 0 0 18 M12.5 3a17 17 0 0 1 0 18 M19 16v3 M19 22v.01"></path></symbol>
<symbol id="pplx-icon-world-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 0 -9 9 M3.6 9h16.8 M3.6 15h7.9 M11.5 3a17 17 0 0 0 0 18 M12.5 3a16.984 16.984 0 0 1 2.574 8.62 M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0 M20.2 20.2l1.8 1.8"></path></symbol>
<symbol id="pplx-icon-world-share" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M20.94 13.045a9 9 0 1 0 -8.953 7.955 M3.6 9h16.8 M3.6 15h9.4 M11.5 3a17 17 0 0 0 0 18 M12.5 3a16.991 16.991 0 0 1 2.529 10.294 M16 22l5 -5 M21 21.5v-4.5h-4.5"></path></symbol>
<symbol id="pplx-icon-x" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6l-12 12 M6 6l12 12"></path></symbol>
<symbol id="pplx-icon-zoom-money" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0 M21 21l-6 -6 M12 7h-2.5a1.5 1.5 0 0 0 0 3h1a1.5 1.5 0 0 1 0 3h-2.5 M10 13v1m0 -8v1"></path></symbol>
<symbol id="pplx-icon-zoom-out" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0 M7 10l6 0 M21 21l-6 -6"></path></symbol>
<symbol id="pplx-icon-zoom-out-area" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M13 15h4 M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0 M22 22l-3 -3 M6 18h-1a2 2 0 0 1 -2 -2v-1 M3 11v-1 M3 6v-1a2 2 0 0 1 2 -2h1 M10 3h1 M15 3h1a2 2 0 0 1 2 2v1"></path></symbol>
</svg>
</div><div id="pplx-logo-sprites" style="display: none;"><svg xmlns="http://www.w3.org/2000/svg" style="display:none">
  <!-- Mark Logo -->
  <symbol id="pplx-logo-mark">
    <path fill="currentColor" fillrule="evenodd" cliprule="evenodd" d="M15 0.124727C15.4832 0.124727 15.8748 0.516607 15.875 0.999727V8.88645L24.3809 0.380586C24.6311 0.130476 25.0081 0.0557816 25.335 0.191133C25.6618 0.326537 25.8749 0.645944 25.875 0.999727V10.1003H28.75L28.8398 10.1052C29.2809 10.1502 29.625 10.5224 29.625 10.9753V23.5007C29.6246 23.9836 29.233 24.3757 28.75 24.3757H25.875V30.9997C25.875 31.3536 25.6619 31.6729 25.335 31.8083C25.008 31.9438 24.6311 31.8691 24.3809 31.6189L15.875 23.113V30.9997C15.875 31.483 15.4832 31.8747 15 31.8747C14.5168 31.8747 14.125 31.483 14.125 30.9997V23.113L5.61914 31.6189C5.36889 31.8691 4.992 31.9438 4.66504 31.8083C4.33815 31.6729 4.125 31.3536 4.125 30.9997V24.3757H1.25C0.76699 24.3757 0.375388 23.9836 0.375 23.5007V10.9753C0.375 10.4921 0.766751 10.1003 1.25 10.1003H4.125V0.999727C4.12511 0.645944 4.33818 0.326537 4.66504 0.191133C4.99192 0.0557816 5.36892 0.130476 5.61914 0.380586L14.125 8.88645V0.999727C14.1252 0.516607 14.5168 0.124727 15 0.124727ZM5.875 20.1462V28.8864L14.125 20.6364V12.9275L5.875 20.1462ZM15.875 20.6364L24.125 28.8864V20.1462L15.875 12.9275V20.6364ZM2.125 22.6257H4.125V19.7497L4.12988 19.656C4.15334 19.4388 4.25778 19.2369 4.42383 19.0915L12.6992 11.8503H5.20312C5.13787 11.8658 5.07001 11.8747 5 11.8747C4.92999 11.8747 4.86213 11.8658 4.79688 11.8503H2.125V22.6257ZM25.5762 19.0915C25.7659 19.2576 25.8749 19.4976 25.875 19.7497V22.6257H27.875V11.8503H25.2031C25.1379 11.8658 25.07 11.8747 25 11.8747C24.93 11.8747 24.8621 11.8658 24.7969 11.8503H17.3008L25.5762 19.0915ZM5.875 10.1003H12.8623L5.875 3.11301V10.1003ZM17.1377 10.1003H24.125V3.11301L17.1377 10.1003Z"></path>
  </symbol>

  <!-- Full Logo -->
  <symbol id="pplx-logo-full">
    <path fill="var(--logo-fill, currentColor)" d="M196.978 27.8931H200.033V34.1872H196.079C192.979 34.1872 190.669 34.9333 189.14 36.4254C187.615 37.9176 186.85 40.3662 186.85 43.7711V64.401H180.606V28.0333H186.85V33.8367C186.85 34.1622 187.014 34.3274 187.337 34.3274C187.52 34.3274 187.659 34.2823 187.754 34.1872C187.848 34.0921 187.938 33.9068 188.032 33.6264C189.234 29.8058 192.219 27.8931 196.983 27.8931H196.978ZM237.763 35.6894C239.402 38.6036 240.227 42.1137 240.227 46.2146C240.227 50.3156 239.407 53.8257 237.763 56.7399C236.119 59.6541 233.993 61.8323 231.38 63.2794C228.767 64.7265 225.956 65.4476 222.951 65.4476C217.03 65.4476 212.868 63.0691 210.464 58.3122C210.28 57.9417 210.046 57.7514 209.768 57.7514C209.49 57.7514 209.351 57.8916 209.351 58.172V77.6853H203.107V28.0333H209.351V34.2573C209.351 34.5377 209.49 34.6779 209.768 34.6779C210.046 34.6779 210.275 34.4926 210.464 34.1171C212.868 29.3602 217.03 26.9817 222.951 26.9817C225.956 26.9817 228.767 27.7028 231.38 29.1499C233.993 30.597 236.119 32.7751 237.763 35.6894ZM233.983 46.2146C233.983 41.9234 232.841 38.5786 230.551 36.1801C228.261 33.7816 225.246 32.5799 221.496 32.5799C217.745 32.5799 214.73 33.7816 212.44 36.1801C210.151 38.5836 209.311 41.9284 209.311 46.2146C209.311 50.5009 210.151 53.8507 212.44 56.2492C214.73 58.6527 217.75 59.8494 221.496 59.8494C225.241 59.8494 228.261 58.6477 230.551 56.2492C232.841 53.8507 233.983 50.5009 233.983 46.2146ZM134.595 35.7445C136.235 38.6587 137.059 42.1688 137.059 46.2697C137.059 50.3707 136.24 53.8808 134.595 56.795C132.951 59.7092 130.825 61.8874 128.213 63.3345C125.6 64.7816 122.788 65.5026 119.783 65.5026C113.863 65.5026 109.7 63.1242 107.296 58.3673C107.112 57.9967 106.879 57.8065 106.601 57.8065C106.322 57.8065 106.183 57.9467 106.183 58.2271V77.7404H99.9446V28.0883H106.188V34.3124C106.188 34.5928 106.327 34.733 106.606 34.733C106.884 34.733 107.112 34.5477 107.301 34.1722C109.705 29.4153 113.867 27.0368 119.788 27.0368C122.793 27.0368 125.605 27.7579 128.218 29.205C130.83 30.6521 132.956 32.8302 134.6 35.7445H134.595ZM130.815 46.2697C130.815 41.9785 129.673 38.6336 127.383 36.2352C125.093 33.8367 122.078 32.6349 118.328 32.6349C114.578 32.6349 111.563 33.8367 109.273 36.2352C106.983 38.6387 106.144 41.9835 106.144 46.2697C106.144 50.5559 106.983 53.9058 109.273 56.3043C111.563 58.7078 114.578 59.9045 118.328 59.9045C122.078 59.9045 125.093 58.7028 127.383 56.3043C129.673 53.9058 130.815 50.5559 130.815 46.2697ZM169.112 52.8543H175.703C174.824 56.2592 173.031 59.2085 170.329 61.7021C167.622 64.1957 163.748 65.4425 158.706 65.4425C154.911 65.4425 151.573 64.6614 148.682 63.0991C145.791 61.5369 143.561 59.3137 141.986 56.4195C140.412 53.5303 139.627 50.1253 139.627 46.2096C139.627 42.294 140.392 38.889 141.917 35.9998C143.442 33.1106 145.583 30.8824 148.335 29.3201C151.086 27.7579 154.31 26.9767 158.011 26.9767C161.711 26.9767 164.776 27.7479 167.344 29.2851C169.912 30.8223 171.829 32.8653 173.101 35.404C174.372 37.9477 175.008 40.7317 175.008 43.7611V47.9572H146.219C146.447 51.5925 147.664 54.4867 149.859 56.6298C152.055 58.7729 155.005 59.8494 158.706 59.8494C161.711 59.8494 164.016 59.2335 165.61 57.9967C167.205 56.7599 168.372 55.0475 169.112 52.8543ZM146.288 42.7146H168.074C168.074 39.545 167.264 37.0614 165.645 35.2638C164.026 33.4712 161.483 32.5699 158.015 32.5699C154.777 32.5699 152.129 33.4461 150.073 35.1937C148.017 36.9412 146.755 39.4498 146.293 42.7096L146.288 42.7146ZM245.169 64.396H251.413V14.043H245.169V64.401V64.396ZM331.801 24.0625H339.093V16.1911H331.801V24.0625ZM357.526 58.9782C356.393 59.0933 355.708 59.1534 355.479 59.1534C355.156 59.1534 354.898 59.0583 354.714 58.873C354.531 58.6877 354.436 58.4324 354.436 58.1019C354.436 57.8716 354.496 57.1806 354.61 56.0389C354.724 54.8972 354.784 53.1347 354.784 50.7612V33.361H363.69L361.937 28.0333H354.789V18.2391H348.545V28.0283H341.755V33.356H348.545V52.5038C348.545 56.5146 349.519 59.4989 351.461 61.4568C353.403 63.4146 356.363 64.396 360.342 64.396H365.2V58.8029H362.771C360.412 58.8029 358.663 58.863 357.531 58.9782H357.526ZM394.059 28.0283L383.723 58.5425C383.583 58.9181 383.365 59.4088 382.655 59.4088C381.944 59.4088 381.726 58.9181 381.587 58.5425L371.25 28.0283H364.882L376.853 64.396H381.085C381.363 64.396 381.572 64.4211 381.711 64.4661C381.85 64.5112 381.964 64.6264 382.059 64.8166C382.242 65.097 382.217 65.5177 381.989 66.0735L380.047 71.3862C379.769 72.0872 379.237 72.4377 378.452 72.4377C378.174 72.4377 377.529 72.3776 376.51 72.2624C375.492 72.1473 374.176 72.0872 372.556 72.0872H367.49V77.6803H374.151C378.035 77.6803 380.375 77.0143 382.386 75.6874C384.398 74.3605 385.958 72.0171 387.07 68.6572L400 29.4203V28.0233H394.059V28.0283ZM311.406 41.5979L301.626 28.0283H294.756V29.4253L306.478 45.1631L292.188 62.999V64.396H299.197L310.576 49.7798L321.191 64.396H327.922V62.999L315.504 46.2146L328.965 29.5004V28.0333H321.956L311.411 41.603L311.406 41.5979ZM332.467 64.396H338.71V28.0333H332.467V64.401V64.396ZM292.471 52.8543C291.592 56.2592 289.799 59.2085 287.097 61.7021C284.39 64.1957 280.515 65.4425 275.474 65.4425C271.679 65.4425 268.341 64.6614 265.45 63.0991C262.559 61.5369 260.329 59.3137 258.754 56.4195C257.18 53.5303 256.395 50.1253 256.395 46.2096C256.395 42.294 257.16 38.889 258.685 35.9998C260.21 33.1106 262.35 30.8824 265.102 29.3201C267.854 27.7579 271.078 26.9767 274.778 26.9767C278.479 26.9767 281.543 27.7479 284.111 29.2851C286.679 30.8223 288.597 32.8653 289.868 35.404C291.14 37.9477 291.776 40.7317 291.776 43.7611V47.9572H262.986C263.215 51.5925 264.432 54.4867 266.627 56.6298C268.823 58.7729 271.773 59.8494 275.474 59.8494C278.479 59.8494 280.783 59.2335 282.378 57.9967C283.972 56.7599 285.14 55.0475 285.88 52.8543H292.471ZM263.056 42.7146H284.842C284.842 39.545 284.032 37.0614 282.413 35.2638C280.793 33.4712 278.25 32.5699 274.783 32.5699C271.545 32.5699 268.897 33.4461 266.841 35.1937C264.784 36.9412 263.523 39.4498 263.061 42.7096L263.056 42.7146Z"></path>
    <path fill="none" stroke="var(--logo-stroke, currentColor)" class="transition-all duration-300" stroke-width="4.30504" stroke-miterlimit="10" d="M38.6936 29.9832L12.8633 5.88983V29.9832H38.6936Z M39.5005 29.9832L65.3308 5.88983V29.9832H39.5005Z M38.7227 2L38.7227 90.2534 M64.5246 53.7584L38.6943 30.0068V62.9404L64.5246 85.9724V53.7584Z M12.8924 53.7584L38.7227 30.0068V62.9404L12.8924 85.9724V53.7584Z M2.28711 29.9832V64.4236H12.8863V53.7348L38.7226 29.9832H2.28711Z M38.6943 30.3L64.5246 54.0515V64.7403H75.2872V30.3L38.6943 30.3Z"></path>
  </symbol>

  <!-- Labs Logo -->
  <symbol id="pplx-logo-labs">
    <path fill="currentColor" d="M311.555 34.9571C330.01 34.9571 344.672 45.7532 344.672 65.084C344.672 84.4148 330.01 95.3568 311.555 95.3568H279.094V140H265.817V34.9571H311.555ZM279.094 84.0501H309.585C322.643 84.0501 331.396 77.1931 331.396 65.157C331.396 53.0478 322.643 46.2638 309.585 46.2638H279.094V84.0501ZM353.444 102.797C353.444 77.7037 367.669 63.9169 390.209 63.9169C412.823 63.9169 425.151 77.8496 425.151 99.5877V105.934H365.918C366.137 121.399 375.255 131.465 390.209 131.465C404.434 131.465 410.926 123.587 412.093 116.73H423.619V118.918C421.868 128.037 413.187 141.751 390.355 141.751C367.815 141.751 353.444 127.964 353.444 102.797ZM366.064 95.8674H412.896C412.75 83.2477 405.09 74.1294 390.136 74.1294C375.474 74.1294 367.085 83.3936 366.064 95.8674ZM447.732 65.6676H460.133V76.1719H461.3C464.218 69.8985 469.908 65.4487 483.257 65.4487H500.691V76.3907H483.549C467.501 76.3907 460.571 84.7795 460.571 101.849V140H447.732V65.6676ZM517.092 169.179V65.6676H529.638V75.8801H530.805C536.349 67.3453 545.322 63.9898 555.826 63.9898C575.157 63.9898 589.965 77.1202 589.965 102.87C589.965 128.547 575.157 141.678 555.826 141.678C545.541 141.678 536.641 138.395 531.097 130.152H529.93V169.179H517.092ZM529.492 102.87C529.492 120.888 539.121 131.028 553.2 131.028C567.425 131.028 576.981 120.888 576.981 102.87C576.981 84.7795 567.425 74.64 553.2 74.64C539.121 74.64 529.492 84.7795 529.492 102.87ZM637.266 34.9571V129.642H651.272V140H605.899V129.642H624.428V45.2426H610.276V34.9571H637.266ZM665.9 102.797C665.9 77.7037 680.125 63.9169 702.665 63.9169C725.278 63.9169 737.606 77.8496 737.606 99.5877V105.934H678.374C678.593 121.399 687.711 131.465 702.665 131.465C716.89 131.465 723.382 123.587 724.549 116.73H736.074V118.918C734.324 128.037 725.643 141.751 702.811 141.751C680.27 141.751 665.9 127.964 665.9 102.797ZM678.52 95.8674H725.351C725.205 83.2477 717.546 74.1294 702.592 74.1294C687.93 74.1294 679.541 83.3936 678.52 95.8674ZM752.566 65.6676H765.696L786.851 93.3143H788.018L810.85 65.6676H823.762V67.856L795.313 102.36L822.522 137.812V140H809.391L787.289 111.186H786.121L762.414 140H749.502V137.812L778.827 102.214L752.566 67.856V65.6676ZM871.43 65.6676V129.642H885.436V140H840.063V129.642H858.591V75.953H844.44V65.6676H871.43ZM857.205 52.9749V38.8962H872.087V52.9749H857.205ZM896.344 65.6676H919.613V43.8566H932.452V65.6676H962.068V76.0989H932.452V127.745L933.619 128.912H961.849V140H938.725C926.543 140 919.613 133.945 919.613 121.836V76.0989H896.344V65.6676ZM973.245 65.6676H986.302L1010.01 124.681H1011.18L1034.81 65.6676H1047.5V67.856L1004.76 169.179H991.992V166.99L1003.66 139.927L973.245 67.856V65.6676ZM1116.67 34.9571H1130.09V128.256H1189.03V140H1116.67V34.9571ZM1205.12 86.3114C1206.66 72.5245 1218.55 63.9169 1237.95 63.9169C1257.21 63.9169 1268.59 72.5245 1268.59 91.0529V140H1256.62V129.787H1255.46C1252.25 135.477 1244.66 141.605 1229.05 141.605C1212.78 141.605 1201.55 133.508 1201.55 119.648C1201.55 104.913 1212.78 98.4205 1227.96 96.5239L1256.19 93.0225V90.3235C1256.19 78.725 1249.84 74.1294 1237.66 74.1294C1225.4 74.1294 1218.18 78.725 1217.16 88.4998H1205.12V86.3114ZM1214.31 119.064C1214.31 126.797 1220.88 131.246 1231.17 131.246C1244.88 131.246 1256.19 123.952 1256.19 107.539V102.943L1230.51 106.299C1220.52 107.612 1214.31 111.259 1214.31 119.064ZM1291.61 34.9571H1304.44V75.5153H1305.61C1311.16 67.1995 1320.06 63.9898 1330.34 63.9898C1349.67 63.9898 1364.48 77.1202 1364.48 102.87C1364.48 128.547 1349.67 141.678 1330.34 141.678C1319.84 141.678 1310.86 138.322 1305.32 129.787H1304.15V140H1291.61V34.9571ZM1304.01 102.87C1304.01 120.888 1313.64 131.028 1327.71 131.028C1341.94 131.028 1351.49 120.888 1351.49 102.87C1351.49 84.7795 1341.94 74.64 1327.71 74.64C1313.64 74.64 1304.01 84.7795 1304.01 102.87ZM1381.07 85.1443C1381.07 71.941 1392.52 63.9898 1411.78 63.9898C1431.18 63.9898 1443 71.941 1444.17 86.0926V88.281H1432.42C1431.91 77.9955 1423.74 74.1294 1411.85 74.1294C1400.04 74.1294 1393.4 77.9226 1393.4 84.8525C1393.4 91.7824 1399.09 94.4085 1407.19 95.3568L1419.95 96.9616C1434.98 98.7853 1445.41 105.132 1445.41 118.773C1445.41 132.487 1434.54 141.678 1413.9 141.678C1393.25 141.678 1380.34 132.559 1379.39 119.064V116.876H1391.36C1392.09 126.943 1401.28 131.538 1413.9 131.538C1426.59 131.538 1433.01 126.87 1433.01 119.429C1433.01 112.134 1426.95 108.852 1417.18 107.612L1404.41 106.007C1390.41 104.329 1381.07 98.2017 1381.07 85.1443Z"></path>
    <path fill="currentColor" d="M59.4967 39.8367C30.9654 39.8367 7.83624 62.9671 7.83624 91.5C7.83624 120.033 30.9654 143.163 59.4967 143.163C83.9985 143.163 104.516 126.105 109.823 103.216H117.84C112.399 130.466 88.3457 151 59.4967 151C26.6376 151 0 124.361 0 91.5C0 58.639 26.6376 32 59.4967 32C91.0393 32 116.849 56.5473 118.866 87.5817H155.879L123.292 54.9276L128.838 49.3918L161.428 82.0483L161.387 35.9218L169.223 35.9149L169.264 82.0641L201.87 49.3918L207.416 54.9276L174.829 87.5817H221V95.4183H174.771L207.416 128.131L201.87 133.667L169.281 101.011L169.321 147.157L161.485 147.163L161.444 100.993L128.838 133.667L123.292 128.131L155.937 95.4183H129.748V95.3791H84.6892V95.4183H59.495V87.5817H111.011C109.008 60.8792 86.7098 39.8367 59.4967 39.8367Z"></path>
  </symbol>

  <!-- Pro Logo (regular) -->
  <symbol id="pplx-logo-pro">
    <path fill="currentColor" d="M558.95,126.72c-27.44,27.72-27.17,101.45,0,129.38,25.44,28.65,83.99,28.94,109.2,0h0c13.9-14.68,20.94-38.51,20.94-64.92,0-26.44-7.04-50.1-20.98-64.5-25.23-29.51-83.73-29.21-109.17.04Z"></path>
    <path fill="currentColor" d="M780.18,91.05l-.13-.24c-16.48-29.44-40.65-53.13-69.89-68.52l-.17-.09c-27.73-14.73-58.76-22.2-92.21-22.2H30.68C14.13,0,.71,13.4.68,29.94l-.68,352.42h61.16V69.44h51.68v20.46c0,2.11,2.57,3.13,4.03,1.6,47.58-52.18,144.58-36.94,178.65,27.45,11.54,19.66,17.39,43.96,17.39,72.23,1.63,73.04-48.06,131.68-120.25,131.21-32.37,0-57.81-12.59-75.79-31.52-1.45-1.53-4.03-.51-4.03,1.6v89.9h504.93c33.45,0,64.43-7.45,92.09-22.14l.17-.09c29.33-15.43,53.53-39.13,69.99-68.53l.14-.25c16.31-28.74,24.58-62.44,24.58-100.17s-8.27-71.4-24.57-100.13ZM479.99,118.23c-23.81.5-56.08-3.74-72.26,13-8.74,8.61-13.17,23.4-13.17,43.96v140.34h-51.67V69.44h51.67v20.46c0,2.35,3.08,3.22,4.32,1.22,5.01-8.06,10.34-13.58,16.12-16.74,9.81-5.62,23.28-8.48,40.05-8.48h24.94v52.31ZM613.77,322.39c-75.99.52-128.52-54.09-127-131.21,0-27.33,5.53-51.14,16.45-70.78,43.24-80.65,177.73-80.74,220.65-.03,11.22,19.65,16.91,43.48,16.91,70.8,1.27,76.58-51.1,131.74-127,131.21Z"></path>
    <path fill="currentColor" d="M240.29,256.1h0c13.9-14.68,20.94-38.51,20.94-64.92,0-26.44-7.04-50.1-20.98-64.5-25.23-29.51-83.73-29.21-109.17.04-27.44,27.72-27.18,101.45,0,129.38,25.44,28.65,83.99,28.94,109.20,0Z"></path>
  </symbol>

  <!-- Pro Logo (small) -->
  <symbol id="pplx-logo-pro-small">
    <path fill="currentColor" d="M1068.23,126.49c-23.5-41.68-58.35-75.11-100.77-96.67C928.5,10.04,884.37,0,836.29,0H66.16C29.56,0-.08,29.71,0,66.3l1,463.16h109.72V107.9h78.16v24.37c0,2.66,3.19,3.99,5.1,2.13,20.89-20.25,50.62-30.5,88.64-30.5,26.8,0,51.2,6.11,72.52,18.17,21.44,12.13,38.59,30.51,50.96,54.66h0c12.27,23.95,18.49,53.6,18.49,88.14s-6.22,63.91-18.49,87.85c-12.37,24.14-29.52,42.53-50.96,54.66-21.33,12.06-45.73,18.17-72.52,18.17-16.55,0-55.7-2.68-87.27-25.54-1.98-1.43-4.75-.01-4.75,2.43v127.02h645.68c48.09,0,92.22-10.03,131.18-29.83,42.41-21.55,77.26-54.98,100.78-96.69,22.41-39.76,33.78-86.22,33.78-138.07s-11.37-98.6-33.79-138.39ZM650.3,177.46h-33.53c-23.25,0-40.37,6.1-50.86,18.14-10.7,12.27-16.12,32.09-16.12,58.91v164.71h-79.89V107.9h77.01v20.91c0,2.68,3.28,4.04,5.13,2.11,4.56-4.76,9.87-8.79,15.89-12.06,11.94-6.49,28.27-9.77,48.55-9.77h33.81v68.37ZM967.21,352.21c-13.66,24.23-33.03,42.83-57.56,55.29-24.32,12.36-52.71,18.62-84.38,18.62s-60.35-6.27-84.67-18.62c-24.54-12.46-43.9-31.07-57.56-55.29-13.58-24.09-20.47-53.47-20.47-87.34s6.89-63.54,20.47-87.63c13.65-24.22,33.02-42.82,57.56-55.29,24.33-12.36,52.81-18.62,84.67-18.62s60.06,6.27,84.38,18.62c24.53,12.47,43.9,31.07,57.56,55.29,13.58,24.1,20.47,53.58,20.47,87.63s-6.89,63.25-20.47,87.34Z"></path>
    <path fill="currentColor" d="M868.46,179.51c-12.16-7.28-26.7-10.97-43.2-10.97s-31.32,3.69-43.48,10.97c-12.07,7.23-21.57,18.05-28.23,32.16-6.79,14.4-10.23,32.3-10.23,53.2s3.45,38.57,10.24,53.07c6.66,14.2,16.19,25.06,28.35,32.28,12.26,7.29,26.85,10.98,43.36,10.98s31.04-3.69,43.2-10.97c12.07-7.23,21.56-18.09,28.22-32.29,6.79-14.5,10.24-32.35,10.24-53.07s-3.45-38.57-10.24-53.07c-6.66-14.2-16.15-25.07-28.22-32.29Z"></path>
    <path fill="currentColor" d="M221.1,351.54c12.26,7.29,26.85,10.98,43.36,10.98s31.04-3.69,43.2-10.97c12.07-7.23,21.56-18.09,28.22-32.29,6.79-14.5,10.24-32.35,10.24-53.07s-3.45-38.57-10.24-53.07c-6.66-14.2-16.15-25.06-28.22-32.29-12.16-7.28-26.7-10.97-43.19-10.97s-31.32,3.69-43.48,10.97c-12.07,7.23-21.57,18.05-28.23,32.16-6.79,14.4-10.23,32.3-10.23,53.2s3.45,38.57,10.24,53.07c6.66,14.2,16.19,25.06,28.35,32.28Z"></path>
  </symbol>

  <!-- Max Logo -->
  <symbol id="pplx-logo-max">
    <path fill="currentColor" d="M50.0858 22.3525C50.0858 23.9034 51.4144 24.8675 53.5527 24.8675C55.1684 24.8675 56.5468 24.3911 57.5393 23.4903C58.5991 22.5277 59.1595 21.1074 59.1595 19.3821V19.3262L53.1962 19.956C51.1311 20.147 50.0858 20.9534 50.0858 22.3525Z"></path>
    <path fill="currentColor" d="M96.7015 8.60077C95.1033 5.76707 92.7331 3.49361 89.8477 2.02806C87.198 0.682565 84.1956 0 80.925 0H4.46551C1.9767 0.000755049 -0.00527674 2.02051 1.0554e-05 4.5084V36H80.925C83.8489 36 86.556 35.4503 88.9904 34.3736L78.7837 21.1444H78.5571L72.8105 28.5922H67.2136V27.4883L75.0795 17.6697L67.2136 7.851V6.74712H72.8105L78.5571 14.1949H78.7837L84.5302 6.74712H90.1264V7.851L82.2612 17.6697L93.3728 31.5407C94.6878 30.3568 95.8171 28.9675 96.7023 27.3977C98.2266 24.6946 99 21.5355 99 18.0102C99 14.4849 98.2266 11.3054 96.7015 8.60077ZM40.5936 28.593H35.122V14.6268C35.122 13.5886 34.8214 12.7392 34.2518 12.1699C33.6612 11.5794 32.8009 11.2804 31.6951 11.2804C30.0009 11.2804 27.1586 11.926 27.1586 16.2517V28.593H21.687V14.6268C21.687 13.5886 21.3863 12.7392 20.8168 12.1699C20.2262 11.5794 19.3658 11.2804 18.26 11.2804C16.5658 11.2804 13.7228 11.926 13.7228 16.2517V28.593H8.29124V7.35569H13.5649V9.06814C13.5649 9.20934 13.7402 9.27276 13.8308 9.16479C14.25 8.66721 14.7236 8.2693 15.2788 7.94236C16.3883 7.29 17.8182 6.96005 19.5275 6.96005C21.2368 6.96005 22.8419 7.38212 24.0602 8.21418C24.9538 8.82426 25.5248 9.54835 25.8828 10.1554C25.938 10.2498 26.0739 10.2543 26.1358 10.1645C27.5997 8.0375 29.88 6.9608 32.9232 6.9608C35.1363 6.9608 37.0239 7.60184 38.3812 8.81445C39.8277 10.1063 40.5928 11.9932 40.5928 14.2704L40.5936 28.593ZM64.5518 28.593H59.2781V26.5407C59.2781 26.4033 59.1074 26.3361 59.016 26.4388C57.5076 28.1316 55.3406 28.9894 52.5625 28.9894C47.7344 28.9894 44.6149 26.5083 44.6149 22.6696C44.6149 20.7261 45.3718 19.1699 46.8658 18.0449C48.1733 17.0596 49.9838 16.4503 52.249 16.2321L59.1603 15.5148V14.8647C59.1603 12.2658 57.806 11.0033 55.0203 11.0033C53.1093 11.0033 50.6885 11.6119 50.366 14.5105L50.3282 14.8458H45.1097C45.1097 14.8458 45.0863 14.4154 45.1746 13.8129C45.7978 9.61102 49.7542 6.91927 55.0989 6.91927C60.93 6.91927 64.5525 10.0852 64.5525 15.181L64.5518 28.593Z"></path>
  </symbol>

  <!-- Word Enterprise Pro -->
  <symbol id="pplx-logo-word-ent-pro">
    <path style="fill: var(--logo-brand-fill, currentColor)" d="M602.964 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM684.483 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM655.961 28.046c-2.103-3.728-4.814-6.52-8.15-8.37-3.336-1.85-6.922-2.774-10.757-2.774-7.558 0-12.872 3.044-15.94 9.134-.239.482-.529.718-.887.718-.357 0-.534-.184-.534-.54v-7.968h-7.968v63.552h7.968V56.82c0-.363.182-.54.534-.54.352 0 .653.24.887.718 3.068 6.089 8.382 9.134 15.94 9.134 3.835 0 7.421-.925 10.757-2.775 3.336-1.85 6.052-4.64 8.15-8.369 2.096-3.728 3.142-8.221 3.142-13.471s-1.051-9.743-3.142-13.471Zm-9.202 26.315c-2.92 3.068-6.773 4.608-11.558 4.608-4.784 0-8.637-1.527-11.559-4.608-2.921-3.073-3.994-7.358-3.994-12.844s1.068-9.772 3.994-12.845c2.922-3.067 6.768-4.607 11.559-4.607 4.791 0 8.638 1.534 11.558 4.607 2.922 3.073 4.382 7.353 4.382 12.845 0 5.491-1.46 9.776-4.382 12.844ZM567.986 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.035 1.585-4.978 2.372-8.815 2.372-4.722 0-8.49-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.068-5.859-7.347-7.83-3.274-1.964-7.189-2.953-11.911-2.953-4.721 0-8.836 1-12.349 3-3.511 1.998-6.244 4.847-8.188 8.547-1.944 3.7-2.921 8.053-2.921 13.069 0 5.015 1 9.369 3.012 13.069 2.013 3.704 4.86 6.549 8.548 8.548 3.688 2 7.95 2.998 12.791 2.998 6.438 0 11.383-1.59 14.837-4.785 3.45-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.626-2.24 6.007-3.36 10.138-3.36 4.427 0 7.672 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.591-4.176 2.199-7.388 4.824-9.622ZM443.533 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.293-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.807-7.44-2.431-10.697-1.626-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953-4.722 0-8.837 1-12.349 3-3.512 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015.999 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.791 2.998 6.439 0 11.383-1.59 14.838-4.785 3.449-3.188 5.739-6.962 6.858-11.322h-8.41l-.002.002Zm-24.572-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.74 3.447 2.069 2.297 3.103 5.48 3.103 9.536h-27.806c.591-4.176 2.2-7.388 4.825-9.622ZM788.588 50.015l-.005-.012c-.95 2.81-2.438 4.998-4.473 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953s-8.836 1-12.349 3c-3.511 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015 1 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.792 2.998 6.438 0 11.382-1.59 14.837-4.785 3.449-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.59-4.176 2.199-7.388 4.824-9.622ZM520.476 57.857c-1.447.15-2.323.224-2.61.224-.411 0-.747-.12-.978-.362-.235-.236-.358-.563-.358-.988 0-.293.076-1.178.227-2.642.141-1.459.221-3.716.221-6.756V25.062h11.099v-6.819h-11.095V5.708h-7.964v12.53h-8.669v6.819h8.669v24.505c0 5.136 1.244 8.957 3.719 11.46 2.478 2.506 6.257 3.763 11.34 3.763h6.198v-7.158h-3.102c-3.011 0-5.242.075-6.689.225l-.008.006v-.001ZM701.809 3.087H692.5v10.076h9.309V3.087ZM701.319 18.245h-7.972v46.543h7.972V18.245ZM498.872 36.41V64.8h-7.861V37.72c0-8.299-4.281-12.665-12.229-12.665-8.997 0-13.976 5.415-13.976 16.16V64.8h-7.861V19.379h7.861v5.065c0 .438.174.612.611.612.438 0 .874-.7.962-.786 3.057-4.104 7.773-6.202 14.15-6.202 11.443 0 18.344 6.726 18.344 18.343h-.001ZM747.71 33.002h-8.503c-.448-5.997-4.654-8.95-12.531-8.95-6.803 0-10.742 2.953-10.742 6.98 0 3.491 2.328 4.566 8.504 5.909l8.503 1.79c9.22 1.88 14.322 4.834 14.322 12.621 0 8.593-7.886 14.77-19.701 14.77-14.232 0-19.979-6.982-21.501-17.455h8.504c1.163 6.892 4.526 10.294 13.387 10.294 7.787 0 11.255-3.223 11.255-7.161 0-2.595-1.432-3.85-3.849-4.565-1.164-.359-3.223-.806-5.998-1.432l-8.503-1.79c-8.235-1.7-12.978-5.282-12.978-12.801 0-4.386 1.79-7.877 5.37-10.473 3.581-2.596 8.235-3.85 13.873-3.85 11.637 0 20.23 6.356 20.588 16.112v.002Z"></path>
    <path fill="currentColor" d="M125.928 17.801h3.916v8.087h-5.069c-3.971 0-6.932.957-8.896 2.878-1.952 1.914-2.932 5.064-2.932 9.442v26.516h-8V17.985h8v7.458c0 .421.211.628.622.628.234 0 .41-.058.536-.178.126-.122.233-.358.359-.722 1.54-4.909 5.37-7.366 11.469-7.366h-.005V17.8v.001Zm53.217 10.02c2.099 3.742 3.155 8.254 3.155 13.526 0 5.271-1.051 9.783-3.155 13.526-2.106 3.744-4.834 6.547-8.184 8.404-3.35 1.858-6.95 2.786-10.801 2.786-7.589 0-12.925-3.057-16.006-9.172-.234-.479-.536-.721-.89-.721-.353 0-.536.179-.536.543v25.08h-8.001V17.98h8.001v8c0 .358.176.543.536.543.36 0 .65-.236.89-.721 3.081-6.114 8.417-9.172 16.006-9.172 3.851 0 7.451.929 10.801 2.786 3.35 1.858 6.072 4.66 8.184 8.404Zm-4.84 13.526c0-5.514-1.466-9.812-4.4-12.897-2.932-3.087-6.795-4.627-11.605-4.627-4.811 0-8.673 1.545-11.607 4.627-2.938 3.085-4.01 7.388-4.01 12.897 0 5.508 1.077 9.811 4.01 12.897 2.934 3.092 6.801 4.627 11.607 4.627 4.805 0 8.673-1.546 11.605-4.627 2.934-3.08 4.4-7.389 4.4-12.897ZM44.411 27.889c2.1 3.743 3.155 8.255 3.155 13.526 0 5.272-1.05 9.784-3.155 13.527-2.106 3.743-4.833 6.548-8.182 8.404-3.35 1.857-6.95 2.786-10.801 2.786-7.59 0-12.925-3.057-16.006-9.172-.233-.48-.536-.721-.89-.721s-.536.178-.536.541v25.08H0V18.05h8v8c0 .357.176.542.536.542.36 0 .65-.237.89-.722 3.081-6.113 8.416-9.171 16.005-9.171 3.853 0 7.452.928 10.802 2.786 3.35 1.857 6.07 4.66 8.182 8.403h-.006l.002.002Zm-4.846 13.526c0-5.514-1.466-9.811-4.398-12.897-2.934-3.08-6.802-4.627-11.607-4.627-4.806 0-8.673 1.546-11.606 4.627-2.932 3.092-4.011 7.39-4.011 12.897 0 5.508 1.079 9.812 4.011 12.899 2.933 3.092 6.796 4.625 11.606 4.625s8.673-1.545 11.607-4.625c2.932-3.08 4.398-7.39 4.398-12.899Zm51.243 8.462h8.445c-1.124 4.378-3.423 8.167-6.887 11.37-3.47 3.206-8.433 4.805-14.898 4.805-4.861 0-9.14-1.004-12.844-3.012-3.703-2.008-6.562-4.862-8.582-8.582-2.02-3.715-3.025-8.087-3.025-13.123s.982-9.408 2.932-13.123c1.953-3.714 4.697-6.576 8.223-8.582 3.527-2.008 7.658-3.011 12.4-3.011s8.673.992 11.959 2.964c3.292 1.978 5.746 4.604 7.378 7.863 1.632 3.27 2.441 6.847 2.441 10.74v5.394H61.454c.29 4.672 1.855 8.393 4.667 11.144 2.814 2.758 6.596 4.136 11.34 4.136 3.85 0 6.806-.79 8.85-2.382 2.042-1.592 3.537-3.79 4.49-6.61l.006.012.001-.003ZM61.29 36.847h27.92c0-4.072-1.04-7.268-3.115-9.575-2.077-2.302-5.336-3.46-9.781-3.46-4.149 0-7.544 1.123-10.18 3.373-2.636 2.244-4.25 5.47-4.844 9.662Zm127.463 27.867h8.006V0h-8.006v64.719-.005Zm112.513-51.839h9.348V2.758h-9.348v10.117Zm34.515 44.876c-1.453.15-2.333.226-2.621.226-.412 0-.75-.12-.982-.364-.236-.237-.359-.565-.359-.992 0-.294.076-1.183.228-2.653.141-1.465.221-3.732.221-6.784V24.823h11.412l-2.249-6.847h-9.159V5.387h-7.997v12.581h-8.704v6.847h8.704v24.607c0 5.156 1.25 8.993 3.735 11.507 2.488 2.515 6.283 3.778 11.386 3.778h6.224V57.52h-3.115c-3.023 0-5.263.075-6.716.225l-.008.006Zm48.361-39.783-13.25 39.224c-.175.484-.457 1.114-1.361 1.114-.904 0-1.193-.628-1.373-1.114l-13.249-39.217h-8.159l15.344 46.74h5.427c.352 0 .623.035.805.092.177.058.324.207.445.45.232.357.203.9-.092 1.614l-2.489 6.83c-.358.9-1.038 1.35-2.041 1.35-.359 0-1.186-.075-2.489-.225-1.306-.15-2.989-.224-5.065-.224h-6.494v7.186h8.535c4.981 0 7.977-.854 10.557-2.56 2.58-1.708 4.576-4.72 6.001-9.033l16.572-50.425v-1.8l-7.614.006-.01-.007ZM274.187 35.41l-12.538-17.437h-8.803v1.794l15.023 20.223-18.318 22.923v1.794h8.982l14.584-18.787 13.604 18.787h8.628v-1.794L279.428 41.34l17.258-21.48v-1.887h-8.983L274.191 35.41h-.004Zm27.93 29.304h8.005V17.98h-8.005v46.739-.005Zm-52.675-14.837c-1.13 4.378-3.421 8.167-6.884 11.37-3.472 3.206-8.435 4.805-14.901 4.805-4.86 0-9.141-1.004-12.844-3.012-3.71-2.008-6.561-4.862-8.582-8.582-2.014-3.715-3.019-8.087-3.019-13.123s.982-9.408 2.934-13.123c1.958-3.714 4.697-6.576 8.224-8.582 3.523-2.008 7.655-3.011 12.403-3.011 4.749 0 8.673.992 11.965 2.964 3.287 1.978 5.748 4.604 7.378 7.863 1.633 3.27 2.443 6.847 2.443 10.74v5.394h-36.9c.296 4.672 1.852 8.393 4.668 11.144 2.812 2.758 6.595 4.136 11.337 4.136 3.851 0 6.808-.79 8.85-2.382 2.041-1.592 3.537-3.79 4.484-6.61h8.45l-.006.012v-.003Zm-37.761-13.03H239.6c0-4.072-1.038-7.268-3.108-9.575-2.08-2.302-5.335-3.46-9.782-3.46-4.15 0-7.543 1.123-10.18 3.373-2.636 2.244-4.255 5.47-4.843 9.662h-.006Z"></path>
  </symbol>

  <!-- Word Enterprise Max -->
  <symbol id="pplx-logo-word-ent-max">
    <path style="fill: var(--logo-brand-fill, currentColor)" d="M602.964 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM684.483 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM655.961 28.046c-2.103-3.728-4.814-6.52-8.15-8.37-3.336-1.85-6.922-2.774-10.757-2.774-7.558 0-12.872 3.044-15.94 9.134-.239.482-.529.718-.887.718-.357 0-.534-.184-.534-.54v-7.968h-7.968v63.552h7.968V56.82c0-.363.182-.54.534-.54.352 0 .653.24.887.718 3.068 6.089 8.382 9.134 15.94 9.134 3.835 0 7.421-.925 10.757-2.775 3.336-1.85 6.052-4.64 8.15-8.369 2.096-3.728 3.142-8.221 3.142-13.471s-1.051-9.743-3.142-13.471Zm-9.202 26.315c-2.92 3.068-6.773 4.608-11.558 4.608-4.784 0-8.637-1.527-11.559-4.608-2.921-3.073-3.994-7.358-3.994-12.844s1.068-9.772 3.994-12.845c2.922-3.067 6.768-4.607 11.559-4.607 4.791 0 8.638 1.534 11.558 4.607 2.922 3.073 4.382 7.353 4.382 12.845 0 5.491-1.46 9.776-4.382 12.844ZM567.986 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.035 1.585-4.978 2.372-8.815 2.372-4.722 0-8.49-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.068-5.859-7.347-7.83-3.274-1.964-7.189-2.953-11.911-2.953-4.721 0-8.836 1-12.349 3-3.511 1.998-6.244 4.847-8.188 8.547-1.944 3.7-2.921 8.053-2.921 13.069 0 5.015 1 9.369 3.012 13.069 2.013 3.704 4.86 6.549 8.548 8.548 3.688 2 7.95 2.998 12.791 2.998 6.438 0 11.383-1.59 14.837-4.785 3.45-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.626-2.24 6.007-3.36 10.138-3.36 4.427 0 7.672 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.591-4.176 2.199-7.388 4.824-9.622ZM443.533 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.293-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.807-7.44-2.431-10.697-1.626-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953-4.722 0-8.837 1-12.349 3-3.512 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015.999 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.791 2.998 6.439 0 11.383-1.59 14.838-4.785 3.449-3.188 5.739-6.962 6.858-11.322h-8.41l-.002.002Zm-24.572-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.74 3.447 2.069 2.297 3.103 5.48 3.103 9.536h-27.806c.591-4.176 2.2-7.388 4.825-9.622ZM788.588 50.015l-.005-.012c-.95 2.81-2.438 4.998-4.473 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953s-8.836 1-12.349 3c-3.511 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015 1 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.792 2.998 6.438 0 11.382-1.59 14.837-4.785 3.449-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.59-4.176 2.199-7.388 4.824-9.622ZM520.476 57.857c-1.447.15-2.323.224-2.61.224-.411 0-.747-.12-.978-.362-.235-.236-.358-.563-.358-.988 0-.293.076-1.178.227-2.642.141-1.459.221-3.716.221-6.756V25.062h11.099v-6.819h-11.095V5.708h-7.964v12.53h-8.669v6.819h8.669v24.505c0 5.136 1.244 8.957 3.719 11.46 2.478 2.506 6.257 3.763 11.34 3.763h6.198v-7.158h-3.102c-3.011 0-5.242.075-6.689.225l-.008.006v-.001ZM701.809 3.087H692.5v10.076h9.309V3.087ZM701.319 18.245h-7.972v46.543h7.972V18.245ZM498.872 36.41V64.8h-7.861V37.72c0-8.299-4.281-12.665-12.229-12.665-8.997 0-13.976 5.415-13.976 16.16V64.8h-7.861V19.379h7.861v5.065c0 .438.174.612.611.612.438 0 .874-.7.962-.786 3.057-4.104 7.773-6.202 14.15-6.202 11.443 0 18.344 6.726 18.344 18.343h-.001ZM747.71 33.002h-8.503c-.448-5.997-4.654-8.95-12.531-8.95-6.803 0-10.742 2.953-10.742 6.98 0 3.491 2.328 4.566 8.504 5.909l8.503 1.79c9.22 1.88 14.322 4.834 14.322 12.621 0 8.593-7.886 14.77-19.701 14.77-14.232 0-19.979-6.982-21.501-17.455h8.504c1.163 6.892 4.526 10.294 13.387 10.294 7.787 0 11.255-3.223 11.255-7.161 0-2.595-1.432-3.85-3.849-4.565-1.164-.359-3.223-.806-5.998-1.432l-8.503-1.79c-8.235-1.7-12.978-5.282-12.978-12.801 0-4.386 1.79-7.877 5.37-10.473 3.581-2.596 8.235-3.85 13.873-3.85 11.637 0 20.23 6.356 20.588 16.112v.002Z"></path>
    <path fill="currentColor" d="M125.928 17.801h3.916v8.087h-5.069c-3.971 0-6.932.957-8.896 2.878-1.952 1.914-2.932 5.064-2.932 9.442v26.516h-8V17.985h8v7.458c0 .421.211.628.622.628.234 0 .41-.058.536-.178.126-.122.233-.358.359-.722 1.54-4.909 5.37-7.366 11.469-7.366h-.005V17.8v.001Zm53.217 10.02c2.099 3.742 3.155 8.254 3.155 13.526 0 5.271-1.051 9.783-3.155 13.526-2.106 3.744-4.834 6.547-8.184 8.404-3.35 1.858-6.95 2.786-10.801 2.786-7.589 0-12.925-3.057-16.006-9.172-.234-.479-.536-.721-.89-.721-.353 0-.536.179-.536.543v25.08h-8.001V17.98h8.001v8c0 .358.176.543.536.543.36 0 .65-.236.89-.721 3.081-6.114 8.417-9.172 16.006-9.172 3.851 0 7.451.929 10.801 2.786 3.35 1.858 6.072 4.66 8.184 8.404Zm-4.84 13.526c0-5.514-1.466-9.812-4.4-12.897-2.932-3.087-6.795-4.627-11.605-4.627-4.811 0-8.673 1.545-11.607 4.627-2.938 3.085-4.01 7.388-4.01 12.897 0 5.508 1.077 9.811 4.01 12.897 2.934 3.092 6.801 4.627 11.607 4.627 4.805 0 8.673-1.546 11.605-4.627 2.934-3.08 4.4-7.389 4.4-12.897ZM44.411 27.889c2.1 3.743 3.155 8.255 3.155 13.526 0 5.272-1.05 9.784-3.155 13.527-2.106 3.743-4.833 6.548-8.182 8.404-3.35 1.857-6.95 2.786-10.801 2.786-7.59 0-12.925-3.057-16.006-9.172-.233-.48-.536-.721-.89-.721s-.536.178-.536.541v25.08H0V18.05h8v8c0 .357.176.542.536.542.36 0 .65-.237.89-.722 3.081-6.113 8.416-9.171 16.005-9.171 3.853 0 7.452.928 10.802 2.786 3.35 1.857 6.07 4.66 8.182 8.403h-.006l.002.002Zm-4.846 13.526c0-5.514-1.466-9.811-4.398-12.897-2.934-3.08-6.802-4.627-11.607-4.627-4.806 0-8.673 1.546-11.606 4.627-2.932 3.092-4.011 7.39-4.011 12.897 0 5.508 1.079 9.812 4.011 12.899 2.933 3.092 6.796 4.625 11.606 4.625s8.673-1.545 11.607-4.625c2.932-3.08 4.398-7.39 4.398-12.899Zm51.243 8.462h8.445c-1.124 4.378-3.423 8.167-6.887 11.37-3.47 3.206-8.433 4.805-14.898 4.805-4.861 0-9.14-1.004-12.844-3.012-3.703-2.008-6.562-4.862-8.582-8.582-2.02-3.715-3.025-8.087-3.025-13.123s.982-9.408 2.932-13.123c1.953-3.714 4.697-6.576 8.223-8.582 3.527-2.008 7.658-3.011 12.4-3.011s8.673.992 11.959 2.964c3.292 1.978 5.746 4.604 7.378 7.863 1.632 3.27 2.441 6.847 2.441 10.74v5.394H61.454c.29 4.672 1.855 8.393 4.667 11.144 2.814 2.758 6.596 4.136 11.34 4.136 3.85 0 6.806-.79 8.85-2.382 2.042-1.592 3.537-3.79 4.49-6.61l.006.012.001-.003ZM61.29 36.847h27.92c0-4.072-1.04-7.268-3.115-9.575-2.077-2.302-5.336-3.46-9.781-3.46-4.149 0-7.544 1.123-10.18 3.373-2.636 2.244-4.25 5.47-4.844 9.662Zm127.463 27.867h8.006V0h-8.006v64.719-.005Zm112.513-51.839h9.348V2.758h-9.348v10.117Zm34.515 44.876c-1.453.15-2.333.226-2.621.226-.412 0-.75-.12-.982-.364-.236-.237-.359-.565-.359-.992 0-.294.076-1.183.228-2.653.141-1.465.221-3.732.221-6.784V24.823h11.412l-2.249-6.847h-9.159V5.387h-7.997v12.581h-8.704v6.847h8.704v24.607c0 5.156 1.25 8.993 3.735 11.507 2.488 2.515 6.283 3.778 11.386 3.778h6.224V57.52h-3.115c-3.023 0-5.263.075-6.716.225l-.008.006Zm48.361-39.783-13.25 39.224c-.175.484-.457 1.114-1.361 1.114-.904 0-1.193-.628-1.373-1.114l-13.249-39.217h-8.159l15.344 46.74h5.427c.352 0 .623.035.805.092.177.058.324.207.445.45.232.357.203.9-.092 1.614l-2.489 6.83c-.358.9-1.038 1.35-2.041 1.35-.359 0-1.186-.075-2.489-.225-1.306-.15-2.989-.224-5.065-.224h-6.494v7.186h8.535c4.981 0 7.977-.854 10.557-2.56 2.58-1.708 4.576-4.72 6.001-9.033l16.572-50.425v-1.8l-7.614.006-.01-.007ZM274.187 35.41l-12.538-17.437h-8.803v1.794l15.023 20.223-18.318 22.923v1.794h8.982l14.584-18.787 13.604 18.787h8.628v-1.794L279.428 41.34l17.258-21.48v-1.887h-8.983L274.191 35.41h-.004Zm27.93 29.304h8.005V17.98h-8.005v46.739-.005Zm-52.675-14.837c-1.13 4.378-3.421 8.167-6.884 11.37-3.472 3.206-8.435 4.805-14.901 4.805-4.86 0-9.141-1.004-12.844-3.012-3.71-2.008-6.561-4.862-8.582-8.582-2.014-3.715-3.019-8.087-3.019-13.123s.982-9.408 2.934-13.123c1.958-3.714 4.697-6.576 8.224-8.582 3.523-2.008 7.655-3.011 12.403-3.011 4.749 0 8.673.992 11.965 2.964 3.287 1.978 5.748 4.604 7.378 7.863 1.633 3.27 2.443 6.847 2.443 10.74v5.394h-36.9c.296 4.672 1.852 8.393 4.668 11.144 2.812 2.758 6.595 4.136 11.337 4.136 3.851 0 6.808-.79 8.85-2.382 2.041-1.592 3.537-3.79 4.484-6.61h8.45l-.006.012v-.003Zm-37.761-13.03H239.6c0-4.072-1.038-7.268-3.108-9.575-2.08-2.302-5.335-3.46-9.782-3.46-4.15 0-7.543 1.123-10.18 3.373-2.636 2.244-4.255 5.47-4.843 9.662h-.006Z"></path>
  </symbol>

  <!-- Word Pro -->
  <symbol id="pplx-logo-word-pro">
    <path fill="currentColor" d="M972.21,137.43h30.23v62.43h-39.13c-30.66,0-53.52,7.39-68.68,22.22-15.07,14.78-22.64,39.1-22.64,72.9v204.71h-61.76V138.85h61.76v57.58c0,3.25,1.63,4.85,4.8,4.85,1.81,0,3.17-.45,4.14-1.38.97-.94,1.8-2.76,2.77-5.57,11.89-37.9,41.46-56.87,88.55-56.87h-.04v-.04ZM1383.06,214.78c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.32,50.54-63.18,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.81-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.19v193.63h-61.77V138.81h61.77v61.77c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.73,0,57.53,7.17,83.39,21.51,25.86,14.34,46.88,35.98,63.18,64.88ZM1345.7,319.21c0-42.57-11.32-75.75-33.97-99.57-22.64-23.83-52.46-35.72-89.6-35.72s-66.96,11.93-89.61,35.72c-22.68,23.82-30.96,57.04-30.96,99.57s8.32,75.75,30.96,99.57c22.65,23.87,52.51,35.72,89.61,35.72s66.96-11.93,89.6-35.72c22.65-23.78,33.97-57.04,33.97-99.57ZM342.87,215.31c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.31,50.55-63.17,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.8-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.18v193.63H0V139.34h61.76v61.76c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.74,0,57.53,7.17,83.39,21.51,25.86,14.34,46.87,35.98,63.17,64.88h-.05ZM305.46,319.74c0-42.57-11.32-75.75-33.96-99.57-22.65-23.78-52.51-35.72-89.61-35.72s-66.96,11.93-89.6,35.72c-22.64,23.87-30.97,57.05-30.97,99.57s8.33,75.75,30.97,99.58c22.64,23.87,52.47,35.71,89.6,35.71s66.96-11.93,89.61-35.71c22.64-23.78,33.96-57.05,33.96-99.58ZM701.07,385.07h65.2c-8.68,33.8-26.43,63.05-53.17,87.77-26.79,24.76-65.11,37.1-115.02,37.1-37.53,0-70.57-7.75-99.16-23.25-28.59-15.5-50.66-37.54-66.26-66.26-15.59-28.68-23.35-62.43-23.35-101.31s7.58-72.63,22.64-101.31c15.07-28.68,36.26-50.77,63.48-66.26,27.23-15.5,59.12-23.25,95.73-23.25s66.96,7.66,92.33,22.89c25.42,15.27,44.36,35.54,56.96,60.7,12.6,25.25,18.85,52.86,18.85,82.92v41.64h-284.85c2.24,36.07,14.32,64.8,36.03,86.04,21.72,21.29,50.92,31.93,87.54,31.93,29.73,0,52.55-6.1,68.33-18.39,15.77-12.29,27.31-29.26,34.67-51.03l.04.09ZM473.18,284.47h215.55c0-31.44-8.02-56.11-24.05-73.92-16.03-17.77-41.19-26.72-75.51-26.72-32.03,0-58.24,8.68-78.59,26.05-20.35,17.32-32.82,42.22-37.4,74.59ZM1457.24,499.61h61.81V0h-61.81v499.65-.04ZM2325.88,99.4h72.17V21.24h-72.17v78.15ZM2592.35,445.86c-11.22,1.16-18.01,1.74-20.24,1.74-3.18,0-5.79-.93-7.58-2.81-1.82-1.83-2.77-4.36-2.77-7.66,0-2.27.59-9.13,1.76-20.48,1.09-11.31,1.71-28.81,1.71-52.37v-172.65h88.1l-17.36-52.86h-70.71V41.59h-61.74v97.13h-67.2v52.86h67.2v189.97c0,39.81,9.65,69.43,28.83,88.84,19.21,19.42,48.51,29.17,87.91,29.17h48.05v-55.49h-24.05c-23.34,0-40.63.58-51.85,1.74l-.06.05ZM2965.71,138.76l-102.29,302.77c-1.35,3.74-3.53,8.6-10.51,8.6s-9.21-4.85-10.6-8.6l-102.29-302.77h-62.99l118.46,360.85h41.9c2.72,0,4.81.27,6.22.71,1.36.45,2.5,1.6,3.43,3.47,1.79,2.76,1.57,6.95-.71,12.47l-19.21,52.73c-2.77,6.95-8.02,10.42-15.76,10.42-2.77,0-9.16-.58-19.22-1.74-10.08-1.16-23.07-1.73-39.1-1.73h-50.14v55.48h65.9c38.45,0,61.58-6.59,81.5-19.77,19.92-13.18,35.33-36.43,46.33-69.73l127.94-389.3v-13.85h-58.86ZM2116.82,273.38l-96.8-134.62h-67.96v13.85l115.98,156.13-141.42,176.97v13.85h69.35l112.59-145.04,105.03,145.04h66.61v-13.85l-122.92-166.55,133.24-165.84v-14.56h-69.35l-104.32,134.62h-.03ZM2332.45,499.61h61.8V138.81h-61.8v360.84-.04ZM1925.78,385.07c-8.72,33.8-26.41,63.05-53.15,87.77-26.8,24.76-65.12,37.1-115.04,37.1-37.52,0-70.57-7.75-99.16-23.25-28.64-15.5-50.65-37.54-66.25-66.26-15.55-28.68-23.31-62.43-23.31-101.31s7.58-72.63,22.65-101.31c15.12-28.68,36.26-50.77,63.49-66.26,27.2-15.5,59.1-23.25,95.76-23.25s66.96,7.66,92.37,22.89c25.38,15.27,44.38,35.54,56.96,60.7,12.61,25.25,18.86,52.86,18.86,82.92v41.64h-284.88c2.29,36.07,14.3,64.8,36.04,86.04,21.71,21.29,50.92,31.93,87.53,31.93,29.73,0,52.56-6.1,68.32-18.39,15.76-12.29,27.31-29.26,34.62-51.03h65.24l-.05.09ZM1634.25,284.47h215.55c0-31.44-8.02-56.11-24-73.92-16.06-17.77-41.19-26.72-75.52-26.72-32.04,0-58.23,8.68-78.59,26.05-20.35,17.32-32.85,42.22-37.39,74.59h-.05Z"></path>
    <g>
      <path style="fill: var(--logo-brand-fill, currentColor)" d="M3355.84,188.2c-34.07-64.39-131.07-79.63-178.65-27.45-1.45,1.53-4.03.51-4.03-1.6v-20.46s-51.68,0-51.68,0v360.92h51.68v-137.9c0-2.11,2.57-3.13,4.03-1.6,17.98,18.93,43.42,31.52,75.79,31.52,72.2.47,121.88-58.16,120.25-131.21,0-28.27-5.85-52.57-17.39-72.23ZM3321.56,260.43c0,26.4-7.05,50.24-20.94,64.92h0c-25.21,28.94-83.76,28.65-109.2,0-27.18-27.93-27.44-101.65,0-129.38,25.44-29.25,83.94-29.55,109.17-.04,13.94,14.4,20.97,38.06,20.98,64.5Z"></path>
      <path style="fill: var(--logo-brand-fill, currentColor)" d="M3678.1,499.61h-438.05v-48.22h438.05c33.41,0,64.39-7.45,92.07-22.16,29.4-15.46,53.58-39.15,70.02-68.56l.08-.14c16.31-28.72,24.58-62.4,24.58-100.11s-8.26-71.36-24.56-100.07l-.08-.13c-16.46-29.43-40.64-53.13-69.93-68.54-27.79-14.76-58.78-22.22-92.19-22.22h-555.91V21.24h555.91c41.39,0,79.99,9.36,114.73,27.81,37.45,19.7,68.41,49.99,89.43,87.55,20.45,36.05,30.82,77.7,30.82,123.82s-10.38,87.81-30.84,123.86c-21,37.53-51.96,67.81-89.53,87.57-34.63,18.4-73.22,27.75-114.61,27.75Z"></path>
      <path style="fill: var(--logo-brand-fill, currentColor)" d="M3784.19,189.62c-42.92-80.72-177.41-80.62-220.65.03-10.91,19.63-16.45,43.44-16.45,70.78-1.52,77.12,51.01,131.73,127,131.21,75.9.53,128.27-54.63,127-131.21,0-27.33-5.69-51.15-16.91-70.8ZM3749.42,260.43c0,26.4-7.05,50.24-20.94,64.92h0c-25.21,28.94-83.76,28.65-109.2,0-27.17-27.93-27.44-101.65,0-129.38,25.44-29.25,83.94-29.55,109.17-.04,13.94,14.4,20.97,38.06,20.98,64.5Z"></path>
      <path style="fill: var(--logo-brand-fill, currentColor)" d="M3515.38,135.16c-16.77,0-30.24,2.85-40.05,8.48-5.78,3.15-11.11,8.68-16.12,16.74-1.24,2-4.32,1.13-4.32-1.22v-20.46s-51.67,0-51.67,0v246.1h51.67v-140.34c0-20.57,4.43-35.36,13.17-43.97,16.17-16.75,48.45-12.5,72.26-13v-52.31h-24.94Z"></path>
    </g>
  </symbol>

  <!-- Word Max -->
  <symbol id="pplx-logo-word-max">
    <path fill="currentColor" d="M972.21,137.43h30.23v62.43h-39.13c-30.66,0-53.52,7.39-68.68,22.22-15.07,14.78-22.64,39.1-22.64,72.9v204.71h-61.76V138.85h61.76v57.58c0,3.25,1.63,4.85,4.8,4.85,1.81,0,3.17-.45,4.14-1.38.97-.94,1.8-2.76,2.77-5.57,11.89-37.9,41.46-56.87,88.55-56.87h-.04v-.04ZM1383.06,214.78c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.32,50.54-63.18,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.81-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.19v193.63h-61.77V138.81h61.77v61.77c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.73,0,57.53,7.17,83.39,21.51,25.86,14.34,46.88,35.98,63.18,64.88ZM1345.7,319.21c0-42.57-11.32-75.75-33.97-99.57-22.64-23.83-52.46-35.72-89.6-35.72s-66.96,11.93-89.61,35.72c-22.68,23.82-30.96,57.04-30.96,99.57s8.32,75.75,30.96,99.57c22.65,23.87,52.51,35.72,89.61,35.72s66.96-11.93,89.6-35.72c22.65-23.78,33.97-57.04,33.97-99.57ZM342.87,215.31c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.31,50.55-63.17,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.8-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.18v193.63H0V139.34h61.76v61.76c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.74,0,57.53,7.17,83.39,21.51,25.86,14.34,46.87,35.98,63.17,64.88h-.05ZM305.46,319.74c0-42.57-11.32-75.75-33.96-99.57-22.65-23.78-52.51-35.72-89.61-35.72s-66.96,11.93-89.6,35.72c-22.64,23.87-30.97,57.05-30.97,99.57s8.33,75.75,30.97,99.58c22.64,23.87,52.47,35.71,89.6,35.71s66.96-11.93,89.61-35.71c22.64-23.78,33.96-57.05,33.96-99.58ZM701.07,385.07h65.2c-8.68,33.8-26.43,63.05-53.17,87.77-26.79,24.76-65.11,37.1-115.02,37.1-37.53,0-70.57-7.75-99.16-23.25-28.59-15.5-50.66-37.54-66.26-66.26-15.59-28.68-23.35-62.43-23.35-101.31s7.58-72.63,22.64-101.31c15.07-28.68,36.26-50.77,63.48-66.26,27.23-15.5,59.12-23.25,95.73-23.25s66.96,7.66,92.33,22.89c25.42,15.27,44.36,35.54,56.96,60.7,12.6,25.25,18.85,52.86,18.85,82.92v41.64h-284.85c2.24,36.07,14.32,64.8,36.03,86.04,21.72,21.29,50.92,31.93,87.54,31.93,29.73,0,52.55-6.1,68.33-18.39,15.77-12.29,27.31-29.26,34.67-51.03l.04.09ZM473.18,284.47h215.55c0-31.44-8.02-56.11-24.05-73.92-16.03-17.77-41.19-26.72-75.51-26.72-32.03,0-58.24,8.68-78.59,26.05-20.35,17.32-32.82,42.22-37.4,74.59ZM1457.24,499.61h61.81V0h-61.81v499.65-.04ZM2325.88,99.4h72.17V21.24h-72.17v78.15ZM2592.35,445.86c-11.22,1.16-18.01,1.74-20.24,1.74-3.18,0-5.79-.93-7.58-2.81-1.82-1.83-2.77-4.36-2.77-7.66,0-2.27.59-9.13,1.76-20.48,1.09-11.31,1.71-28.81,1.71-52.37v-172.65h88.1l-17.36-52.86h-70.71V41.59h-61.74v97.13h-67.2v52.86h67.2v189.97c0,39.81,9.65,69.43,28.83,88.84,19.21,19.42,48.51,29.17,87.91,29.17h48.05v-55.49h-24.05c-23.34,0-40.63.58-51.85,1.74l-.06.05ZM2965.71,138.76l-102.29,302.77c-1.35,3.74-3.53,8.6-10.51,8.6s-9.21-4.85-10.6-8.6l-102.29-302.77h-62.99l118.46,360.85h41.9c2.72,0,4.81.27,6.22.71,1.36.45,2.5,1.6,3.43,3.47,1.79,2.76,1.57,6.95-.71,12.47l-19.21,52.73c-2.77,6.95-8.02,10.42-15.76,10.42-2.77,0-9.16-.58-19.22-1.74-10.08-1.16-23.07-1.73-39.1-1.73h-50.14v55.48h65.9c38.45,0,61.58-6.59,81.5-19.77,19.92-13.18,35.33-36.43,46.33-69.73l127.94-389.3v-13.85h-58.86ZM2116.82,273.38l-96.8-134.62h-67.96v13.85l115.98,156.13-141.42,176.97v13.85h69.35l112.59-145.04,105.03,145.04h66.61v-13.85l-122.92-166.55,133.24-165.84v-14.56h-69.35l-104.32,134.62h-.03ZM2332.45,499.61h61.8V138.81h-61.8v360.84-.04ZM1925.78,385.07c-8.72,33.8-26.41,63.05-53.15,87.77-26.8,24.76-65.12,37.1-115.04,37.1-37.52,0-70.57-7.75-99.16-23.25-28.64-15.5-50.65-37.54-66.25-66.26-15.55-28.68-23.31-62.43-23.31-101.31s7.58-72.63,22.65-101.31c15.12-28.68,36.26-50.77,63.49-66.26,27.2-15.5,59.1-23.25,95.76-23.25s66.96,7.66,92.37,22.89c25.38,15.27,44.38,35.54,56.96,60.7,12.61,25.25,18.86,52.86,18.86,82.92v41.64h-284.88c2.29,36.07,14.3,64.8,36.04,86.04,21.71,21.29,50.92,31.93,87.53,31.93,29.73,0,52.56-6.1,68.32-18.39,15.76-12.29,27.31-29.26,34.62-51.03h65.24l-.05.09ZM1634.25,284.47h215.55c0-31.44-8.02-56.11-24-73.92-16.06-17.77-41.19-26.72-75.52-26.72-32.04,0-58.23,8.68-78.59,26.05-20.35,17.32-32.85,42.22-37.39,74.59h-.05Z"></path>
    <path d="M113.78 16.0915H117.318V23.4013H112.739C109.15 23.4013 106.475 24.2666 104.701 26.003C102.937 27.7336 102.051 30.5812 102.051 34.5388V58.508H94.8233V16.2578H102.051V22.9997C102.051 23.3803 102.242 23.5676 102.613 23.5676C102.825 23.5676 102.984 23.5149 103.098 23.406C103.211 23.2959 103.308 23.0828 103.422 22.7538C104.813 18.3162 108.274 16.095 113.785 16.095H113.78V16.0903V16.0915ZM161.863 25.1483C163.76 28.5322 164.714 32.6103 164.714 37.3759C164.714 42.1414 163.765 46.2196 161.863 49.6034C159.96 52.9873 157.495 55.5211 154.469 57.2001C151.443 58.8792 148.189 59.7187 144.71 59.7187C137.853 59.7187 133.032 56.9554 130.248 51.4277C130.036 50.9944 129.763 50.7755 129.444 50.7755C129.124 50.7755 128.959 50.9371 128.959 51.2661V73.9379H121.73V16.2531H128.959V23.4856C128.959 23.8088 129.119 23.9762 129.444 23.9762C129.769 23.9762 130.031 23.762 130.248 23.324C133.032 17.7975 137.853 15.033 144.71 15.033C148.189 15.033 151.443 15.8725 154.469 17.5516C157.495 19.2306 159.955 21.7644 161.863 25.1483ZM157.491 37.3759C157.491 32.3914 156.166 28.5064 153.515 25.7173C150.866 22.9271 147.376 21.5349 143.029 21.5349C138.682 21.5349 135.193 22.9318 132.542 25.7173C129.887 28.5064 128.918 32.3961 128.918 37.3759C128.918 42.3556 129.892 46.2453 132.542 49.0344C135.193 51.8293 138.687 53.2168 143.029 53.2168C147.371 53.2168 150.866 51.8199 153.515 49.0344C156.166 46.25 157.491 42.3556 157.491 37.3759ZM40.127 25.2103C42.0241 28.5942 42.9779 32.6724 42.9779 37.4379C42.9779 42.2034 42.0287 46.2816 40.127 49.6655C38.224 53.0493 35.7605 55.5843 32.734 57.2622C29.7076 58.9412 26.454 59.7808 22.9747 59.7808C16.1177 59.7808 11.2972 57.0175 8.51295 51.4897C8.30229 51.0565 8.02844 50.8375 7.70894 50.8375C7.38944 50.8375 7.22442 50.9991 7.22442 51.327V73.9988H0V16.3151H7.22793V23.5465C7.22793 23.8697 7.3871 24.0371 7.71245 24.0371C8.0378 24.0371 8.29995 23.8228 8.51646 23.3849C11.3007 17.8584 16.1212 15.0939 22.9782 15.0939C26.4587 15.0939 29.7111 15.9334 32.7375 17.6125C35.764 19.2915 38.2228 21.8253 40.1305 25.2092H40.1246L40.127 25.2103ZM35.7488 37.4379C35.7488 32.4534 34.424 28.5684 31.7743 25.7794C29.1236 22.995 25.629 21.597 21.2871 21.597C16.9451 21.597 13.4506 22.9939 10.8009 25.7794C8.15132 28.5743 7.17644 32.4593 7.17644 37.4379C7.17644 42.4165 8.15132 46.3074 10.8009 49.0976C13.4506 51.8925 16.9416 53.2788 21.2871 53.2788C25.6325 53.2788 29.1236 51.882 31.7743 49.0976C34.424 46.3132 35.7488 42.4177 35.7488 37.4379ZM82.048 45.0873H89.6786C88.6627 49.0449 86.5854 52.4697 83.4559 55.3642C80.3206 58.2633 75.8359 59.7082 69.9949 59.7082C65.6026 59.7082 61.7359 58.8007 58.3899 56.9859C55.0439 55.171 52.461 52.5903 50.6353 49.2276C48.8108 45.8695 47.9026 41.9177 47.9026 37.3653C47.9026 32.8129 48.7897 28.8612 50.5522 25.5031C52.3159 22.145 54.7958 19.5585 57.9815 17.7448C61.1683 15.9299 64.9004 15.0225 69.185 15.0225C73.4695 15.0225 77.0215 15.9194 79.9906 17.7026C82.9656 19.4906 85.1822 21.864 86.6568 24.8099C88.1314 27.7664 88.8628 30.9992 88.8628 34.5189V39.3945H55.5261C55.7883 43.6178 57.202 46.9818 59.7428 49.4688C62.2847 51.9616 65.7021 53.2074 69.9878 53.2074C73.4672 53.2074 76.1379 52.4932 77.9847 51.0541C79.8303 49.6151 81.1808 47.6281 82.0422 45.0791L82.0469 45.0896L82.048 45.0873ZM55.3775 33.3082H80.6039C80.6039 29.6269 79.6653 26.7384 77.7892 24.653C75.9132 22.5723 72.9686 21.5244 68.9521 21.5244C65.2035 21.5244 62.1361 22.5407 59.7545 24.5746C57.3729 26.6025 55.9135 29.518 55.3775 33.3082ZM170.545 58.4986H177.778V0H170.545V58.5033V58.4986ZM272.204 11.6386H280.65V2.49282H272.204V11.6386ZM303.389 52.2051C302.076 52.3409 301.282 52.4089 301.021 52.4089C300.649 52.4089 300.343 52.3 300.134 52.0798C299.921 51.8656 299.809 51.5693 299.809 51.1829C299.809 50.9171 299.878 50.1139 300.015 48.785C300.143 47.4607 300.216 45.4116 300.216 42.653V22.4377H310.526L308.494 16.2484H300.219V4.86971H292.993V16.2425H285.129V22.4318H292.993V44.6752C292.993 49.3365 294.123 52.8046 296.367 55.0773C298.616 57.3512 302.045 58.4928 306.656 58.4928H312.279V51.9955H309.465C306.733 51.9955 304.71 52.0634 303.396 52.1993L303.389 52.2051ZM347.085 16.2425L335.113 51.6993C334.955 52.1372 334.7 52.7063 333.883 52.7063C333.067 52.7063 332.806 52.1384 332.643 51.6993L320.672 16.2484H313.3L327.163 58.4998H332.067C332.385 58.4998 332.63 58.5314 332.795 58.5829C332.954 58.6356 333.088 58.7703 333.196 58.9892C333.406 59.3124 333.38 59.803 333.113 60.4493L330.865 66.6234C330.541 67.4372 329.927 67.8435 329.021 67.8435C328.697 67.8435 327.949 67.7756 326.771 67.6397C325.592 67.5039 324.071 67.4372 322.195 67.4372H316.327V73.9333H324.04C328.54 73.9333 331.247 73.1616 333.578 71.6184C335.909 70.0752 337.713 67.3529 339 63.4538L353.973 17.8712V16.2437L347.094 16.2496L347.085 16.2437V16.2425ZM247.737 32.0097L236.408 16.2472H228.455V17.8689L242.028 36.1499L225.477 56.8711V58.4928H233.594L246.77 41.5103L259.062 58.4928H266.858V56.8711L252.472 37.37L268.065 17.952V16.2472H259.949L247.74 32.0097H247.737ZM272.973 58.4986H280.205V16.2531H272.973V58.5033V58.4986ZM225.379 45.0873C224.358 49.0449 222.288 52.4697 219.159 55.3642C216.022 58.2633 211.538 59.7082 205.695 59.7082C201.304 59.7082 197.436 58.8007 194.09 56.9859C190.739 55.171 188.163 52.5903 186.337 49.2276C184.517 45.8695 183.609 41.9177 183.609 37.3653C183.609 32.8129 184.496 28.8612 186.26 25.5031C188.029 22.145 190.503 19.5585 193.69 17.7448C196.873 15.9299 200.607 15.0225 204.897 15.0225C209.188 15.0225 212.734 15.9194 215.707 17.7026C218.678 19.4906 220.901 21.864 222.374 24.8099C223.849 27.7664 224.581 30.9992 224.581 34.5189V39.3945H191.241C191.509 43.6178 192.914 46.9818 195.458 49.4688C197.999 51.9616 201.418 53.2074 205.702 53.2074C209.182 53.2074 211.854 52.4932 213.698 51.0541C215.542 49.6151 216.894 47.6281 217.75 45.0791H225.385L225.379 45.0896V45.0873ZM191.261 33.3082H216.487C216.487 29.6269 215.548 26.7384 213.678 24.653C211.799 22.5723 208.858 21.5244 204.84 21.5244C201.09 21.5244 198.025 22.5407 195.642 24.5746C193.261 26.6025 191.798 29.518 191.266 33.3082H191.261Z" fill="currentColor"></path>
    <g>
      <path d="M369.705 16.0751V19.7517H370.279C371.485 17.7413 373.552 15.3866 379.007 15.3866C384.461 15.3866 386.93 18.2588 387.906 20.7282H388.48C389.915 18.1429 392.499 15.3866 398.241 15.3866C403.982 15.3866 408.345 18.5457 408.345 25.2666V45.3133H403.293V25.612C403.293 21.7633 401.169 19.4086 397.035 19.4086C392.385 19.4086 389.112 22.2234 389.112 28.0825V45.3145H384.06V25.6131C384.06 21.7644 381.936 19.4098 377.802 19.4098C373.151 19.4098 369.879 22.2246 369.879 28.0837V45.3156H364.827V16.0786H369.707L369.705 16.0751Z" style="fill: var(--logo-brand-fill, currentColor)"></path>
      <path d="M412.837 24.5758C413.813 19.1194 418.693 15.3855 425.985 15.3855C433.276 15.3855 438.328 19.1194 438.328 26.2419V45.3121H433.448V41.0045H432.873C431.61 43.0722 428.797 45.9444 422.711 45.9444C416.626 45.9444 412.032 42.7854 412.032 37.5585C412.032 32.3317 416.452 29.5169 422.423 28.9432L433.332 27.9093V26.1283C433.332 21.3605 430.518 19.178 425.869 19.178C421.219 19.178 418.232 21.3605 417.716 25.4387H412.836V24.5769L412.837 24.5758ZM423.573 42.1519C428.912 42.1519 433.333 39.0502 433.333 32.4441V31.6397L423.114 32.6162C419.324 32.9605 417.085 34.3971 417.085 37.3267C417.085 40.2563 419.612 42.1519 423.573 42.1519Z" style="fill: var(--logo-brand-fill, currentColor)"></path>
      <path d="M456.8 2.49283C461.595 2.49283 466.06 3.61337 470.071 5.74672C474.452 8.0522 477.928 11.4606 480.394 15.8725C482.786 20.0889 483.999 24.9855 483.999 30.4255C483.999 35.8654 482.786 40.7632 480.394 44.9796C479.086 47.319 477.492 49.3739 475.629 51.1349C474.431 52.2672 473.125 53.2788 471.71 54.1617L468.776 50.4617L455.493 33.7133H455.001L445.815 45.3156H440.418V44.4539L451.985 30.3037L440.418 16.1536V15.2918H445.815L455.001 26.8941H455.493L464.679 15.2918H470.075V16.1536L458.509 30.3037L472.647 47.5052C474.071 46.1142 475.295 44.5054 476.312 42.6858L476.32 42.6718C478.31 39.1685 479.319 35.0481 479.319 30.4255C479.319 25.8028 478.31 21.6837 476.321 18.1792L476.313 18.1651C474.297 14.5541 471.46 11.7686 467.883 9.88697C464.547 8.11308 460.821 7.21618 456.8 7.21618H364.861V2.49283H456.8Z" style="fill: var(--logo-brand-fill, currentColor)"></path>
      <path d="M462.359 55.5562L460.611 53.3526C459.374 53.5399 458.103 53.6348 456.8 53.6348H364.861V58.3183H456.8C459.252 58.3183 461.616 58.0326 463.877 57.4706L462.358 55.5562H462.359Z" style="fill: var(--logo-brand-fill, currentColor)"></path>
    </g>
  </symbol>

  <!-- Word -->
  <symbol id="pplx-logo-word">
    <path d="M310.846 43.922H320.632V63.8822H307.966C298.037 63.8822 290.638 66.2483 285.737 70.9803C280.852 75.7123 278.401 83.4772 278.401 94.2751V159.698H258.4V44.3666H278.401V62.7707C278.401 63.8028 278.926 64.3269 279.961 64.3269C280.549 64.3269 280.995 64.1839 281.297 63.8822C281.6 63.5805 281.886 62.993 282.188 62.1038C286.039 49.9879 295.602 43.922 310.862 43.922H310.846ZM441.502 68.646C446.753 77.8877 449.395 89.0191 449.395 102.024C449.395 115.029 446.769 126.161 441.502 135.402C436.235 144.644 429.425 151.552 421.055 156.141C412.685 160.73 403.679 163.016 394.052 163.016C375.084 163.016 361.75 155.474 354.048 140.388C353.459 139.213 352.712 138.61 351.82 138.61C350.929 138.61 350.484 139.055 350.484 139.944V201.825H330.482V44.3666H350.484V64.1045C350.484 64.9938 350.929 65.4384 351.82 65.4384C352.712 65.4384 353.444 64.8509 354.048 63.6599C361.75 48.5746 375.084 41.032 394.052 41.032C403.679 41.032 412.685 43.3186 421.055 47.9077C429.425 52.4968 436.235 59.4043 441.502 68.646ZM429.393 102.024C429.393 88.4157 425.733 77.8083 418.397 70.2022C411.062 62.596 401.403 58.785 389.389 58.785C377.376 58.785 367.717 62.596 360.381 70.2022C353.046 77.8242 350.357 88.4316 350.357 102.024C350.357 115.617 353.046 126.24 360.381 133.846C367.717 141.468 377.392 145.263 389.389 145.263C401.387 145.263 411.062 141.452 418.397 133.846C425.733 126.24 429.393 115.617 429.393 102.024ZM111.004 68.8207C116.255 78.0624 118.897 89.1938 118.897 102.199C118.897 115.204 116.271 126.335 111.004 135.577C105.737 144.819 98.9266 151.726 90.5568 156.315C82.1869 160.904 73.1806 163.191 63.5536 163.191C44.5862 163.191 31.2517 155.648 23.5502 140.563C22.9614 139.388 22.2135 138.785 21.3225 138.785C20.4314 138.785 19.9858 139.229 19.9858 140.119V202H0V44.5413H20.0017V64.2792C20.0017 65.1685 20.4473 65.6131 21.3384 65.6131C22.2295 65.6131 22.9614 65.0256 23.5661 63.8346C31.2676 48.7493 44.6021 41.2067 63.5696 41.2067C73.1965 41.2067 82.2028 43.4933 90.5727 48.0824C98.9426 52.6715 105.753 59.579 111.02 68.8207H111.004ZM98.8948 102.199C98.8948 88.5904 95.235 77.983 87.8994 70.3769C80.5639 62.7707 70.9051 58.9597 58.8913 58.9597C46.8776 58.9597 37.2188 62.7707 29.8833 70.3769C22.5477 77.9989 19.8585 88.6062 19.8585 102.199C19.8585 115.792 22.5477 126.415 29.8833 134.021C37.2188 141.643 46.8776 145.438 58.8913 145.438C70.9051 145.438 80.5639 141.627 87.8994 134.021C95.235 126.415 98.8948 115.792 98.8948 102.199ZM221.578 123.08H242.694C239.878 133.878 234.133 143.231 225.477 151.139C216.805 159.047 204.393 163.001 188.242 163.001C176.085 163.001 165.392 160.523 156.131 155.569C146.87 150.615 139.726 143.564 134.682 134.386C129.637 125.224 127.123 114.426 127.123 102.008C127.123 89.5908 129.574 78.7929 134.459 69.6305C139.344 60.4682 146.202 53.4019 155.017 48.4476C163.833 43.4933 174.16 41.0161 186.015 41.0161C197.869 41.0161 207.687 43.4615 215.914 48.3365C224.14 53.2114 230.283 59.6901 234.356 67.7409C238.43 75.8076 240.466 84.6364 240.466 94.2434V107.55H148.239C148.971 119.079 152.869 128.257 159.902 135.053C166.936 141.849 176.388 145.263 188.242 145.263C197.869 145.263 205.252 143.31 210.36 139.388C215.468 135.466 219.208 130.035 221.578 123.08ZM148.462 90.9246H218.253C218.253 80.873 215.659 72.9969 210.472 67.2963C205.284 61.6115 197.137 58.7532 186.03 58.7532C175.656 58.7532 167.174 61.5321 160.587 67.074C153.999 72.6158 149.957 80.5713 148.477 90.9087L148.462 90.9246ZM465.227 159.682H485.229V0H465.227V159.698V159.682ZM742.753 31.7744H766.113V6.8122H742.753V31.7744ZM825.163 142.5C821.535 142.866 819.339 143.056 818.607 143.056C817.573 143.056 816.745 142.755 816.157 142.167C815.568 141.579 815.266 140.77 815.266 139.722C815.266 138.991 815.457 136.8 815.823 133.179C816.189 129.559 816.379 123.969 816.379 116.443V61.2622H844.91L839.293 44.3666H816.395V13.3068H796.394V44.3508H774.642V61.2463H796.394V121.969C796.394 134.688 799.512 144.152 805.734 150.361C811.956 156.569 821.44 159.682 834.185 159.682H849.748V141.945H841.966C834.408 141.945 828.807 142.135 825.179 142.5H825.163ZM942.198 44.3508L909.084 141.119C908.639 142.31 907.939 143.866 905.663 143.866C903.388 143.866 902.688 142.31 902.242 141.119L869.129 44.3508H848.729L887.078 159.682H900.635C901.526 159.682 902.194 159.761 902.64 159.904C903.086 160.047 903.451 160.412 903.754 161.016C904.343 161.905 904.263 163.239 903.531 165.001L897.309 181.849C896.418 184.072 894.716 185.184 892.201 185.184C891.31 185.184 889.242 184.993 885.98 184.628C882.718 184.263 878.501 184.072 873.314 184.072H857.083V201.809H878.421C890.865 201.809 898.359 199.698 904.804 195.49C911.248 191.281 916.245 183.85 919.809 173.195L961.229 48.7652V44.3349H942.198V44.3508ZM677.418 87.3835L646.086 44.3508H624.08V48.7811L661.633 98.6896L615.853 155.251V159.682H638.305L674.76 113.33L708.765 159.682H730.326V155.251L690.545 102.024L733.667 49.0193V44.3666H711.215L677.433 87.3994L677.418 87.3835ZM744.886 159.682H764.887V44.3666H744.886V159.698V159.682ZM616.76 123.08C613.943 133.878 608.199 143.231 599.543 151.139C590.871 159.047 578.459 163.001 562.308 163.001C550.151 163.001 539.458 160.523 530.197 155.569C520.936 150.615 513.792 143.564 508.747 134.386C503.703 125.224 501.189 114.426 501.189 102.008C501.189 89.5908 503.64 78.7929 508.525 69.6305C513.41 60.4682 520.268 53.4019 529.083 48.4476C537.899 43.4933 548.226 41.0161 560.08 41.0161C571.935 41.0161 581.753 43.4615 589.98 48.3365C598.206 53.2114 604.348 59.6901 608.422 67.7409C612.495 75.8076 614.532 84.6364 614.532 94.2434V107.55H522.305C523.037 119.079 526.935 128.257 533.968 135.053C541.002 141.849 550.453 145.263 562.308 145.263C571.935 145.263 579.318 143.31 584.426 139.388C589.534 135.466 593.273 130.035 595.644 123.08H616.76ZM522.527 90.9246H592.319C592.319 80.873 589.725 72.9969 584.538 67.2963C579.35 61.6115 571.203 58.7532 560.096 58.7532C549.721 58.7532 541.24 61.5321 534.653 67.074C528.065 72.6158 524.023 80.5713 522.543 90.9087L522.527 90.9246Z" fill="currentColor"></path>
  </symbol>
</svg>
</div><div class="scrollbar-thin" style="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;" aria-hidden="true" role="presentation"></div><div class="scrollbar-thin" style="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;" aria-hidden="true" role="presentation"></div><div class="right-toastHMargin erp-sidecar:top-[114px] fixed top-toastVMargin z-30 flex items-center justify-center"></div><div class="right-toastHMargin erp-sidecar:top-[114px] fixed top-toastVMargin z-30 flex items-center justify-center"></div><div data-type="portal"></div><div data-type="portal"></div><div class="right-toastHMargin erp-sidecar:top-[114px] fixed top-toastVMargin z-30 flex items-center justify-center"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div class="right-toastHMargin erp-sidecar:top-[114px] fixed top-toastVMargin z-30 flex items-center justify-center"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div class="right-toastHMargin erp-sidecar:top-[114px] fixed top-toastVMargin z-30 flex items-center justify-center"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div class="right-toastHMargin erp-sidecar:top-[114px] fixed top-toastVMargin z-30 flex items-center justify-center"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div class="right-toastHMargin erp-sidecar:top-[114px] fixed top-toastVMargin z-30 flex items-center justify-center"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div class="right-toastHMargin erp-sidecar:top-[114px] fixed top-toastVMargin z-30 flex items-center justify-center"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div class="right-toastHMargin erp-sidecar:top-[114px] fixed top-toastVMargin z-30 flex items-center justify-center"></div><div class="right-toastHMargin erp-sidecar:top-[114px] fixed top-toastVMargin z-30 flex items-center justify-center cursor-pointer"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div data-type="portal"></div><div class="right-toastHMargin erp-sidecar:top-[114px] fixed top-toastVMargin z-30 flex items-center justify-center"></div></body></html>